---
title: Skype for Business Online セキュリティ ガイド
ms.author: tonysmit
author: tonysmit
manager: serdars
ms.reviewer: ''
ms.date: 01/22/2018
ms.topic: article
ms.tgt.pltfrm: cloud
ms.service: skype-for-business-online
ms.collection: Adm_Skype4B_Online
ms.audience: Admin
appliesto:
- Skype for Business
- Skype for Business Online
- Microsoft Teams
localization_priority: Normal
f1keywords: None
ms.custom:
- Security
description: Skype for Business Online セキュリティ ガイド <add description>
ms.openlocfilehash: b3ba4368cd68239ad612e5c4dfd059a100173b30
ms.sourcegitcommit: 0fa147c33b1d7b5790af8d93339700ab62939430
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/11/2018
ms.locfileid: "19744323"
---
#  <a name="security-and-skype-for-business-online"></a>セキュリティと Skype for Business Online

Skype for Business Online (SfBO) は、[ Office 365](https://products.office.com/en-us/business/office-365-trust-center-security)  サービスの一部として、多層防御のサービス レベルのセキュリティ、サービス内の顧客コントロール、セキュリティ強化、運用上のベスト プラクティスなど、すべてのセキュリティ ベスト プラクティスとプロシージャに従っています。

## <a name="trustworthy-by-design"></a>設計による高信頼性
Skype for Business Online は、https://www.microsoft.com/en-us/sdl/default.aspx に記載されている「Microsoft 信頼できるコンピューティングのセキュリティ開発ライフ サイクル」に準拠して設計、開発されました。 より安全な統合コミュニケーション システムを作成するうえでの最初のステップは、脅威モデルを設計し、各機能を設計時にテストすることでした。 コーディング プロセスとコーディング手法には、セキュリティに関連する複数の改善点が組み込まれていました。 ビルド時に使われるツールは、製品にコードが最終的にチェックインされる前にバッファ オーバーランなどの潜在的なセキュリティ上の脅威を検出します。 それでも、未知のセキュリティ上の脅威のすべてを防ぐように設計することは不可能です。 完全なセキュリティを保証できるシステムはありません。 しかしながら、最初から製品開発の安全な設計原則を採用していたため、 Skype for Business Online には業界標準のセキュリティ技術がアーキテクチャの基本的要素として組み込まれています。 

## <a name="trustworthy-by-default"></a>既定値による高信頼性
Skype for Business Online のネットワーク通信は、既定で暗号化されます。 高度暗号化標準すべてのサーバーに証明書の使用を要求し、OAUTH、TLS、SRTP (Secure Real-Time Transport Protocol)、256 ビットの 高度暗号化標準 (AES) の 暗号化を含む他の業界標準の暗号化技術を使用することにより、すべての Skype for Business Online のデータはネットワーク上で保護されています。

## <a name="how-sfbo-handles-common-security-threats"></a>SfBO の一般的なセキュリティ上の脅威に対する対処方法
このセクションでは、SFBO サービスのセキュリティに対するより一般的な脅威と、Microsoft がそれらの脅威の軽減に用いる方法を明らかにします。

### <a name="compromised-key-attack"></a>危殆化キーによる攻撃
キーとは、機密情報の暗号化、復号化、または検証に使用される秘密のコードまたは数値です。 考慮すべき公開キー基盤 (PKI) には、各証明書の所有者が所持する秘密キーと、通信パートナーによる ID およびセッション キーの交換が成功した後に使用されるセッション キーの 2 つの機密キーがあります。  危殆化キーによる攻撃は、攻撃者が秘密キーまたはセッション キーを割り出した場合に発生します。 攻撃者がキーの割り出しに成功した場合、攻撃者はそのキーを使用して、データの送信者に関する知識がなくても、暗号化されているデータを解読できます。

Skype for Business Online は、Windows Server オペレーティング システムで PKI の機能を使用して、トランスポート層セキュリティ (TLS) 接続の暗号化に使用されるキー データを保護します。 メディアの暗号化に使用されるキーは、TLS 接続を介して交換されます。 

### <a name="network-denial-of-service-attack"></a>ネットワークの Dos (サービス拒否) 攻撃
Dos 攻撃は、有効なユーザーによるネットワークの正常な使用または機能が、攻撃者によって妨害された場合に発生します。 DoS 攻撃により、攻撃者は以下のことを行えます。
- 攻撃対象のネットワークで実行されているアプリケーションまたはサービスに対して無効なデータを送信して、そのようなアプリケーションまたはサービスが正常に機能するのを妨害する。
- 大量のトラフィックを送信し、正当な要求に対するシステムの応答が停止または低速化するまでシステムを過負荷状態にする。
- 攻撃の証拠を隠蔽する。
- ユーザーがネットワーク リソースにアクセスできないようにする。

このような攻撃を緩和するため、SFBOは Azure DDOS ネットワーク保護を実行し、同じエンドポイント、サブネット、およびフェデレーション エンティティからのクライアント要求を調整します。

### <a name="eavesdropping"></a>盗聴
盗聴は、攻撃者がネットワークのデータ パスにアクセスし、トラフィックをモニターし読み取ることで行われます。 これは、スニッフィングまたはスヌーピングとも呼ばれます。 トラフィックがプレーン テキストの場合、攻撃者は、ネットワークのパスにアクセスしたときに、トラフィックを読み取ることができます。 例としては、データ パス上のルーターを制御することによる攻撃があります。 

SfBO は、O365 および TLS 内のクライアントからサービスに対するサーバー通信に相互 TLS (MTLS) を使用しているため、特定の会話が攻撃される可能性のある時間内にこの攻撃が目的を達成することは非常に困難です。 TLS はすべての関係者を認証し、すべてのトラフィックを暗号化します。 これで盗聴が防がれることはありませんが、攻撃者は暗号を破らない限りトラフィックを読み取れません。

TURN プロトコルは、リアルタイム メディア通信に使用されます。  TURN プロトコルでは、トラフィックの暗号化は必須ではなく、送信する情報はメッセージの整合性によって保護されます。 盗聴にさらされているにもかかわらず、パケットの送信元アドレスと宛先アドレスを見るだけで、送信する情報 (IP アドレスとポート) を直接抽出できます。 SfBO サービスは、クリア テキストで送信されることのない TURN パスワードをはじめとするいくつかのアイテムから得られるキーを使用してメッセージの持つメッセージ整合性を確認することにより、データの有効性を保証します。 メディア トラフィックには SRTP を使用し暗号化されています。

### <a name="identity-spoofing-ip-address-spoofing"></a>ID のスプーフィング (IP アドレスのスプーフィング)
スプーフィングは、権限をもたない攻撃者がネットワーク、コンピューター、ネットワーク コンポーネントの IP アドレスを特定して使用することで行われます。 攻撃に成功した場合、攻撃者は、通常その IP アドレスで識別されるエンティティであるかのように振る舞うことができます。 Microsoft Lync Server 2010 のコンテキスト内では、管理者が次の両方を行った場合にこのような状況が発生します。
- 伝送制御プロトコル (TCP) のみをサポートする接続を構成した (TCP 通信は暗号化されないため、推奨されません)。
- このような接続の IP アドレスを信頼できるホストとしてマークした 

トランスポート層セキュリティ (TLS) 接続では、TLS がすべての関係者を認証し、すべてのトラフィックを暗号化するため、このような問題は生じません。 TLS を使用すると、特定の接続 (相互 TLS 接続など) で攻撃者が IP アドレス スプーフィングを実行できません。 しかし、攻撃者が SfBO が使用する DNS サーバーのアドレスを偽装する可能性はあります。 ただし、SfBO の認証は証明書を使用して実行されるため、攻撃者が攻撃を行うためには通信の関係者の 1 つを偽装するために必要な有効な証明書が必要になります。

### <a name="man-in-the-middle-attack"></a>中間者 (man-in-the-middle) 攻撃
中間者攻撃は、攻撃者が 2 人の通信ユーザー間の通信を双方に気づかれることなく攻撃者のコンピュータを介するように再ルーティングすることで行われます。 攻撃者は、目的の受信者に到達する前にトラフィックをモニターし読み取ることができます。 通信中の各ユーザーは、意図したユーザーとだけ通信していると考えながら、知らずのうちに攻撃者にトラフィックを送信し、攻撃者からトラフィックを受信します。 これは、攻撃者が Active Directory ドメイン サービスを変更して信頼するサーバーとして攻撃者のサーバーを追加したり、クライアントがサーバーに接続する際に攻撃者経由で接続するようにドメイン名システム (DNS) を変更できる場合に発生します。 

中間者攻撃は、TLS を使うセッション開始プロトコル (SIP) を使用してピア間でネゴシエートされた暗号キーを使用する SRTP で暗号化された SfBO Point-To-Point 音声、ビデオ、アプリケーション共有ストリームを除き、2 つのクライアント間のメディア トラフィックでも発生する可能性がありますします。 

### <a name="rtp-replay-attack"></a>RTP 再生攻撃
再生攻撃は、2 者間の有効なメディア伝送が、不正な目的で傍受されて転送される場合に発生します。 SfBO は、受信者が、受信済みの RTP パケットのインデックスを保持し、インデックスにリスト済みのパケットと新しいパケットを比較できるようにすることで、セキュリティが保護されたシグナリング プロトコルを SRTP と併用してリプレイ攻撃から伝送を保護します。

### <a name="spim"></a>SPIM
SPIM とは、一方的に送りつけられる営利目的のインスタント メッセージまたはプレゼンス サブスクリプション要求のことです。 それ自体はネットワークを侵害するものではありませんが、少なくとも迷惑なものであり、リソースの可用性および生産性を低下させ、結果としてネットワークの侵害を招く可能性があります。 SPIM の一例として、ユーザーが要求を送信することで相互に SPIM を送るケースがあります。 ユーザーは相互にブロックしてこれを防ぐことができますが、フェデレーションの場合、調整された SPIM 攻撃が確立されると、パートナーのフェデレーションを無効にしない限り、対処が困難になるおそれがあります。

### <a name="viruses-and-worms"></a>ウイルスとワーム
ウイルスは、同種の追加コード単位の複製を目的としたコード単位です。 ウイルスは、有効に機能するためにホスト (ファイル、電子メール、プログラムなど) を必要とします。 ワームもウイルスと同様にコードの追加、複写、複製を行うプログラムですが、ウイルスとは異なりホストを必要としません。 ウイルスとワームは、主としてクライアント間でファイルを転送している時、または他のユーザーから URL が送信された時に出現します。 ウイルスがコンピューター上に存在する場合、そのウイルスは、たとえば、無断でユーザー ID を使用してインスタント メッセージを送信する可能性があります。  定期的なウイルス スキャンなどの標準的なクライアント セキュリティのベスト プラクティスは、この問題を軽減します。  

## <a name="personally-identifiable-information"></a>個人を特定できる情報
SfBO では、個人に結びつけることのできる情報が公共ネットワーク上に公開される可能性があります。 このような情報は、次の 2 つのカテゴリに分類できます。
- **拡張プレゼンス データ**&nbsp;&nbsp;&nbsp;拡張プレゼンス データとは、ユーザーがフェデレーション パートナーへのリンクや組織内の連絡先との共有を選択できる情報です。 このデータはオープン インスタント メッセージ (IM) ネットワーク上のユーザーとは共有されません。 クライアント ポリシーや他のクライアント設定により、システム管理者に何らかのコントロールを与えることができます。 SfBO サービスでは、各ユーザーに拡張プレゼンス プライバシー モードを設定し、ユーザーの連絡先リストにない SfBO ユーザーがユーザーのプレゼンス情報を見ることを防ぐことができます。 
- **必須データ**&nbsp;&nbsp;&nbsp;必須データは、サーバーまたはクライアントが適切に機能するために必要なデータです。 ルーティング、状態維持、シグナリングのためにサーバー レベルまたはネットワーク レベルで必要な情報です。
次の表に、SfBO が動作するために必要なデータを示します。

***表 1 - 拡張プレゼンス データ***

<!--start table here -->

||||
|:-----|:-----|:-----|
|**データ**|**指定可能な****設定**|
|個人データ |名前、役職、会社、電子メール アドレス、タイム ゾーン|
|電話番号|勤務先、携帯、自宅|
|予定表情報|空き時間、不在通知、会議の詳細 (予定表にアクセスできるユーザーに公開されます)| 
|プレゼンス状態|退席中、連絡可能、取り込み中、応答不可、オフライン|
|||||

<!-- end of table -->

***表 2 - 必須データ***

<!--start table here -->

||||
|:-----|:-----|:-----|
|**カテゴリ** |**指定可能な設定** |
|IP アドレス|コンピューターの実際のアドレスまたは NAT で変換したアドレス|
|SIP URI|<u>david.campbell@contoso.com</u>|
|名前|David Campbell（Active Directoryドメインサービスで定義されている）|
|||||

<!-- end of table -->

## <a name="security-framework-for-sfbo"></a>SfBO のセキュリティ フレームワーク
このセクションでは、Microsoft SfBOに関するセキュリティ の枠組みを形成する根本的な要素の概要を示します。これらの要素は以下の通りです。
- Azure Active Directory (AAD) は、ユーザー アカウント用の単一の信頼できるバックエンド リポジトリを提供します。 
- 公開キー基盤 (PKI) は、信頼できる証明機関 (CA) から発行された証明書を使用してサーバーを認証し、データの整合性を保証します。
- トランスポート層セキュリティ (TLS)、HTTPS over SSL (HTTPS)、相互 TLS (MTLS) を使用すると、エンドポイント認証と IM の暗号化ができます。 二地点間の音声、ビデオ、アプリケーション共有のストリームは、セキュア リアルタイム転送プロトコル (SRTP) を使用して暗号化され、整合性が確認されます。
- ユーザーの認証には、業界標準のプロトコルができる限り使用されます。

このセクションのトピックでは、SfBO サービスのセキュリティを高めるために各基本要素が機能する仕組みを説明します。

### <a name="azure-active-directory"></a>Azure Active Directory
Azure Active Directory は、O365 のディレクトリ サービスとして機能します。 すべてのユーザー ディレクトリ情報とポリシーの割り当てが格納されます。 

### <a name="public-key-infrastructure-for-sfbo"></a>SfBO の公開キー基盤
SfBO サービスは、サーバー認証と、クライアントとサーバー間およびサーバーの異なる役割間の信頼チェーンの確立に証明書を使用します。 Windows サーバー公開キー基盤 (PKI) は、この一連の信頼チェーンを確立し、検証するための基盤を提供します。
証明書とはデジタル ID のことです。 証明書は、名前によってサーバーを識別し、そのプロパティを指定します。 証明書の情報が有効であるためには、サーバーに接続するクライアントやその他のサーバーが信頼する証明機関 (CA) からこの証明書が発行されている必要があります。 サーバーがプライベート ネットワーク上の他のクライアントおよびサーバーとのみ接続する場合は、CA はエンタープライズ CA となります。 サーバーがプライベート ネットワーク外のエンティティと対話する場合は、パブリック CA が必要な可能性があります。

証明書の情報が有効であっても、証明書を提示しているサーバーが、実際に証明書によって提示されているサーバーであることを確認する手段が必要です。 ここで Windows PKI が役立ちます。
各証明書は、公開キーにリンクされています。 証明書で名前が指定されているサーバーには、そのサーバーのみが知る、対応する秘密キーがあります。 接続しようとしているクライアントまたはサーバーは、公開キーを使用して無作為な情報の断片を暗号化し、それをサーバーに送信します。 サーバーがその情報を解読しプレーンテキストに戻すと、接続しようとしているエンティティは、証明書の秘密キーをサーバーが保持していること、つまり、そのサーバーが証明書で指定されていることを確認できます。

#### <a name="crl-distribution-points"></a>CRL 配布ポイント
SfBO では、すべてのサーバー証明書に 1 つ以上の証明書失効リスト (CRL) 配布ポイントが含まれている必要があります。 CRL 配布ポイント (CDP) とは、証明書の発行後にそれが失効していないこと、および証明書が有効期限内にあることを確認するために、CRL をダウンロードできる場所です。 CRL 配布ポイントは、証明書のプロパティに URL として記述されるセキュア HTTP です。  SfBO サービスは、すべての証明書認証で CRL を確認します。

#### <a name="enhanced-key-usage"></a>拡張キー使用法
SfBO サービスのすべてのコンポーネントは、すべてのサーバー証明書がサーバー認証用の拡張キー使用法 (EKU) に対応していることを必要とします。 サーバー認証用に EKU フィールドを構成することは、サーバーの認証に対して、その証明書が有効であることを意味します。 この EKU は、MTLS には不可欠です。 

### <a name="tls-and-mtls-for-sfbo"></a>SfBO の TLS と MTLS
TLS プロトコルと MTLS プロトコルは、インターネット上で暗号化された通信とエンドポイント認証を提供します。 SfBO は、この 2 つのプロトコルを使用して、信頼できるサーバーから成るネットワークを形成し、そのネットワーク上のすべての通信が暗号化されるようにします。 サーバー間のすべての SIP 通信は MTLS により行われます。 クライアントからサーバーへの SIP 通信は TLS により行われます。

TLS により、ユーザーは使用するクライアント ソフトウェアを介して接続先の SfBO サーバーを認証することができます。 TLS 接続では、クライアントはサーバーから有効な証明書を要求します。 証明書が有効であると見なされるためには、証明書の発行元の CA がクライアントからも信頼されていること、およびサーバーの DNS 名が証明書の DNS 名に一致していることが必要です。 証明書が有効な場合、クライアントは証明書内の公開キーを使用して、通信に使う対称暗号化キーを暗号化し、証明書の最初の所有者だけが、その秘密キーを使用して通信の内容を暗号化することができます。 この接続は信頼済みと見なされ、それ以降は他の信頼されたサーバーやクライアントからチャレンジされません。 このような意味合いで、Web サービスで使用される SSL (Secure Sockets Layer) は TLS ベースであるということができます。

サーバー間接続は、相互認証のために相互 TLS (MTLS ) を使用します。 MTLS 接続では、サーバーが発信したメッセージをサーバーが受信すると、相互に信頼できる CA からの証明書を交換します。 証明書は、各サーバーの ID を他のサーバーに証明します。 SfBO サービスは、このプロシージャに従っています。

TLS と MTLS は、盗聴および中間者 (man-in-the-middle) 攻撃の両方を防ぐのに役立ちます。 中間者 (man-in-the-middle) 攻撃では、攻撃者は 2 つのネットワーク エンティティ間の通信を、双方に気付かれることなく、攻撃者のコンピューターを経由して再ルーティングします。 TLS および SfBO の仕様による信頼できるサーバーでは、2 つのエンドポイントの間で公開キー暗号法に基づいて連携するエンド ツー エンドの暗号化を使用することにより、アプリケーション層での中間者攻撃のリスクが部分的に軽減され、攻撃者は有効で信頼できる証明書 (対応する秘密キーがあり、クライアントが通信の暗号を解読するためにやり取りするサービスの名前に合わせて発行されたもの) を手に入れるしかなくなります。 

### <a name="encryption-for-sfbo"></a>SfBO の暗号化
SfBO では、TLS と MTLS を使用してインスタント メッセージを暗号化します。 トラフィックが内部ネットワークに限定されているか、内部ネットワークの境界を越えるかに関係なく、MTLS は、サーバー間のすべてのトラフィックに必要です。

次の表は、SfBO で使用するプロトコルをまとめたものです。

***表 3 - トラフィック保護***

<!--start table here with header -->


|||
|:-----|:-----|
|**トラフィックの種類**|**により保護**|
|サーバー間|MTLS|
|クライアントからサーバー|TLS|
|インスタント メッセージングとプレゼンス|TLS (TLS用に設定されている場合)|
|オーディオとビデオ、メディアのデスクトップ共有|SRTP|
|デスクトップ共有 (シグナリング)|TLS|
|Web 会議|TLS|
|会議コンテンツのダウンロード、アドレス帳のダウンロード、配布グループの拡張|HTTPS|
|||

<!-- end of table -->

#### <a name="media-encryption"></a>メディアの暗号化
メディア トラフィックは、RTP トラフィックに対して機密性、認証、反射攻撃保護を提供する RTP (Real-Time Transport Protocol) のプロファイルである SRTP (Secure RTP) を使用して暗号化されます。 SRTP は、安全な乱数ジェネレータを使用して生成されたセッション キーを使用し、シグナリング TLS チャネルを使用して交換します。 さらに、仲介サーバーと内部ネクスト ホップの間で双方向に流れるメディアも SRTP を使用して暗号化されます。 

SfBO は、TURN を使用したメディア リレーへの安全なアクセスのためのユーザ名/パスワードを生成します。 メディア リレーは、TLS で保護された SIP チャネル上でユーザー名/パスワードを交換します。

#### <a name="fips"></a>FIPS
SfBO は、暗号キーの交換に FIPS (Federal Information Processing Standard) に準拠したアルゴリズムを使用します。 

### <a name="user-and-client-authentication"></a>ユーザー認証とクライアント認証 
信頼できるユーザーとは、O365 の AAD により資格情報が認証されたユーザーです。 

認証では、信頼できるサーバーまたはサービスへユーザー資格情報が渡されます。 SfBO は、ユーザーの状態や場所に応じて、次の認証プロトコルを使用します。
- **先進認証 (MA)** は、クライアントとサーバー間の通信用に Microsoft が OAUTH 2.0 を実装したものです。 O365 証明書ベースの認証、O365 マルチ ファクター認証、O365 条件付きアクセスなどのセキュリティ機能を有効にします。  MA を使用するには、オンライン テナントとクライアントの両方で MA が有効にされている必要があります。  2017 年 5 月以降に作成された SfBO テナントでは、MA は既定値として有効になっています。  これ以前に作成されたテナントの場合は、指示に従って有効にします。  Skype for Business 2015 または 2016 クライアント、Skype for Business on Mac、Lync 2013 クライアント、3PIP IP 電話、iOS、Android のすべてのクライアントは MA に対応しています。 
- **Org ID** は、先進認証が有効ではない (または使用できない) 場合に使用されます。
- **ダイジェスト プロトコル**: いわゆる匿名ユーザーに対して使用されます。匿名ユーザーは、有効な Active Directory の資格情報は持たないが、社内会議に招待され、有効な会議キーを持つ外部ユーザーです。ダイジェスト認証は、他のクライアント操作には使用されません。

SfBO の認証は 2 つのフェーズで構成されます。
1. クライアントとサーバーの間に、セキュリティ アソシエーションが確立されます。
2. クライアントとサーバーは、既存のセキュリティ アソシエーションを使用して、送信するメッセージに署名し、受信するメッセージを検証します。サーバーで認証が有効になっている場合、クライアントからの認証されていないメッセージは受信されません。

ユーザーの信用情報は、ユーザー ID 自体ではなく、ユーザーから送信される各メッセージに添付されます。 サーバーは、各メッセージについて、送信元ユーザーの資格情報が有効であるかどうか確認します。 ユーザー資格情報が有効な場合、そのメッセージを受け取る最初のサーバーだけではなく、SfBO の他のすべてのサーバーで、そのメッセージが受信できるようになります。

フェデレーション パートナーが発行した有効な資格情報を持つユーザーは信頼されますが、これらのユーザーに対しては、内部ユーザーに与えられる権限のうち一部の使用を、必要に応じて制限できます。

メディア認証では、ICE プロトコルと TURN プロトコルでも、IETF TURN RFC に記載されているとおり、ダイジェスト チャレンジが使用されます。 詳細は、「[メディアトラバーサル](#external-user-av-traffic-traversal)」を参照してください。

クライアント証明書は、SFBO によるユーザー認証の代替手段を提供します。 ユーザー名とパスワードを提供する代わりに、ユーザーは証明書と、暗号化認証の解決に必要な証明書に対応する秘密キーを持ちます。 

### <a name="windows-powershell-and-sfbo-management-tools"></a>Windows PowerShell と SfBO 管理ツール
SfBO では、IT 管理者は O365 管理ポータルまたはテナント リモート パワーシェル (TRPS) を使用してサービスを管理できます。  テナント管理者は先進認証を使用して TRPS を認証します。

### <a name="configuring-access-to-sfbo-at-your-internet-boundary"></a>インターネット境界で SfBO へのアクセスを設定する
インターネット境界の SfBO アクセス設定 SfBO が適切に機能(ユーザーが会議に参加できる等)するためには 、SfBO クラウド内のサービスへの発信 UDP トラフィックと TCP トラフィックが許可されるようにインターネットアクセスを設定する必要があります。  詳しくはこちらをご覧ください。 https://support.office.com/en-us/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2#bkmk_lyo 

### <a name="udp-3478-3481-and-tcp-443"></a>UDP 3478 〜 3481 と TCP 443

UDP 3478 〜 3481 および TCP 443 ポートは、クライアントが音声ビデオ エッジ サービスのサービスをリクエストするために使用されます。 クライアントは、この 2 つのポートを使用して、接続相手が接続するための UDP ポートと TCP ポートをそれぞれ割り当てます。 音声ビデオ エッジ サービスにアクセスするには、まず音声ビデオ エッジ サービスの認証資格情報を取得するために、クライアントが SFBO レジストラとの認証済み SIP シグナリング セッションを確立している必要があります。 これらの値は、TLS で保護されたシグナリング チャネルを介して送信され、ディクショナリ攻撃を軽減するためにコンピュータで生成されます。 クライアントは、これらの資格情報を音声ビデオ エッジ サービスのダイジェスト認証に使用してメディア セッションで使用するポートを割り当てることができます。 クライアントから最初の割り当てリクエストが送信され、音声ビデオ エッジ サービスから 401 nonce/ チャレンジ メッセージが返されます。 クライアントは、ユーザー名と nonce のハッシュ メッセージ認証コード (HMAC) ハッシュを含む 2 番目の割り当てリクエストを送信します。 

反射攻撃を防止するために、シーケンス番号メカニズムも用意されています。 サーバーは、ユーザー名とパスワードに関する自身の知識に基づき予想される HMAC を計算し、HMAC 値が一致する場合に割り当て手順を実行します。それ以外の場合、パケットは廃棄されます。 これと同じ HMAC メカニズムは、コール セッション内の後続メッセージに対しても適用されます。 ユーザー名 / パスワード値の有効期間は最大 8 時間です。クライアントは、後続のコールで新しいユーザー名 / パスワードを再取得します。

### <a name="udptcp-50000-59999"></a>UDP/TCP 50,000 〜 59,999
TCP 50,000 アウトバウンドは、アプリケーションとデスクトップの共有、ファイル転送などに SfBO が使用します。 UDP/TCP 50,000 〜 59,999 のポート範囲は、音声ビデオ エッジ サービスからの NAT/ ファイアウォール トラバーサル サービスを必要とする Microsoft Office Communications Server 2007 のパートナーとのメディア セッションに使用します。 音声ビデオ エッジ サービスはこれらのポートを使用する唯一のプロセスであるため、ポート範囲の広さは攻撃の可能性の範囲の広さを示すものではありません。 セキュリティ プラクティスとして、不要なネットワーク サービスを実行しないことにより、リスニング ポートの総数を最小限に抑えることを推奨します。 ネットワーク サービスが実行されていない場合は、リモートの攻撃者に悪用されることはなく、ホスト コンピュータの攻撃面が縮小されます。 しかし、単一サービス内でポート数を減らしても同じ利点はありません。 音声ビデオ エッジ サービスソフトウェアでは、10,000 のポートを開けた状態でも 10 のポートより攻撃が多くなることはありませんでした。 この範囲内のポートの割り当てはランダムに行われ、割り当てられていないポートはパケットをリッスンしません。
 
### <a name="external-user-av-traffic-traversal"></a>外部ユーザー音声ビデオ トラフィック トラバーサル
外部ユーザーと内部ユーザーがメディアを交換できるようにするには、セッションのセットアップと切断に必要な SIP シグナリングを処理するアクセス エッジ サービスが必要です。 また、音声ビデオ エッジ サービスは、メディア転送用のリレーとして機能する必要があります。 コール シーケンスを次の図に示します。


![会議参加のコール シーケンス](media/sfbo-call-sequence-security.png) 

1. ユーザーは SfBO 会議への参加の招待を含む電子メールを受信します。 電子メールには、会議キーと会議通話にリンクする HTTP ベースの URL が含まれます。 特定の会議では、キーと URL の両方が一意のものです。<p>ユーザーは、ユーザーの機器上でクライアント検出プロセスを開始する電子メール内の会議 URL をクリックすることにより、参加手順を開始します。  検出されたクライアントが起動します。  クライアントが検出されない場合、ユーザーは Web クライアントにリダイレクトされます。<p/>
2. SfBO クライアントは、ユーザーの資格情報を含む SIP INVITE を送信します。 フェデレーションまたはリモート ユーザーは、エンタープライズ資格情報を使用して会議に参加します。 フェデレーション ユーザーの場合、SIP INVITE はまずユーザーを認証し、INVITE を SfBO に転送する自身のホーム サーバーに送信されます。 匿名ユーザーは、ダイジェスト認証に通る必要があります。<p>SfBO はリモート ユーザーまたは匿名ユーザーを認証し、クライアントに通知します。 手順 2で説明したように、会議に参加するフェデレーション ユーザーは所属するエンタープライズにより認証されます。<p/>

3. クライアントは、音声ビデオ会議にユーザーを追加するために INFO リクエストを送信します。

    音声ビデオ会議は、他の情報の中で音声ビデオ会議エッジ サービスに提示するトークンを含む Add User 応答を送信します。

    [注] 先行するすべての SIP トラフィックは、アクセス エッジ サービスを介して流れます。

    クライアントは音声ビデオ会議サーバーに接続し、そのサーバーはトークンを検証し、別の認証トークンを含むリクエストを内部音声ビデオ会議サーバーにプロキシします。 会議に参加するのが有効なユーザーであることをさらに確実にするために、音声ビデオ会議サーバーは SIP チャネルで最初に発行された承認トークンを検証します。
    
4. クライアントと音声ビデオ会議サーバー間では、メディア接続が SRTP を介してネゴシエートされセットアップされます。
5. ユーザーは SfBO 会議への参加の招待を含む電子メールを受信します。 電子メールには、会議キーと会議通話にリンクする HTTP ベースの URL が含まれます。 特定の会議では、キーと URL の両方が一意のものです。

### <a name="federation-safeguards-for-sfbo"></a>SfBO のフェデレーション セーフガード
フェデレーションは、組織が IM とプレゼンスを共有するために他の組織と通信する機能を提供します。 SfBO では、フェデレーションは既定で有効です。  ただし、テナント管理者は O365 管理ポータルでこれをコントロールできます。  続きを見る。

## <a name="addressing-threats-to-sfbo-conferences"></a>SfBO 会議の脅威に対する取り組み

SfBO は、エンタープライズ ユーザーにリアルタイムな Web 会議の作成と参加の機能を提供します。 エンタープライズ ユーザーは、AAD/O365 アカウントを持たない外部ユーザーを会議に招待し参加させることができます。 フェデレーション パートナーにより雇用され、安全で認証された ID を持つユーザーは会議に参加することもできます。また、権限を与えた場合はプレゼンターになることもできます。 匿名ユーザーは会議を作成したりプレゼンターとして参加することはできませんが、参加後にプレゼンターになることはできます。

外部ユーザーが SfBO 会議に参加できるようにすることは、この機能の価値は大幅に高めますが、セキュリティ上のリスクも伴います。 このリスクに対処するために、SfBO はさらに以下のセーフガードを提供します。
- 参加者の役割により会議通話のコントロール権限が決定します。
- 参加者タイプの使用により、特定の会議へのアクセスを制限できます。
- 会議の種類を定義することで、参加可能な参加者のタイプが決まります。
- 会議をスケジュールできるのは、AAD アカウントと SfBO ライセンスを持つユーザーに限定されます。
- ダイヤルイン会議通話に参加する匿名ユーザー (認証されていないユーザー) は、会議通話アクセス番号にダイヤルすると、会議 ID を入力するよう求められます。 認証されていない匿名ユーザーも名前の記録を求められます。 記録された名前で、会議内の認証されていないユーザーを識別します。 匿名ユーザーは、少なくとも 1 人のリーダーまたは認証されたユーザーが参加するまで会議に参加できず、あらかじめ定義された役割を割り当てることはできません。

### <a name="participant-roles"></a>参加者の役割
会議の参加者は 3 つのグループに分けられ、それぞれ権限と制限があります。
- **開催者**&nbsp;&nbsp;即時またはスケジュールを設定して会議を作成するユーザー。 開催者は認証されたエンタープライズ ユーザーであり、会議のすべてのエンド ユーザーを管理する必要があります。
- **プレゼンター**&nbsp;&nbsp;サポートされているメディアを使い、会議で情報を提示する権限を与えられたユーザー。 会議の開催者は、定義上のプレゼンターでもあり、他に誰がプレゼンターになれるかを決定します。 開催者は、会議をスケージュールした時、または会議の進行中にこの決定を行えます。
- **出席者**&nbsp;&nbsp;会議に出席するように招待されているが、プレゼンターとしての権限を持たないユーザー。

プレゼンターは、会議の進行中に出席者にプレゼンターの役割を与えることもできます。

### <a name="participant-types"></a>参加者タイプ

会議の参加者は、場所と資格情報によっても分類されます。 両方の特性を使用して、特定の会議にアクセスできるユーザーを特定することができます。 ユーザーは、大きく次のカテゴリに分類できます。
1.  **テナントに属するユーザー** &nbsp;&nbsp; これらのユーザーは、テナントのAzure Active Directoryに資格情報を持っています。<br/>
    a. * Corpnet * 内ユーザー － これらのユーザーは企業ネットワークの内部から参加しています。<br/>b. * リモートユーザー*  － これらのユーザーは企業ネットワークの外部から参加しています。 在宅勤務や出張中の従業員や、信頼できるベンダーの従業員をはじめとする、サービス使用条件を満たすエンタープライズ資格情報を与えられた従業員などが該当します。 リモート ユーザーは、会議を作成して参加することができるとともにプレゼンターにもなれます。
2.  **テナントに属するユーザー** &nbsp;&nbsp; これらのユーザーは、テナントのAzure Active Directoryに資格情報を持っています。<br/>a. * フェデレーション ユーザー*  － フェデレーション ユーザーは、フェデレーション パートナーとの有効な資格情報を所有しているため、SfBO によって認証されたユーザーとして扱われます。 フェデレーション ユーザーは、会議に参加した後でプレゼンターになることができますが、フェデレーションされたエンタープライズでは会議の作成はできません。<br/>b. * 匿名ユーザー*  － 匿名ユーザーは Active Directory の ID を持たず、テナントとフェデレーションされていません。 

顧客データは多くの会議に外部ユーザーが関与していることを示します。 また、同じ顧客は、外部ユーザーに会議への参加を許可する前に、そのユーザーの ID に対する不安の排除を求めています。 次のセクションで説明するように、SfBO は会議へのアクセスを明示的に許可されたユーザー タイプに制限し、すべてのユーザー タイプで会議に参加するために適切な資格情報の提示を求めます。

### <a name="participant-admittance"></a>参加者入場許可
SfBO では、匿名ユーザーはロビーと呼ばれる待機エリアに転送されます。 プレゼンターは、このようなユーザーを会議に参加させるか、拒否することができます。 ユーザーがロビーに転送されるとリーダーに通知され、ユーザーはリーダーが会議への参加を受け入れるか拒否するか、接続がタイムアウトするまで待ちます。ロビーにいる間、ユーザーには音楽が聞こえています。 

既定の設定では、PSTN からダイヤルインする参加者は直接会議に入りますが、このオプションを変更してダイヤルイン参加者も強制的にロビーに転送することができます。  
会議の開催者が、参加者がロビーで待たずに会議に参加できるかどうかをコントロールします。 それぞれの会議は、次のいずれかの方法でアクセスできるように設定できます。
- **会議の開催者である自分のみ**&nbsp;&nbsp;開催者を除くすべての参加者は、許可されるまでロビーで待機する必要があります。
- **会社内から招待した人**&nbsp;&nbsp;社内の誰でも、たとえ招待されていない場合でも、直接会議に参加できます。
- **同じ組織のユーザー**&nbsp;&nbsp;O365 テナントのすべての SfBO ユーザーは、配布リストにない参加者であっても、ロビーで待機することなく会議に参加できます。 すべての外部ユーザーと匿名ユーザーを含む他のすべてのユーザーは、承認されるまでロビーで待機する必要があります。
- **すべてのユーザー**&nbsp;&nbsp;会議リンクにアクセスできるユーザーは会議に直接参加できます (制限はありません )。
開催者のみ (ロック済み) 以外の方法が指定されている場合、会議の開催者はロビーで待機せず電話でダイヤルインするユーザーを指定することもできます。 

### <a name="presenter-capabilities"></a>プレゼンターの指定
会議の開催者は、会議中に参加者が出席できるかどうかをコントロールします。 各ミーティングでは、プレゼンターになれる参加者を次のいずれかに制限することができます。
- **開催者のみ**&nbsp;&nbsp; 会議の開催者のみがプレゼンターになれます。
- **会社内の人**&nbsp;&nbsp; すべての内部ユーザーがプレゼンターになれます。
- **会社外の人を含むすべての人**&nbsp;&nbsp; 会議に参加するすべての人がプレゼンターになれます (制限はありません)。
- **指定した人**&nbsp;&nbsp;会議の開催者がプレゼンターになることができるユーザーを指定します。

## <a name="learn-more"></a>詳細情報
[Office 365のセキュリティセンター](https://products.office.com/en-us/business/office-365-trust-center-security)