---
title: Skype for Business Server でのエッジ サーバーの展開
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: quickstart
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection:
- Strat_SB_Hybrid
ms.custom: ''
ms.assetid: 63c7251c-080a-4175-99a6-f86d0266d6bc
description: '概要: Skype for Business Server 環境にエッジ サーバーを展開する方法について学習します。'
ms.openlocfilehash: 8e23e157d4eb86f5b3d2bd5fa3ab3a54fd8aadc8
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/12/2021
ms.locfileid: "49804377"
---
# <a name="deploy-edge-servers-in-skype-for-business-server"></a>Skype for Business Server でのエッジ サーバーの展開
 
**概要:** Skype for Business Server 環境にエッジ サーバーを展開する方法について学習します。
  
以下のセクションでは [、Skype](../../plan-your-deployment/edge-server-deployments/edge-server-deployments.md) for Business Server ドキュメントの Skype for Business Server Plan for Edge Server 展開の後に従う手順について説明します。 展開の手順は次のとおりです。
  
- ネットワーク インターフェイス
    
- インストール
    
- 証明書
    
- エッジ サーバーの起動
    
## <a name="network-interfaces"></a>ネットワーク インターフェイス

「計画」で説明した通り、エッジ サーバーをホストする境界ネットワークで、または境界ネットワークに DNS を使用せずに、DNS を使用してネットワーク インターフェイスを構成します。
  
### <a name="interface-configuration-with-dns-servers-in-the-perimeter-network"></a>境界ネットワーク内の DNS サーバーとのインターフェイス構成

1. エッジ サーバーごとに 2 つのネットワーク アダプターをインストールします。1 つは内部インターフェイス用、もう 1 つは外部インターフェイス用です。
    
    > [!NOTE]
    > 内部サブネットと外部サブネット間のルーティングは許可しないでください。 
  
2. 外部インターフェイスで、次 **のいずれかを構成します** 。
    
   a.  外部境界ネットワーク サブネット上の 3 つの静的 IP アドレス。外部ファイアウォールの内部インターフェイスを既定のゲートウェイの接続ポイントにします。 2 つの境界 DNS サーバーを指すアダプター DNS 設定を構成します。
    
   b. 外部境界ネットワーク サブネット上の 1 つの静的 IP アドレス。外部ファイアウォールの内部インターフェイスを既定のゲートウェイの接続先にします。 2 つの境界 DNS サーバーを指すアダプター DNS 設定を構成します。 この構成は、以前にポート割り当ての標準以外の値を持つトポロジを構成した場合にのみ受け入れ可能です。これは [、「Skype for Business Server](create-your-edge-topology.md) のエッジ トポロジを作成する」の記事で説明します。
    
3. 内部インターフェイスで、内部境界ネットワーク サブネットに 1 つの静的 IP を構成し、既定のゲートウェイを設定しない。 アダプターの DNS 設定は、少なくとも 1 つの DNS サーバー (2 つの境界 DNS サーバーが望ましい) を指す構成にします。
    
4. クライアント、Skype for Business Server、および Exchange ユニファイド メッセージング (UM) サーバーが存在するすべての内部ネットワークへの内部インターフェイスに永続的な静的ルートを作成します。
    
### <a name="interface-configuration-without-dns-servers-in-the-perimeter-network"></a>境界ネットワークに DNS サーバーがないインターフェイス構成

1. エッジ サーバーごとに 2 つのネットワーク アダプターをインストールします。1 つは内部インターフェイス用、もう 1 つは外部インターフェイス用です。
    
    > [!NOTE]
    > 内部サブネットと外部サブネット間のルーティングは許可しないでください。 
  
2. 外部インターフェイスで、次 **のいずれかを構成します** 。
    
   a.  外部境界ネットワーク サブネット上の 3 つの静的 IP アドレス。 また、インターネットに接続するルーターや外部ファイアウォールを既定のゲートウェイとして定義する場合など、外部インターフェイスで既定のゲートウェイを構成する必要があります。 外部 DNS サーバー (理想的には 1 組の外部 DNS サーバー) を指すアダプター DNS 設定を構成します。
    
   b. 外部境界ネットワーク サブネット上の 1 つの静的 IP アドレス。 また、インターネットに接続するルーターや外部ファイアウォールを既定のゲートウェイとして定義する場合など、外部インターフェイスで既定のゲートウェイを構成する必要があります。 外部 DNS サーバー、または理想的には 1 組の外部 DNS サーバーを指すアダプター DNS 設定を構成します。 この構成は、以前にポート割り当ての標準以外の値を持つトポロジを構成した場合にのみ受け入れ可能です。これは [、「Skype for Business Server](create-your-edge-topology.md) のエッジ トポロジを作成する」の記事で説明します。
    
3. 内部インターフェイスで、内部境界ネットワーク サブネットに 1 つの静的 IP を構成し、既定のゲートウェイを設定しない。 また、アダプターの DNS 設定は空のままにします。
    
4. クライアント、Skype for Business Server、および Exchange ユニファイド メッセージング (UM) サーバーが存在するすべての内部ネットワークへの内部インターフェイスに永続的な静的ルートを作成します。
    
5. 各エッジ サーバーの HOST ファイルを編集して、次ホップ サーバーまたは仮想 IP (VIP) のレコードを格納します。 このレコードは、トポロジ ビルダーでエッジ サーバーの次ホップ アドレスとして構成したディレクター、Standard Edition サーバー、またはフロントエンド プールです。 DNS 負荷分散を使用している場合は、次ホップ プールのメンバーごとに 1 行を含めます。
    
## <a name="installation"></a>インストール

これらの手順を正常に完了するには [、「Skype for Business Server](create-your-edge-topology.md) のエッジ トポロジを作成する」の記事の手順に従う必要があります。
  
1. ローカルの管理者のグループにあるアカウントを使用して、エッジ サーバーの役割用に構成したサーバーにログオンします。
    
2. このコンピューターのエッジ サーバー トポロジのドキュメントの最後に、コピーしたトポロジ構成ファイルが必要です。 その構成ファイルを配置した外部メディア (USB ドライブや共有など) にアクセスします。
    
3. 展開ウィザード **を開始します**。
    
4. ウィザードが開いたら **、[Skype for Business Server システムのインストールまたは更新] をクリックします**。
    
5. ウィザードは、何かが既にインストールされていないか確認するチェックを実行します。 ウィザードを初めて実行する場合は、手順 1 から開始 **します。ローカル構成ストアをインストールします。**
    
6. [ **中央管理ストアのローカル レプリカの構成]** ダイアログが表示されます。 ファイルから [インポート]**をクリックする必要があります (エッジ サーバーに推奨)。**
    
7. ここから、以前エクスポートしたトポロジの場所を参照し、.zip ファイルを選択し、[開く]をクリックして、[次へ] をクリック **します**。
    
8. 展開ウィザードが構成ファイルを読み取り、XML 構成ファイルをローカル コンピューターに書き込みます。
    
9. [**コマンドの実行**] プロセスが完了した後、[**終了**] をクリックします。
    
10. 展開ウィザードで、手順 **2 をクリックします。Skype for Business Server コンポーネントをセットアップまたは削除します**。 ウィザードは、ローカル コンピューターに保存されている XML 構成ファイルで指定された Skype for Business Server Edge コンポーネントをインストールします。
    
11. インストールが完了したら、以下の「証明書」セクションの手順 **に** 進みます。
    
## <a name="certificates"></a>証明書

エッジ サーバーの証明書要件については、「エッジ証明書の計画」のドキュメントを参照してください。 証明書を設定する手順を以下に示します。
  
> [!NOTE]
> 証明書ウィザードを実行する場合は、使用する証明書テンプレートの種類に適切なアクセス許可を持つアカウントとしてログインする必要があります。 既定では、Skype for Business Server 証明書要求は Web サーバー証明書テンプレートを使用します。 RTCUniversalServerAdmins グループのメンバーであるアカウントでログインして、このテンプレートを介して証明書を要求する場合は、そのテンプレートを使用するための登録アクセス許可がグループに割り当てられているか確認してください。 
  
### <a name="internal-edge-interface-certificates"></a>内部エッジ インターフェイス証明書

 
### <a name="1-download-or-export-the-ca-certification-chain"></a>1. CA 認定チェーンをダウンロードまたはエクスポートする

 
#### <a name="nbspnbspnbsp-a-download-using-certsrv-web-site"></a>&nbsp;&nbsp;&nbsp; a. certsrv Web サイトを使用してダウンロードする

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;私。 ローカルの Administrators グループのメンバーとして、内部ネットワーク内の Skype for Business Server にログインします。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ii. [スタート] **ボタンを** 開き、[ **実行]** (または [ **検索** して **実行** ] ) を開き、次のコマンドを入力します。
    
  ```console
  https://<NAME OF YOUR ISSUING CA SERVER>/certsrv
  ```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;例えば：
    
  ```console
  https://ca01/contoso.com/certsrv
  ```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iii. 発行元 CA の certsrv Web ページの [タスクの選択] で、[CA 証明書、証明書チェーン、または CRL のダウンロード] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iv. [CA **証明書、証明書チェーン、または CRL の** ダウンロード] で、[CA 証明書チェーンの **ダウンロード] をクリックします**。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v. [ファイルの **ダウンロード] ボックスで** 、[保存] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vi. .p7b ファイルをサーバーのハード ディスク ドライブに保存し、各エッジ サーバー上のフォルダーにコピーします。
    
### <a name="nbspnbspnbspb-export-using-mmc"></a>&nbsp;&nbsp;&nbsp;b. MMC を使用したエクスポート

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;私。 MMC を使用して、ドメインに参加している任意のコンピューターから CA ルート証明書をエクスポートできます。 [スタート] ボタンと **[ファイル名** を **指定して実行] に** 移動するか、[ **検索**] を開き **、「MMC」と** 入力して開きます。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ii. MMC コンソールで、[ファイル] **をクリック** し、[スナップインの追加と削除] **をクリックします**。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iii. [スナップイン **の追加と** 削除] ダイアログ ボックスの一覧で、[証明書] を選択し、[追加] を **クリックします**。 メッセージが表示されたら、[コンピューター アカウント **] を選択し、[** 次へ] を **選択します**。 [コンピューターの **選択] ダイアログで** 、[ローカル コンピューター] **を選択します**。 [完了 **] を** クリックし **、[OK] をクリックします**。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iv. 証明書 **(ローカル コンピューター) を展開します**。 **[信頼されたルート証明機関]** を展開します。 [証明書 **] を選択します**。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v. CA によって発行されたルート証明書をクリックします。 証明書を右クリックし、メニューの [ **すべての** タスク] を選択して、[エクスポート] を **選択します**。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vi. 証明書 **のエクスポート ウィザードが開** きます。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;はい。 [ファイル **形式のエクスポート** ] ダイアログで、エクスポートする形式を選択します。 この推奨事項は **、Cryptographic Message Syntax Standard - PKCS #7 Certificates (P7b) です**。 選択した場合は、ルート CA 証明書や中間証明書を含む証明書チェーンもエクスポートされます。可能な場合は、証明書パスにすべての証明書を含めるチェック ボックスもオンにしてください。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最も近い [エクスポート **するファイル** ] ダイアログのファイル名エントリで、エクスポートされた証明書のパスとファイル名 (既定の拡張子は .p7b) を入力します。 より簡単な場合は、[参照] ボタンを選択して、エクスポートした証明書を保存する場所に移動し、エクスポートした証明書の名前をここで指定します。 [ **保存]** を **クリックし、** 準備ができたら [次へ] をクリックします。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ix. 操作の概要を確認し、[完了] **をクリックして** 証明書のエクスポートを完了します。 **[OK] を** クリックして、正常にエクスポートされたことを確認します。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x. .p7b ファイルを各エッジ サーバーにコピーします。
    
### <a name="2-import-the-ca-certification-chain"></a>2. CA 認定チェーンをインポートする

&nbsp;&nbsp;&nbsp;a. 各エッジ サーバーで、MMC を開きます([**スタートと実行**] または [**検索**] を選択して、開く **MMC と** 入力します)。
    
&nbsp;&nbsp;&nbsp;b. [ファイル **] メニューの** [スナップインの **追加と削除**] をクリックし、[追加] を **選択します**。
    
&nbsp;&nbsp;&nbsp;c. [スナップイン **の追加と削除] ボックス** で、[証明書] をクリックし、[追加] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;d. **[証明書スナップイン]** ダイアログ ボックスの **[コンピューター アカウント]** をクリックし、**[次へ]** をクリックします。
    
&nbsp;&nbsp;&nbsp;e. [コンピューターの **選択** ] ダイアログ ボックスで、[ローカル コンピューター **: (** このコンソールを実行しているコンピューター) ] チェック ボックスがオンに設定され、[完了] **をクリックします**。
    
&nbsp;&nbsp;&nbsp;f. [閉 **じる] を** クリックし **、[OK] をクリックします**。
    
&nbsp;&nbsp;&nbsp;g. コンソール ツリーで、[証明書 **(ローカル** コンピューター) ] を展開し、[信頼されたルート証明機関]を右クリックし、[すべてのタスク] に移動して、[インポート] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;h. 表示されるウィザードの [インポートするファイル] ボックスで、証明書のファイル名 (前のセクションで .p7b ファイルに指定した名前) を指定します。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;私。 信頼されたルート **証明機関が選択** されている必要がある場合は、[すべての証明書を次のストアに配置する] のラジオ ボタンをオンのままにします。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;j. 概要を確認し、[完了] を **クリックして** インポートを完了します。
    
&nbsp;&nbsp;&nbsp;k. これは、展開するエッジ サーバーごとに実行する必要があります。
    
### <a name="3-create-the-certificate-request"></a>3. 証明書要求を作成する

&nbsp;&nbsp;&nbsp;a. エッジ サーバーの 1 つにログオンし、展開ウィザードを開始し、手順 **3:** 証明書の要求、インストール、または割り当てで、[実行] **(または** このウィザードを既に実行している場合は再度実行) をクリックします。
    
&nbsp;&nbsp;&nbsp;b. [証明書 **の要求] ページ** で、[内部 **エッジ証明書]** が選択されている必要があります。[要求] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;c. [遅延要求または即時要求] ページで、エッジ環境から要求にアクセスできる場合はオンライン証明機関に直ちに要求を送信するか、今すぐ要求を準備しますが、それ以外の場合は送信します。 
    
&nbsp;&nbsp;&nbsp;d. [証明書要求 **ファイル** ] ページで、ファイルの保存場所の完全な部分とファイル名 (c:\SkypeInternalEdgeCert.cer など) を入力します。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;e. [代替 **証明書テンプレート** の指定] ページで、既定の WebServer テンプレート以外のテンプレートを使用するには、[選択した証明機関の代替証明書テンプレートを使用する] チェック **ボックスをオン** にします。 それ以外の場合は、何もしません。
    
&nbsp;&nbsp;&nbsp;f. [名前およびセキュリティの設定] ページで、次の操作を行います。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   私。 [ **分名] に**、証明書の表示名 (内部エッジなど) を入力します。
    
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ii. [ **ビットの長** さ] で、ビット長を選択します (既定値は 2048 で、高く設定してセキュリティを高くすることができますが、パフォーマンスが低下します)。
    
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  iii. エクスポート可能な証明書が必要な場合は、[証明書のプライベート キーをエクスポート可能としてマーク **する] チェック ボックスをオンにします** 。
    
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  iv. [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;g. [組織 **情報] ページ** で、組織および組織単位 (OU) の名前を入力します。 部門または部署 (IT など) を入力できます。
    
&nbsp;&nbsp;&nbsp;h. [地理 **情報] ページ** で、位置情報を入力します。
    
&nbsp;&nbsp;&nbsp;私。 [サブジェクト **名/サブジェクト代替名** ] ページでは、ウィザードによって自動的に設定されます。
    
&nbsp;&nbsp;&nbsp;j. [追加の **サブジェクト代替名の構成** ] ページで、必要なサブジェクトの別の名前を追加する必要があります。
    
&nbsp;&nbsp;&nbsp;k. [ **要求の概要]** ページで、要求の生成に使用される証明書情報を確認します。 変更が必要な場合は、今すぐ戻って行います。
    
&nbsp;&nbsp;&nbsp;l. 次に **、[次** へ] をクリックして、CA に提供する必要がある CSR ファイルを生成します ([ログの表示] をクリックして、証明書要求のログを確認できます)。
    
&nbsp;&nbsp;&nbsp;m. 要求が生成されると、[表示] をクリック **して証明書** を確認し、[完了]をクリックしてウィンドウを閉じます。 CSR ファイルの内容を CA に与え、次のセクションでこのコンピューターにインポートする証明書を生成する必要があります。
    

### <a name="4-import-the-certificate"></a>4. 証明書をインポートする

&nbsp;&nbsp;&nbsp;a. ローカルの Administrators グループのメンバーとして、最後の手順で証明書要求を行ったエッジ サーバーにログオンします。
    
&nbsp;&nbsp;&nbsp;b. 展開ウィザードで、手順 **3. の横に移動します。[証明書の要求、インストール、または割り当て**] で、[再度 **実行] をクリックします**。
    
&nbsp;&nbsp;&nbsp;c. [利用可能な **証明書のタスク] ページ** で、[証明書のインポート] **をクリックします。P7b,.pfx または .cer ファイル**。
    
&nbsp;&nbsp;&nbsp;d. [証明書の **インポート**] ページで、前のセクションで取得した証明書の完全なパスとファイル名を入力します(または、[参照] をクリックして、その方法でファイルを見つけて選択することもできます)。
    
&nbsp;&nbsp;&nbsp;e. エッジ プールの他のメンバーの証明書をインポートし、証明書にプライベート キーが含まれている場合は、証明書のプライベート キーを含む証明書ファイルを必ず選択し、パスワードを指定してください。 続行するには、**[次へ]** をクリックします。
    
&nbsp;&nbsp;&nbsp;f. [概要 **] ページで**、情報を確認したら [次へ]をクリックし、証明書が正常にインポートされると [完了] をクリックします。
    
 
### <a name="5-export-the-certificate"></a>5. 証明書をエクスポートする

&nbsp;&nbsp;&nbsp;a. 以前に証明書をインポートしたエッジ サーバーに、ローカルの Administrators グループのメンバーとしてログオン済みである必要があります。
    
&nbsp;&nbsp;&nbsp;b. [**スタート] ボタン、[****ファイル名を指定して実行]** (または [検索] を **開** く) をクリックし **、「MMC」と入力します**。
    
&nbsp;&nbsp;&nbsp;c. MMC コンソールで、[ファイル] **をクリック** し、[スナップインの追加と削除] **をクリックします**。
    
&nbsp;&nbsp;&nbsp;d. [スナップイン **の追加と削除] ボックス** で、[証明書] をクリックし、[追加] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;e. [証明書 **スナップイン] ダイアログ** ボックスで、[コンピューター アカウント] を **選択します**。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;f. [コンピューター **の選択]** ダイアログで、[ローカル コンピューター: (このコンソールを実行 **しているコンピューター) を選択します**。 **[完了]** をクリックします。 **[OK]** をクリックすると、MMC コンソールの構成が完了します。
    
&nbsp;&nbsp;&nbsp;g. 証明書 ( **ローカル コンピューター)** をダブルクリックして、証明書ストアを展開します。 [個人] を **ダブルクリックし**、[証明書] **をクリックします**。
    
  > [!NOTE]
  > この場所にいて、ローカル コンピューターの証明書個人用ストアに証明書が表示されるわけではありません。 キーがそこにない場合は、インポートされた証明書に関連付けられたプライベート キーが含まれません。 もう 1 回上記の要求とインポートの手順を試し、すべての権限が確実な場合は、CA 管理者またはプロバイダーに問い合わせてください。 
  
&nbsp;&nbsp;&nbsp;h. ローカル コンピューター **の証明書個人用ストア** で、エクスポートする証明書を右クリックします。 結果 **のメニューから [すべてのタスク** ] を選択し、[エクスポート] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;私。 **証明書のエクスポート ウィザード** で、**[次へ]** をクリックします。 [ **はい] を選択し、プライベート キーをエクスポートします**。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;j. [ファイル **形式のエクスポート]** ダイアログで、[ **個人情報の交換 - PKCS#12 (PFX)** を選択し、次の項目を選択します。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   私。 可能であれば、すべての証明書を証明書パスに含める。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ii. すべての拡張プロパティをエクスポートします。
    
   > [!NOTE]
   > **[エクスポート** が **成功した場合は、プライベート キーを削除する] を選択しない**。 つまり、証明書とプライベート キーをこのエッジ サーバーに再インポートする必要があります。
  
&nbsp;&nbsp;&nbsp;k. プライベート キーを保護するためにパスワードを割り当てる場合は、そのプライベート キーのパスワードを入力できます。 確認のためにパスワードを再入力し、[次へ] をクリック **します**。
    
&nbsp;&nbsp;&nbsp;l. ファイル拡張子 .pfx を使用して、エクスポートされた証明書のパスと **ファイル名を入力します**。 パスは、プール内の他のエッジ サーバーからアクセス可能である必要があります。または、外部メディア (USB ドライブなど) を使用してファイルを移動する必要があります。 選択 **が完了した** 場合は、[次へ] をクリックします。
    
&nbsp;&nbsp;&nbsp;m. [証明書のエクスポート ウィザードの完了] ダイアログの概要 **を** 確認し、[完了] をクリック **します**。
    
&nbsp;&nbsp;&nbsp;n. 正常なエクスポート ダイアログで **[OK]** をクリックします。
    
 
### <a name="6-assign-the-certificate"></a>6. 証明書を割り当てる

&nbsp;&nbsp;&nbsp;a. 各エッジ サーバーの展開ウィザードで、手順 **3. の横に移動します。[証明書の要求、インストール、または割り当て**] で、[再度 **実行] をクリックします**。
    
&nbsp;&nbsp;&nbsp;b. [利用可能な **証明書のタスク] ページで** 、[既存の証明書の割 **り当て] をクリックします**。
    
&nbsp;&nbsp;&nbsp;c. [証明書の **割り当て** ] ページで、一覧 **から [エッジ内部]** を選択します。
    
&nbsp;&nbsp;&nbsp;d. [ **証明書ストア] ページ** で、内部エッジ用にインポートした証明書 (前のセクションから) を選択します。
    
&nbsp;&nbsp;&nbsp;e. [証明書の **割り当ての** 概要] ページで設定を確認し、[次へ] をクリックして証明書を割り当てします。
    
&nbsp;&nbsp;&nbsp;f. ウィザードの完了ページで **[完了]** をクリックします。
    
&nbsp;&nbsp;&nbsp;g. この手順を完了したら、各エッジ サーバーで証明書 MMC スナップインを開き、証明書 (ローカル コンピューター **)** を展開し、[個人] を展開し、[証明書]をクリックして、詳細ウィンドウに内部エッジ証明書が一覧表示されるのを確認します。
    
### <a name="external-edge-interface-certificates"></a>外部エッジ インターフェイス証明書

 
### <a name="1-create-the-certificate-request"></a>1. 証明書要求を作成する

&nbsp;&nbsp;&nbsp;a. エッジ サーバーの 1 つにログオンし、展開ウィザードを起動し、手順 **3:** 証明書の要求、インストール、または割り当てで、[実行] (またはこのウィザードを既に実行している場合は再度実行) をクリックします。
    
&nbsp;&nbsp;&nbsp;b. [**利用可能な証明書タスク**] ページで、[**新しい証明書要求を作成する**] をクリックします。
    
&nbsp;&nbsp;&nbsp;c. [証明書 **要求] ページで** 、[外部 **エッジ証明書]** が選択されている必要があります。[次へ] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;d. [遅延要求 **または即時要求** ] ページで、[今すぐ要求を準備する] をクリックします **が、後で送信します**。
    
&nbsp;&nbsp;&nbsp;e. [証明書要求 **ファイル** ] ページで、ファイルの保存場所の完全な部分とファイル名 (c:\SkypeInternalEdgeCert.cer など) を入力します。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;f. [代替 **証明書テンプレート** の指定] ページで、既定の WebServer テンプレート以外のテンプレートを使用するには、[選択した証明機関の代替証明書テンプレートを使用する] チェック **ボックスをオン** にします。
    
&nbsp;&nbsp;&nbsp;g. [名前およびセキュリティの設定] ページで、次の操作を行います。
    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   私。 [ **分名] に**、証明書の表示名 (外部エッジなど) を入力します。
    
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ii. [ **ビットの長** さ] で、ビット長を選択します (既定値は 2048 で、高く設定してセキュリティを高くすることができますが、パフォーマンスが低下します)。
    
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  iii. エクスポート可能な証明書が必要な場合は、[証明書のプライベート キーをエクスポート可能としてマーク **する] チェック ボックスをオンにします** 。
    
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; iv. [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;h. [組織 **情報] ページ** で、組織および組織単位 (OU) の名前を入力します。 部門または部署 (IT など) を入力できます。
    
&nbsp;&nbsp;&nbsp;私。 [地理 **情報] ページ** で、位置情報を入力します。
    
&nbsp;&nbsp;&nbsp;j. [サブジェクト **名/サブジェクト代替名** ] ページでは、ウィザードによって必要な情報が自動的に入力されます。
    
&nbsp;&nbsp;&nbsp;k. [サブジェクト代替 **名 (SAN)** の SIP ドメイン設定] ページで、ドメイン のチェック ボックスをオンにして sip を追加します。<sipdomain> エントリを追加します。
    
&nbsp;&nbsp;&nbsp;l. [追加の **サブジェクト代替名の構成** ] ページで、必要なサブジェクトの別の名前を追加する必要があります。
    
&nbsp;&nbsp;&nbsp;m. [ **要求の概要]** ページで、要求の生成に使用される証明書情報を確認します。 変更が必要な場合は、今すぐ戻って行います。
    
&nbsp;&nbsp;&nbsp;n. 準備ができたら、[次へ]をクリックして、CA に提供する必要がある CSR ファイルを生成します ([ログの表示] をクリックして、証明書要求のログを確認できます)。 
    
&nbsp;&nbsp;&nbsp;o. 要求が生成されると、[表示] をクリック **して証明書** を確認し、[完了]をクリックしてウィンドウを閉じます。 CSR ファイルの内容を CA に与え、次のセクションでこのコンピューターにインポートする証明書を生成する必要があります。
    
&nbsp;&nbsp;&nbsp;p. (省略可能)CSR の内容を提出するときに、次のように特定の情報を求められる場合があります (AS は大きく異なるので、これは必要ない場合があります)。
    
  - **サーバー** プラットフォームとしての Microsoft
    
  - **バージョン** としての IIS
    
  - **利用状況の種類** としての Web サーバー
    
  - **応答形式としての PKCS7**
    
 
### <a name="2-import-the-certificate"></a>2. 証明書をインポートする

&nbsp;&nbsp;&nbsp;a. ローカルの Administrators グループのメンバーとして、最後の手順で証明書要求を行ったエッジ サーバーにログオンします。
    
&nbsp;&nbsp;&nbsp;b. 展開ウィザードで、手順 **3. の横に移動します。[証明書の要求、インストール、または割り当て**] で、[再度 **実行] をクリックします**。
    
&nbsp;&nbsp;&nbsp;c. [利用可能な **証明書のタスク] ページ** で、[証明書のインポート] **をクリックします。P7b,.pfx または .cer ファイル**。
    
&nbsp;&nbsp;&nbsp;d. [証明書の **インポート**] ページで、前のセクションで取得した証明書の完全なパスとファイル名を入力します(または、[参照] をクリックして、その方法でファイルを見つけて選択することもできます)。 証明書にプライベート キーが含まれている場合は、[証明書ファイルに証明書のプライベート キーが含まれている] を選択し、そのプライベート キーのパスワードを入力します。 準備ができたら **、[次へ** ] をクリックします。
    
&nbsp;&nbsp;&nbsp;e. [証明書 **の概要のインポート** ] ページで、概要情報を確認し、[次へ] をクリック **します**。
    
&nbsp;&nbsp;&nbsp;f. [ **実行中のコマンド] ページ** で、[ログの表示] をクリックすると、インポートの完了時に結果 **を確認できます**。 [ **完了]** をクリックして証明書のインポートを完了します。
    
&nbsp;&nbsp;&nbsp;g. プール内に他のエッジ サーバーがある場合は、次の 2 つの手順にも従う必要があります。 これがスタンドアロンエッジ サーバーの場合は、外部証明書を使用できます。
    
 
### <a name="3-export-the-certificate"></a>3. 証明書をエクスポートする

&nbsp;&nbsp;&nbsp;a. 証明書をインポートしたエッジ サーバーにローカル管理者としてログオン済みである必要があります。
    
&nbsp;&nbsp;&nbsp;b. [**スタート] ボタン、[****ファイル名を指定して実行]** (または [検索] を **開** く) をクリックし **、「MMC」と入力します**。
    
&nbsp;&nbsp;&nbsp;c. MMC コンソールで、[ファイル] **をクリック** し、[スナップインの追加と削除] **をクリックします**。
    
&nbsp;&nbsp;&nbsp;d. [スナップイン **の追加と削除] ボックス** で、[証明書] をクリックし、[追加] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;e. [証明書 **スナップイン] ダイアログ** ボックスで、[コンピューター アカウント] を **選択します**。 [**次へ**] をクリックします。
    
&nbsp;&nbsp;&nbsp;f. [コンピューター **の選択]** ダイアログで、[ローカル コンピューター: (このコンソールを実行 **しているコンピューター) を選択します**。 **[完了]** をクリックします。 **[OK]** をクリックすると、MMC コンソールの構成が完了します。
    
&nbsp;&nbsp;&nbsp;g. 証明書 ( **ローカル コンピューター)** をダブルクリックして、証明書ストアを展開します。 **[個人] をダブルクリックし**、[証明書] **をクリックします**。
    
   > [!NOTE]
   > この場所にいて、ローカル コンピューターの証明書個人用ストアに証明書が表示されるわけではありません。 キーがそこにない場合は、インポートされた証明書に関連付けられたプライベート キーが含まれません。 もう 1 回上記の要求とインポートの手順を試し、すべての権限が確実な場合は、CA 管理者またはプロバイダーに問い合わせてください。 
  
&nbsp;&nbsp;&nbsp;h. ローカル コンピューター **の証明書個人用ストア** で、エクスポートする証明書を右クリックします。 **結果のメニューから [すべてのタスク** ] を選択し、[エクスポート] を **クリックします**。
    
&nbsp;&nbsp;&nbsp;私。 **証明書のエクスポート ウィザード** で、**[次へ]** をクリックします。 [ **はい] を選択し、プライベート キーをエクスポートします**。 [**次へ**] をクリックします。
    
   > [!NOTE]
   > [ **はい] の場合** は、プライベート キーをエクスポートできません。この証明書のプライベート キーは、取得前にエクスポートのマークが付けられませんでした。 これを正常に行う前に、エクスポートするプライベート キーを設定して、プロバイダーにもう一度証明書を要求する必要があります。
  
&nbsp;&nbsp;&nbsp;j. [ファイル形式のエクスポート] ダイアログで、[個人情報の交換 - PKCS#12 (PFX) を選択し、次の項目を選択します。
    
 &nbsp;&nbsp;&nbsp;  私。 可能であれば、すべての証明書を証明書パスに含める。
    
 &nbsp;&nbsp;&nbsp;  ii. すべての拡張プロパティをエクスポートします。
    
   > [!NOTE]
   > **[エクスポート** が **成功した場合は、プライベート キーを削除する] を選択しない**。 つまり、証明書とプライベート キーをこのエッジ サーバーに再インポートする必要があります。
  
&nbsp;&nbsp;&nbsp;k. プライベート キーを保護するためにパスワードを割り当てる場合は、そのプライベート キーのパスワードを入力できます。 確認のためにパスワードを再入力し、[次へ] をクリック **します**。
    
&nbsp;&nbsp;&nbsp;l. ファイル拡張子 .pfx を使用して、エクスポートされた証明書のパスと **ファイル名を入力します**。 パスは、プール内の他のエッジ サーバーからアクセス可能である必要があります。または、外部メディア (USB ドライブなど) を使用してファイルを移動する必要があります。 選択 **が完了した** 場合は、[次へ] をクリックします。
    
&nbsp;&nbsp;&nbsp;m. [証明書のエクスポート ウィザードの完了] ダイアログの概要 **を** 確認し、[完了] をクリック **します**。
    
&nbsp;&nbsp;&nbsp;n. 正常なエクスポート ダイアログで **[OK]** をクリックします。
    
&nbsp;&nbsp;&nbsp;o. この前に[証明書のインポート] セクションに戻り、残りのすべてのエッジ サーバーに証明書をインポートし、以下の割り当てに進む必要があります。
    
 
### <a name="4-assign-the-certificate"></a>4. 証明書を割り当てる

&nbsp;&nbsp;&nbsp;a. 各 **エッジ** サーバーの展開ウィザードで、手順 **3. の横にあります。[証明書の要求、インストール、または割り当て**] で、[再度 **実行] をクリックします**。
    
&nbsp;&nbsp;&nbsp;b. [利用可能な **証明書のタスク] ページで** 、[既存の証明書の割 **り当て] をクリックします**。
    
&nbsp;&nbsp;&nbsp;c. [証明書の **割り当て** ] ページで、一覧 **から [エッジ外部** ] を選択します。
    
&nbsp;&nbsp;&nbsp;d. [ **証明書ストア] ページ** で、外部エッジ用にインポートした証明書 (前のセクションから) を選択します。
    
&nbsp;&nbsp;&nbsp;e. [証明書の **割り当ての** 概要] ページで設定を確認し、[次へ] をクリックして証明書を割り当てします。
    
&nbsp;&nbsp;&nbsp;f. ウィザードの完了ページで **[完了]** をクリックします。
    
&nbsp;&nbsp;&nbsp;g. この手順を完了したら、各サーバーで証明書 MMC スナップインを開き、証明書 (ローカル コンピューター **)** を展開し、[個人] を展開し、[証明書]をクリックして、詳細ウィンドウに内部エッジ証明書が表示されるのを確認します。
    
   > [!NOTE]
   > また、リバース プロキシ サーバーの証明書を設定する必要があります。 
  
## <a name="starting-the-edge-servers"></a>エッジ サーバーの起動

セットアップが完了したら、展開内の各エッジ サーバーでサービスを開始する必要があります。
  
1. 各エッジ サーバーの展開ウィザードで、[手順 **4:** サービスの開始] の横にある [実行] をクリック **します**。
    
2. [Skype **for Business Server サービスの** 開始] ページで、サービスの一覧を確認し、[次へ] をクリックしてサービスを開始します。
    
3. サービスが開始したら、[完了] をクリック **して** ウィザードを閉じます。
    
4. (省略可能)[手順 **4: サービスの開始] で、[サービスの状態]****をクリックします**。
    
5.  各サーバー **のサービス MMC** で、すべての Skype for Business Server サービスが実行されているのを確認します。
    

