---
title: フロントエンド プールの高可用性と管理
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 965041b7-3136-49f2-89c1-8b30417cb8ea
description: プール、クォーラムの損失、および 2 つのフロント エンド サーバーとプールの特別な手順の管理を含むビジネス サーバーは、Skype でのフロント エンド プールの管理について説明します。
ms.openlocfilehash: bab9d4b40132665719a1e9d019b8f34e2d96622d
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/11/2019
ms.locfileid: "33910229"
---
# <a name="front-end-pool-high-availability-and-management"></a>フロントエンド プールの高可用性と管理
 
プール、クォーラムの損失、および 2 つのフロント エンド サーバーとプールの特別な手順の管理を含むビジネス サーバーは、Skype でのフロント エンド プールの管理について説明します。
  
ビジネス サーバーの Skype は、フロント エンド プールのアーキテクチャは、プール内に 3 つのフロント エンド サーバー上に保存する各ユーザーのデータを分散システムのモデルを使用します。 すべてのエンタープライズ エディションのフロント エンド プールに少なくとも 3 つのフロント エンド サーバーが含まれていることをお勧めします。 
  
## <a name="planning-for-the-management-of-front-end-pools"></a>フロント エンド プール管理の計画

 Skype ビジネス サーバーは、Windows のファブリックに基づく分散システムのモデルを使用します。 このモデルでは、各ユーザーと会議の重要なデータはフロント エンド プール内の次の 3 つのフロント エンド サーバーに格納されます。 データの特定のセットを格納するこれら 3 つのサーバーは、calledreplicas です。
  
モデルでは、分散のフロント エンド プール、プールのサーバーの特定の番号をプールの機能を実行しなければなりません。 プールの 2 つの損失モードがあります。
  
- クォーラムの損失のグループ レベルのルーティングは、十分な特定のルーティング グループのレプリカ ・ サーバによって発生します。 ルーティング グループは、一連のユーザーのホーム プールにします。 各ルーティング グループが、プールの 3 つのレプリカ: 1 つのプライマリ レプリカとセカンダリの 2 つのレプリカです。
    
- プール レベル クォーラム損失。プールで十分な数のシード サーバーが実行されていない場合に発生します。 
    
### <a name="routing-group-level-quorum-loss"></a>ルーティング グループ レベル クォーラム損失

新しいフロント エンド プールを初めて起動するときには、次の表に示すように、サーバーの 85% が実行されていることが必要です。実行されているサーバーの数がそれより少ないと、サービスが起動状態で行き詰まり、プールが起動されないことがあります。
  
|プール内のサーバーの合計数  <br/> |プールを初めて起動させるために実行する必要があるサーバー数  <br/> |
|:-----|:-----|
|2  <br/> |1  <br/> |
|3  <br/> |3  <br/> |
|4  <br/> |3  <br/> |
|5  <br/> |4  <br/> |
|6  <br/> |5  <br/> |
|7  <br/> |5  <br/> |
|8  <br/> |6  <br/> |
|9  <br/> |7  <br/> |
|10  <br/> |8  <br/> |
|11  <br/> |9  <br/> |
|12  <br/> |10  <br/> |
   
その後もプールが起動されるたびに、サーバーの 85% が起動されている必要があります (前出の表を参照)。 数のサーバを起動できません (ただし、プールレベルのクォーラムが失われるように、十分なサーバーを開始することができます) を使って、`Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery`このルーティング グループ レベルのクォーラムの損失から回復し、進行状況を確認するのには、プールを有効にするコマンドレットです。 このコマンドレットを使用する方法の詳細についてを参照してください<link Reset-CsPoolRegistrarState>。
  
> [!NOTE]
> サーバー数が偶数のプールの場合、Skype for Business Server は監視にプライマリ SQL データベースを使います。 このようなプールでは、プライマリ データベースをシャットダウンしてミラー データベースに切り替え、前述の表の必要な実行数に足りなくなるまでフロント エンド サーバーをシャットダウンすると、プール全体がダウンします。 詳細については、[データベース ミラーリングの監視](https://go.microsoft.com/fwlink/?LinkId=393672)を参照してください。 
  
#### <a name="pool-level-quorum-loss"></a>プール レベル クォーラム損失

すべての機能をフロント エンド プール、プール レベルのクォーラムが失われるは指定できません。 実行中のサーバーの数が次の表に示す機能レベルを下回ると、プールに属する残りのサーバーがすべての Skype for Business Server サービスを停止します。 次の表の数値が、プールのバック エンド サーバーが実行されていることを想定して ことに注意してください。
  
|プール内のフロント エンド サーバーの合計数  <br/> |プールを機能させるために実行する必要があるサーバーの数  <br/> |
|:-----|:-----|
|2  <br/> |1  <br/> |
|3 ～ 4  <br/> |任意の 2 台  <br/> |
|5 ～ 6  <br/> |任意の 3 台  <br/> |
|7  <br/> |任意の 4 台  <br/> |
|8 ～ 9  <br/> |最初の 7 台のうちの任意の 4 台  <br/> |
|10 ～ 12  <br/> |最初の 9 台のうちの任意の 5 台  <br/> |
   
上記の表には、「最初のサーバー」が国々 を最初に、日付順、プールが最初に起動された場合サーバーです。 これらのサーバーを特定するには、使用することができます、`Get-CsComputer`コマンドレットで、` -PoolFqdn`オプションです。 このコマンドレットはサーバーをトポロジ内に出現した順に表示するので、そのリストの先頭にある方が最初のサーバーです。
  
#### <a name="additional-steps-to-ensure-pools-are-functional"></a>プールが機能していることを確認するための追加手順

フロント エンド プールを確実に機能させておくために、他にもいくつかの要因を監視する必要があります。
  
- 最初にユーザーをプールに移動するときに必ず少なくとも 3 つのフロント エンド サーバーを実行しています。
    
- 障害復旧の目的でこのプールと別のプールの間にペアの関係を確立する場合は、データをバックアップ プールと正しく同期するために、関係を確立した後で、このプールの 3 台のフロントエンド サーバーがどこかのタイミングで同時に実行されることを確認する必要があります。 プールの組み合わせと災害復旧の機能の詳細については、[高可用性とビジネスのサーバー用の Skype での災害復旧の計画](high-availability-and-disaster-recovery.md)を参照してください。 
    
## <a name="front-end-pool-with-two-front-end-servers"></a>フロントエンド サーバーが 2 台のフロントエンド プール

2 つのフロント エンド サーバーが含まれるフロント エンド プールの展開はお勧めしません。 このような小規模なプールでは、大規模なプールのように堅牢な高可用性は実現できないので、管理に余計な配慮が必要になります。 さらに、2 台のサーバー プールのバック エンド サーバーが停止した場合全体のプール自体ことになるでしょうすぐにもします。 Skype を実行して、ビジネスのサーバーの 1 つか 2 つのサーバーを展開するには、Standard Edition サーバーとして展開することをお勧めします。
  
2 つのフロント エンド サーバー プールを展開する必要が場合は、これらのガイドラインに従います。
  
- 2 つのフロント エンド サーバーのいずれかがダウンした場合に障害が発生したサーバーをバックアップすることができ、すぐにしてください。 同様に、2 台のサーバーのうち 1 台をアップグレードする必要がある場合は、アップグレードが終わり次第、オンラインにします。
    
- 何らかの理由で両方のサーバーを同時に停止する必要がある場合は、プールのダウンタイムが終わったら次のことをします。
    
  - 同時に両方のフロント エンド サーバーを再起動することをお勧めします。 
    
  - 2 台のサーバーを同時に再起動できない場合は、停止した順序とは逆の順序で復旧する必要があります。
    
  - できない場合にバックアップを作成順に、バックアップのプールを導入する前に次のコマンドレットを使用します。`Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery -PoolFQDN <FQDN>`
    
## <a name="front-end-pool-configuration-failures-and-changes"></a>フロント エンド プール構成のエラーと変更

フロント エンド サーバーが故障し、数日以内に交換できそうにない場合は、そのサーバーをトポロジから削除します。再び使用できるようになったときに、新しいフロント エンド サーバーをトポロジに追加します。
  
サーバーの追加や削除など、フロント エンド プールの構成を変更するたびに、次のガイドラインに従う必要があります。
  
- 新しいトポロジが公開された後で、プール内の各フロント エンド サーバーを再起動する必要があります。1 台ずつ再起動してください。
    
- プール全体が構成の変更中にダウンしていた場合、は、新しいトポロジを公開した後、次のコマンドレットを実行します。`Reset-CsPoolRegistrarState -PoolFQDN <PoolFQDN> -ResetType ServiceReset`
    

