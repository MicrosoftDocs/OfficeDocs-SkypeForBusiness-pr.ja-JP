---
title: Skype for Business Server での監視の計画
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.assetid: 5d5eb658-7fe0-42e6-acaf-700051d0a823
description: '概要: Skype for Business Server で監視サービスを計画する場合は、このトピックを確認してください。'
ms.openlocfilehash: 0fce6f3a47c7b1b76bfb12dcfca8b3bb222f8c80
ms.sourcegitcommit: 01087be29daa3abce7d3b03a55ba5ef8db4ca161
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/23/2021
ms.locfileid: "51116045"
---
# <a name="plan-for-monitoring-in-skype-for-business-server"></a>Skype for Business Server での監視の計画

**概要:** Skype for Business Server で監視サービスを計画する場合は、このトピックを確認してください。

Skype for Business Server の監視サービスは、管理者が組織で行う通信セッションの使用状況と品質データを収集する方法を提供します。これにより、傾向や問題を特定できます。 展開を継続的に監視することで、早期に問題をキャッチし、組織のユーザーを満足のいく状態に保ちます。

Skype for Business Server での監視では、別のサーバーの役割は必要とされません (以前の Lync バージョンの場合と同様)。代わりに、監視サービスは各フロントエンド サーバーに組み込されます。 Skype for Business Server では、既定では監視が有効になっていません。 この記事では、Skype for Business Server の初期構成中または後に監視を有効にするかどうかを決定し、監視アクティビティをサポートするために必要SQLリソースを特定するのに役立ちます。 監視対象または監視されていない情報が正確に不明な場合は、「監視に関する基本」を [参照してください](monitoring.md#Basics)。 計画プロセスを開始するには、「監視の [要件を定義する」に移動します](monitoring.md#requirements)。 監視の要件の詳細SQL、監視の要件SQL [を参照してください](monitoring.md#topologies)。

## <a name="basics-about-monitoring"></a>監視の基本
<a name="Basics"> </a>

セッションは、ユーザーの次の接続の総称です。

- 会議

- 音声/ビデオやアプリケーション共有などの会議ツール

- インスタント メッセージングや音声通話などのピアツーピア会話を介した別のユーザー

> [!NOTE]
> Skype for Business Server は、各セッションに関する情報 (誰が誰を呼び出したのか) を追跡します。セッションで使用されたエンドポイント。セッションが最後に行った期間。セッションの知覚された品質は何でした。などなど。 Skype for Business Server は、実際の呼び出し自体を記録および保存しません。 これには、インスタント メッセージング セッションが含まれます。Skype for Business Server はインスタント メッセージング セッションに関する情報を記録しますが、セッション中に送信された各インスタント メッセージのレコードを保持しません。

Skype for Business Server で各セッションで収集される基本的な通話詳細情報は、次の目的で使用できます。

- **投資収益率 (ROI)** 分析。 管理者は、コスト削減を示し、Skype for Business Server の展開を正当化するために、以前のテレフォニー システムで収集された同様のデータと使用状況データを比較できます。

- **デバイス インベントリ管理**。 資産管理情報を使用すると、管理者は、交換が必要な古いデバイスを識別し、未使用または未使用の高価なデバイスを識別できます。

- **ヘルプ デスク**。 データのトラブルシューティングは、サーバーまたはクライアント側のログを収集することなく、ユーザーの呼び出しが失敗した理由をサポート エンジニアが判断するのに役立ちます。 この情報は、Skype for Business クライアントと Skype for Business Server に関する深い技術的知識を持っていないサポート担当者が容易にアクセスして理解できます。

- **システム トラブルシューティング**。管理者は、エンド ユーザーが会議への参加、通話の確立、インスタント メッセージの送信などの基本的なタスクを実行できなくなる主な問題を検出できます。

監視では、SIP エンドポイント (Skype for Business など) が、管理者が以下にアクセスできないトラブルシューティング情報を提供するメカニズムも提供します。

- **品質に影響を与えるメディア メトリック**。 これらの指標は、通話自体の実際の送信を扱います。ネットワーク全体の通話の旅として、一種の旅行を提供します。 これらのメトリック (パケット損失、ジッター、ラウンド トリップ時間など) は、1 人のユーザーのエンドポイントを離れた時点から相手のエンドポイントに到着した時点まで、通話に何が起こったかについての情報を提供します。

- **エンド ユーザーにレポートされる問題**。 これらの指標には、マイクから遠すぎる場合、ソフトに話し過ぎた場合、ネットワーク接続が悪い場合、またはコンピューター上の別のプログラムが利用可能なリソースを消費しているという理由で品質が低下している場合に、Skype for Business がエンド ユーザーに提示する品質の低い通知が含まれます。

- **環境情報**。これらの指標は、使用されているマイクとスピーカーの種類、ユーザーが VPN 接続経由で接続しているかどうか、ユーザーがワイヤレスで接続しているかどうかなど、通話品質要因の詳細を示します。

各呼び出しの最後に、SIP 準拠のエンドポイントは、この情報を呼び出しを容易にしたフロントエンド サーバーに送信します。 その情報を送信するためにエンドポイントを取得するために何もする必要はありません。その動作は SIP プロトコルに組み込む必要があります。 ただし、その情報を収集して保存する場合は、監視をインストールして有効にする必要があります。 監視をインストールして有効にした場合、通話情報はフロントエンド サーバー上で実行されているエージェントによって収集され、2 つのデータベースにSQL Serverされます。 監視サービス ("統合データ収集エージェント" の形式) は、すべてのフロントエンド サーバーに統合されます。

## <a name="define-your-requirements-for-monitoring"></a>監視の要件を定義する
<a name="requirements"> </a>

Skype for Business Server での監視のインストールと構成を開始する前に、いくつかの重要な問題に対処する必要があります。

 **監視をインストールする場合** 監視は、Skype for Business Server のインストールと構成と同時にインストールおよび構成できます。Skype for Business Server 展開ウィザードを使用すると、セットアップ中にフロントエンド プールを監視データベースに関連付ける機会が提供されます。 または、Skype for Business Server 自体がインストールされた後に監視をインストールすることもできます。これは、トポロジ ビルダーを使用してフロントエンド プールとサーバーを監視データベースに関連付け、修正されたトポロジを公開することで実行できます。

監視を展開および構成SQL Server前に、インストールおよび構成する必要があります。 ただし、展開する必要があるのはSQL Serverのみです。Skype for Business Server トポロジを発行すると、監視データベースが作成されます。

 **監視するデータの種類** Skype for Business Server では、通話の詳細記録 (CDR) データと QoE (Quality of Experience) データの 2 種類の一般的なデータを監視できます。 通話の詳細記録は、VoIP (Voice over IP) 電話などの Skype for Business Server 機能の使用状況を追跡する方法を提供します。インスタント メッセージング (IM)。ファイル転送。音声/ビデオ (音声ビデオ) 会議。およびアプリケーション共有セッション。 この情報は、使用されている Skype for Business Server の機能 (および使用されていない Skype) を知るのに役立ち、これらの機能がいつ使用されるのかについての情報も提供します。 Quality of Experience データを使用すると、失われたネットワーク パケットの数、バックグラウンド ノイズ、ジッターの量 (パケット遅延の違い) など、組織内で行われた音声通話とビデオ通話の品質の記録を維持できます。

Skype for Business Server で監視を有効にした場合は、CDR 監視と QoE 監視の両方を有効にするか、もう一方の種類を無効にした状態で 1 種類の監視を有効にすることもできます。 たとえば、ユーザーがインスタント メッセージングとファイル転送だけを使用し、音声またはビデオ通話を行わないとします。 この場合、QoE 監視を有効にする意味はほとんどありません。 同様に、Skype for Business Server を使用すると、監視の展開後に監視を簡単に有効または無効にできます。 たとえば、監視を展開するが、最初は QoE 監視を無効にする場合があります。 ユーザーが音声またはビデオ通話の問題に遭遇し始めた場合は、QoE 監視を有効にし、そのデータを使用してトラブルシューティングとそれらの問題の解決を行います。

Skype for Business Server をインストールすると同時に監視をインストールする場合と、Skype for Business Server のインストール後に監視をインストールする場合には、特に利点 (または欠点) はありません。 注意する必用がある点は、監視をインストールする前に、バックエンドの監視ストアをホストするコンピューターを選択し、そのコンピューターを監視に使用する前に、サポートされているバージョンの SQL Server をそのコンピューターにインストールして構成する必用があるということです。 コンピューターにSQL Serverインストール済みで、そのコンピューターを使用する準備ができている場合は、Skype for Business Server をインストールすると同時に監視をインストールできます。 バックエンド コンピューターの準備ができていない場合は、Skype for Business Server のインストールに進み、バックエンド コンピューターが使用できる状態である場合は常に監視をインストールできます。

 **必要なバックエンド監視データベースの数** 監視とアーカイブの両方のデータベースが 240,000 Skype for Business Server ユーザーをサポートできると推定されました)。 さらに、1 つの監視データベースを複数のフロントエンド プールで使用できます。組織内に 3 つのフロントエンド プールがある場合は、これらの 3 つのプールすべてを同じバックエンド ストアに関連付けできます。

多くの組織では、必要なバックエンド監視データベースの数を決定する際に、データベース容量が決め手ではありません。 代わりに、より重要な考慮事項は、ネットワーク速度である可能性があります。 フロント エンド プールが 3 つあるとしますが、そのうちの 1 つは低速のネットワーク接続にまたがっています。 その場合は、2 つの監視データベースを使用する必要があります。1 つのデータベースは、ネットワーク接続が良好な 2 つのプールにサービスを提供し、別のデータベースを使用して、低速のネットワーク接続でプールにサービスを提供します。

また、Skype for Business Server がミラー データベースの使用をサポートしている場合も考慮する必要があります。 「データベース ミラーリング」を使用すると、データベースの 2 つのコピーを、それぞれ別のサーバー上で同時に保持することができます。 データがプライマリ データベースに書き込まれるたびに、同じデータがミラー データベースに書き込まれます。 プライマリ データベースが失敗したり、使用できなくなったりする場合は、単純な Skype for Business Server PowerShell コマンドを使用してミラー データベースに "フェール オーバー" できます。 次に例を示します。

```PowerShell
Invoke-CsDatabaseFailover -PoolFqdn atl-cs-001.litwareinc.com -DatabaseType "Monitoring" -NewPrincipal "Mirror"
```

これが重要なのは、ミラーリングでは、必要なデータベースの数が 2 倍になるからです。

 **Skype for Business Server サイトには、独自のカスタム監視構成が必要ですか?** Skype for Business Server をインストールする場合は、CDR および QoE 構成設定のグローバル コレクションもインストールします。これらのグローバル コレクションを使用すると、組織全体に同じ CDR および QoE 設定を適用できます。 多くの場合、これは十分です。多くの場合、すべてのユーザーに対して CDR 監視を有効にする必要があります。

ただし、異なるサイトに異なる設定を適用する場合があります。 たとえば、レドモンド サイトで CDR と QoE の両方の監視を使用する場合がありますが、ダブリン サイトでは CDR 監視のみを使用します。 同様に、Redmond サイトで監視データを 60 日間保持する必要がありますが、この種類のデータはダブリン サイトで 30 日間だけ維持する必要があります。 Skype for Business Server では、サイト スコープで CDR および QoE 構成設定の個別のコレクションを作成できます。これにより、各サイトを異なる方法で管理できます。 (これには、監視の有効化と無効化の両方と、データの保持期間などの管理設定の構成が含まれます。

監視を展開する前、または監視を展開した後、これを決定できることに注意してください。たとえば、監視を展開してから、グローバル設定を使用して組織全体を管理できます。後で変更する場合には、たとえば、Redmond サイト用の設定の別個のコレクションを作成し、これらの設定を使用して Redmond 用の監視を管理します (サイト スコープに適用された設定は、グローバル スコープに適用された設定よりも常に優先されます)。再び変更する場合は、Redmond サイトに適用された構成設定を単に削除します。サイト設定のコレクションを削除すると、設定のグローバル コレクションがそのサイトに自動的に適用されます。

## <a name="sql-requirements-for-monitoring"></a>SQLの要件
<a name="topologies"> </a>

監視を有効にすると、統合データ収集エージェントが各フロントエンド サーバーに自動的にインストールされ、アクティブ化されます。 サポートされているバージョンの SQL Serverその他の詳細については[、「Skype for Business Server 2015](requirements-for-your-environment/server-requirements.md)のサーバー要件」を参照してください。

監視データは、他の種類SQL Serverインスタンスを共有できます。 通常、通話詳細記録データベース (LcsCdr) と Quality of Experience データベース (QoEMetrics) は、インスタンスと同じSQLします。また、2 つの監視データベースがアーカイブ データベース (LcsLog) SQL同じインスタンスに含まれます。 SQL Serverインスタンスの唯一の実際の要件は、SQL Serverのインスタンスが次に制限される場合です。

- Skype for Business Server 2015 バックエンド データベースの 1 つのインスタンス。 (一般的なルールとして、監視データベースをバックエンド データベースと同じ SQL インスタンス、または同じコンピューターに同じコンピューターに統合する方法は推奨されません。 技術的には可能ですが、バックエンド データベースに必要なディスク領域を使い切って監視データベースのリスクを実行します。

- 通話詳細記録データベースの 1 つのインスタンス。

- Quality of Experience データベースの 1 つのインスタンス。

- アーカイブ データベースの 1 つのインスタンス。

つまり、同じインスタンスの LcsCdr データベースに 2 つのインスタンスSQL Server。 LcsCdr データベースの複数のインスタンスが必要な場合は、複数のインスタンスを構成する必要SQL Server。

## <a name="see-also"></a>関連項目


[監視の展開](/previous-versions/office/lync-server-2013/lync-server-2013-deploying-monitoring)