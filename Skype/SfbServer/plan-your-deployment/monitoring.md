---
title: Skype for Business Server での監視の計画
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.assetid: 5d5eb658-7fe0-42e6-acaf-700051d0a823
description: '概要: Skype for Business Server で監視サービスを計画する場合は、このトピックを確認してください。'
ms.openlocfilehash: b2f269d3e4cc62ca08ee423858e13d12b23bddd1
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/12/2021
ms.locfileid: "49825627"
---
# <a name="plan-for-monitoring-in-skype-for-business-server"></a>Skype for Business Server での監視の計画

**概要:** Skype for Business Server で監視サービスを計画する場合は、このトピックを確認してください。

Skype for Business Server の監視サービスは、管理者が組織で行う通信セッションの使用状況と品質のデータを収集する方法を提供します。これにより、管理者は傾向と問題を特定できます。 展開を継続的に監視することで、問題を早期に発見し、組織のユーザーの満足を維持できます。

Skype for Business Server での監視には、個別のサーバーの役割は必要とされません (以前のバージョンの Lync の場合と同様)。代わりに、監視サービスが各フロントエンド サーバーに組み込されます。 Skype for Business Server では、監視は既定では有効になっていません。 この記事は、Skype for Business Server の初期構成中または後に監視を有効にするかどうか、および監視アクティビティをサポートするために必要な SQL リソースを決定するのに役立ちます。 監視対象と監視方法が正確に不明な場合は、「監視に関する基本」に [アクセスしてください](monitoring.md#Basics)。 計画プロセスを開始するには、「監視の要件 [を定義する」を参照してください](monitoring.md#requirements)。 監視の要件の詳細SQL、監視のSQL [を参照してください](monitoring.md#topologies)。

## <a name="basics-about-monitoring"></a>監視の基本
<a name="Basics"> </a>

セッションは、ユーザーが次の接続に接続する一般的な用語です。

- Conference

- 音声ビデオ、アプリケーション共有などの会議ツール

- インスタント メッセージングや音声通話などのピアツーピア会話を介した別のユーザー

> [!NOTE]
> Skype for Business Server は、各セッションに関する情報 (誰が誰に電話したのか) を追跡します。セッションで使用されたエンドポイントセッションの最後の期間。セッションの品質が認識されたのは何か。などなど。 Skype for Business Server は、実際の通話自体を記録および保存しません。 これには、インスタント メッセージング セッションが含まれます。Skype for Business Server はインスタント メッセージング セッションに関する情報を記録しますが、セッション中に送信された各インスタント メッセージの記録は保持しません。

Skype for Business Server によってセッションごとに収集される基本的な通話の詳細情報は、次の目的で使用できます。

- **投資収益率 (ROI)** 分析。 管理者は、コスト削減を示し、Skype for Business Server の展開を正当化するために、使用状況データを以前のテレフォニー システム用に収集された類似のデータと比較できます。

- **デバイス インベントリ管理**。 アセット管理情報は、管理者が交換が必要な古いデバイスを識別し、未使用または未使用の高価なデバイスを特定するのに役立ちます。

- **ヘルプ デスク**。 トラブルシューティング データは、サーバー側またはクライアント側のログを収集することなく、サポート エンジニアがユーザーの呼び出しが失敗した理由を判断するのに役立ちます。 この情報は、Skype for Business クライアントと Skype for Business Server に関する詳細な技術的知識を持っていないサポート担当者が容易にアクセスして理解できます。

- **システム トラブルシューティング**。管理者は、エンド ユーザーが会議への参加、通話の確立、インスタント メッセージの送信などの基本的なタスクを実行できなくなる主な問題を検出できます。

監視には、管理者がアクセスできないトラブルシューティング情報を SIP エンドポイント (Skype for Business など) が提供できるメカニズムも用意されています。

- **品質に影響を与えるメディア 指標**。 これらの指標は、通話自体の実際の転送を扱います。ネットワークをまたがって通話を行う場合に、一種のトラベローグを提供します。 これらの指標 (パケット損失、ジッター、ラウンド トリップ時間など) は、一方のユーザーのエンドポイントから相手のエンドポイントに到着した時点まで、通話に何が起こったかについての情報を提供します。

- **エンド ユーザーにレポートされる問題**。 これらの指標には、コンピューター上の別のプログラムが利用可能なリソースを消費しているという理由で、マイクから遠すぎる、声が弱すぎる、ネットワーク接続が悪い、品質が低いなどの場合に、Skype for Business がエンド ユーザーに提示する低品質の通知が含まれます。

- **環境情報**。これらの指標は、使用されているマイクとスピーカーの種類、ユーザーが VPN 接続経由で接続しているかどうか、ユーザーがワイヤレスで接続しているかどうかなど、通話品質要因の詳細を示します。

各呼び出しの最後に、SIP 準拠のエンドポイントは、この情報を、呼び出しを容易にしたフロントエンド サーバーに送信します。 エンドポイントを取得してその情報を送信するために何もする必要はありません。この動作は SIP プロトコルに組み込んでおく必要があります。 ただし、その情報を収集して保存する場合は、監視をインストールして有効にする必要があります。 監視をインストールして有効にした場合、通話情報はフロントエンド サーバー上で実行されているエージェントによって収集され、2 つのサーバー データベースにSQL Serverされます。 監視サービス ("統合データ収集エージェント" の形式) は、すべてのフロントエンド サーバーに一元的に展開されます。

## <a name="define-your-requirements-for-monitoring"></a>監視の要件を定義する
<a name="requirements"> </a>

Skype for Business Server での監視のインストールと構成を開始する前に、いくつかの重要な問題に対処する必要があります。

 **監視をインストールする場合** 監視は、Skype for Business Server のインストールと構成と同時にインストールおよび構成できます。Skype for Business Server 展開ウィザードを使用すると、セットアップ中にフロントエンド プールを監視データベースに関連付ける機会が提供されます。 または、Skype for Business Server 自体のインストール後に監視をインストールすることもできます。これを行う場合は、トポロジ ビルダーを使用してフロントエンド プールとサーバーを監視データベースに関連付け、変更したトポロジを公開します。

監視を展開および構成SQL Server前にインストールおよび構成する必要があります。 ただし、展開する必要SQL Server必要があります。Skype for Business Server トポロジを公開すると、監視データベースが自動的に作成されます。

 **監視するデータの種類** Skype for Business Server では、通話詳細記録 (CDR) データと QoE (Quality of Experience) データの 2 種類の一般的なデータを監視できます。 通話詳細記録は、ボイス オーバー IP (VoIP) 通話などの Skype for Business Server 機能の使用状況を追跡する方法を提供します。インスタント メッセージング (IM)ファイル転送音声ビデオ (A/V) 会議およびアプリケーション共有セッション。 この情報は、使用されている Skype for Business Server の機能 (および使用されていない機能) を確認するのに役立ち、これらの機能がいつ使用されるのかについての情報も提供します。 Quality of Experience データを使用すると、ネットワーク パケットの損失数、バックグラウンド ノイズ、"ジッター" の量 (パケット遅延の違い) など、組織内で行われる音声通話とビデオ通話の品質の記録を維持できます。

Skype for Business Server で監視を有効にする場合は、CDR 監視と QoE 監視の両方を有効にするか、一方の種類の監視を有効にし、もう一方の種類を無効にすることもできます。 たとえば、ユーザーがインスタント メッセージングとファイル転送だけを使用し、音声またはビデオ通話を行わないとします。 この場合、QoE 監視を有効にする意味はほとんどありません。 同様に、Skype for Business Server を使用すると、監視の展開後に監視を簡単に有効または無効にできます。 たとえば、監視を展開するが、最初は QoE 監視を無効にする場合があります。 ユーザーが音声またはビデオ通話の問題に遭遇し始めた場合は、QoE 監視を有効にし、そのデータを使用してトラブルシューティングとそれらの問題の解決を行います。

Skype for Business Server のインストールと Skype for Business Server のインストールと同時に監視をインストールする場合、特に利点 (または欠点) はありません。 注意する必用がある点は、監視をインストールする前に、バックエンドの監視ストアをホストするコンピューターを選択し、そのコンピューターを監視に使用する前に、サポートされているバージョンの SQL Server をそのコンピューターにインストールして構成する必用があるということです。 コンピューターにSQL Serverインストール済みで、そのコンピューターを使用する準備ができている場合は、Skype for Business Server をインストールすると同時に監視をインストールできます。 バックエンド コンピューターの準備ができていない場合は、Skype for Business Server をそれ自体でインストールし、バックエンド コンピューターを使用する準備ができたときに監視をインストールできます。

 **必要なバックエンド監視データベースの数** 監視とアーカイブの両方のデータベースが 240,000 の Skype for Business Server ユーザーをサポートできると推定されました。 さらに、1 つの監視データベースを複数のフロントエンド プールで使用できます。組織内に 3 つのフロントエンド プールがある場合は、これらの 3 つすべてのプールを同じバックエンド ストアに関連付ける可能性があります。

多くの組織では、必要なバックエンド監視データベースの数を決定する際に、データベース容量が決め手になるのではありません。 代わりに、より重要な考慮事項はネットワーク速度である可能性があります。 3 つのフロントエンド プールがあるが、そのうちの 1 つが低速のネットワーク接続を越えて位置している場合を考えてみる。 その場合は、2 つの監視データベースを使用できます。1 つのデータベースは、良好なネットワーク接続を持つ 2 つのプールにサービスを提供し、別のデータベースを使用して低速のネットワーク接続でプールにサービスを提供します。

また、Skype for Business Server がミラー データベースの使用をサポートする場合も考慮する必要があります。 「データベース ミラーリング」を使用すると、データベースの 2 つのコピーを、それぞれ別のサーバー上で同時に保持することができます。 データがプライマリ データベースに書き込まれるたびに、同じデータがミラー データベースに書き込まれます。 プライマリ データベースに障害が発生した場合、または使用できなくなった場合は、単純な Skype for Business Server PowerShell コマンドを使用してミラー データベースに "フェールオーバー" できます。 次に例を示します。

```PowerShell
Invoke-CsDatabaseFailover -PoolFqdn atl-cs-001.litwareinc.com -DatabaseType "Monitoring" -NewPrincipal "Mirror"
```

これが重要なのは、ミラーリングでは、必要なデータベースの数が 2 倍になるからです。

 **Skype for Business Server サイトには独自のカスタム監視構成が必要ですか?** Skype for Business Server をインストールすると、CDR および QoE 構成設定のグローバル コレクションもインストールされます。これらのグローバル コレクションを使用すると、組織全体に同じ CDR および QoE 設定を適用できます。 多くの場合、これで十分です。多くの場合、すべてのユーザーに対して CDR 監視を有効にする必要があります。

ただし、異なるサイトに異なる設定を適用する必要がある場合があります。 たとえば、Redmond サイトで CDR と QoE の両方の監視を使用し、Dublin サイトでは CDR 監視のみを使用する場合があります。 同様に、Redmond サイトでは監視データを 60 日間保持する必要がありますが、この種類のデータは Dublin サイトで 30 日間保持する必要があります。 Skype for Business Server では、サイト スコープで CDR および QoE 構成設定の個別のコレクションを作成できます。これにより、各サイトを異なる方法で管理できます。 (これには、監視の有効化と無効化、およびデータの保持期間などの管理設定の構成の両方が含まれます)。

監視を展開する前、または監視を展開した後、これを決定できることに注意してください。たとえば、監視を展開してから、グローバル設定を使用して組織全体を管理できます。後で変更する場合には、たとえば、Redmond サイト用の設定の別個のコレクションを作成し、これらの設定を使用して Redmond 用の監視を管理します (サイト スコープに適用された設定は、グローバル スコープに適用された設定よりも常に優先されます)。再び変更する場合は、Redmond サイトに適用された構成設定を単に削除します。サイト設定のコレクションを削除すると、設定のグローバル コレクションがそのサイトに自動的に適用されます。

## <a name="sql-requirements-for-monitoring"></a>SQLの要件
<a name="topologies"> </a>

監視を有効にすると、統合データ収集エージェントが各フロントエンド サーバーに自動的にインストールされ、アクティブ化されます。 サポートされているバージョンの SQL Serverその他の詳細については[、「Skype for Business Server 2015](requirements-for-your-environment/server-requirements.md)のサーバー要件」を参照してください。

監視データは、他の種類SQL Serverデータインスタンスを共有できます。 通常、通話詳細記録データベース (LcsCdr) と Quality of Experience データベース (QoEMetrics) は、同じ通話詳細記録データベースSQLします。また、2 つの監視データベースがアーカイブ データベース (LcsLog) SQL同じインスタンスに含まれます。 インスタンスの実際の要件SQL Server、インスタンスの 1 つのインスタンスSQL Server以下に制限されます。

- Skype for Business Server 2015 バックエンド データベースの 1 つのインスタンス。 (一般に、監視データベースをバックエンド データベースと同じ SQL インスタンスに、または同じコンピューターに同じコンピューター上に同時に表示する方法は推奨されません。 技術的には可能ですが、監視データベースがバックエンド データベースに必要なディスク領域を使い切るリスクがあります)。

- 通話詳細記録データベースの 1 つのインスタンス。

- Quality of Experience データベースの 1 つのインスタンス。

- アーカイブ データベースの 1 つのインスタンス。

つまり、LcsCdr データベースの 2 つのインスタンスを同じインスタンスの lcsCdr データベースに含SQL Server。 LcsCdr データベースの複数のインスタンスが必要な場合は、複数の LcsCdr データベース インスタンスを構成SQL Server。

## <a name="see-also"></a>関連項目


[監視の展開](https://technet.microsoft.com/library/117f4a3e-0670-4388-a553-b9854921145f.aspx)
