---
title: Skype for Business Server 2015 での常設チャット サーバーの容量計画
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
ms.date: 2/23/2018
audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.assetid: 7a850cd5-c789-4795-a8ff-083be21ae784
description: '概要: このトピックでは、Skype for Business Server 2015 での常設チャット サーバーの容量計画について説明します。'
ms.openlocfilehash: d3d166f3b91ef0e7f711441387b4bef3d56f18b8
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/12/2021
ms.locfileid: "49834577"
---
# <a name="capacity-planning-for-persistent-chat-server-in-skype-for-business-server-2015"></a>Skype for Business Server 2015 での常設チャット サーバーの容量計画
 
**概要:** このトピックでは、Skype for Business Server 2015 での常設チャット サーバーの容量計画について説明します。
  
常設チャット サーバーは、将来の取得と検索のために保持できる、マルチユーザーのリアルタイム チャットを実行できます。 会話履歴が構成されている場合にユーザーのメールボックスに保存されるグループ インスタント メッセージング (IM) とは異なり、常設チャット サーバー セッションは長く開いたままで、コンテンツはメッセージ、ファイル、URL、および進行中の会話の一部であるその他のデータと共にサーバーに保存されます。
  
容量計画は、常設チャット サーバーを展開するための準備の重要な部分です。 このトピックでは、展開に最適な構成を決定するために使用できる容量計画の表を示します。 また、ピーク時により大きな容量を必要とする常設チャット サーバー展開を最適に管理する方法も説明します。
  
このセクションを読む前に、常設チャット のトポロジについて理解している必要があります。 詳細については、「常設チャット サーバー [トポロジを計画する」を参照してください](topology.md)。

> [!NOTE] 
> 常設チャットは Skype for Business Server 2015 で使用できますが、Skype for Business Server 2019 ではサポートされなくなりました。 Teams でも同じ機能を使用できます。 詳細については、「Microsoft Teams のアップグレード [の開始」を参照してください](/microsoftteams/upgrade-start-here)。 常設チャットを使用する必要がある場合は、この機能を必要とするユーザーを Teams に移行するか、Skype for Business Server 2015 を引き続き使用するかのどちらかを選択できます。 
  
## <a name="persistent-chat-server-capacity-planning"></a>常設チャット サーバーの容量計画

以下の表は、常設チャット サーバーのさまざまな設定が容量に与える影響をモデル化することで、常設チャット サーバーの容量計画に役立ちます。
  
- ユーザー数の容量を計画する
    
- チャット ルームへのアクセスの容量を計画する
    
- 招待によるチャット ルームアクセスの容量を計画する
    
- パフォーマンスの容量を計画する
    
### <a name="plan-capacity-for-number-of-users-for-persistent-chat-server"></a>常設チャット サーバーのユーザー数の容量を計画する

次のサンプル表を使用して、サポートすることができるユーザー数を判断します。
  
**常設チャット サーバー プールの最大容量のサンプル**

|||
|:-----|:-----|
|Active Persistent Chat サービス インスタンス  <br/> |4   <br/> |
|常設チャット サービス インスタンス  <br/> |8 (アクティブにできるのは最大 4 つ、非アクティブである必要があります)  <br/> |
|アクティブな接続ユーザー数  <br/> |80,000  <br/> |
|プロビジョニング対象ユーザーの総数  <br/> |150,000  <br/> |
|エンドポイント数  <br/> |120,000  <br/> |
   
前のサンプルでは、常設チャット サーバーが許可する最大ユーザー数をサポートする予定です。常設チャット サービスの 4 台のサーバー/インスタンス (高可用性および障害復旧用に常設チャット サーバーを実行するパッシブ サーバーを 4 台追加できます)、1 サーバーあたり 20,000 ユーザー (合計 80,000 のアクティブ ユーザー) です。
  
### <a name="plan-capacity-for-chat-room-access"></a>チャット ルームへのアクセスの容量を計画する

次のサンプル表は、常設チャット サーバー プールでのチャット ルームのアクセス管理を計画する場合に役立ちます。
  
**チャット ルームアクセスの管理のサンプル**

||**小規模チャット ルーム**|**中規模チャット ルーム**|**大規模チャット ルーム**|**合計**|
|:-----|:-----|:-----|:-----|:-----|
|チャット ルームのサイズ (接続ユーザー数)  <br/> |ルームあたり 30 ユーザー  <br/> |ルームあたり 150 ユーザー  <br/> |ルームあたり 16,000 ユーザー  <br/> ||
|チャット ルーム  <br/> |32,000  <br/> |1,067  <br/> |10   <br/> |33,077  <br/> |
|大会議室の割合 (%)  <br/> |1%  <br/> |1%  <br/> |50%  <br/> ||
|オープン ルームの割合 (%)  <br/> |3%  <br/> |3%  <br/> |50%  <br/> ||
|オープン ルーム数 (明示的なメンバーシップなし)  <br/> |960  <br/> |32  <br/> |5   <br/> |997  <br/> |
|非オープン ルーム数 (明示的なメンバーシップがある通常のルーム)  <br/> |31,040  <br/> |1.035  <br/> |5   <br/> |32,080  <br/> |
|大会議室数 (追加の発表者エントリ)  <br/> |0  <br/> |32  <br/> |5   <br/> ||
|直接メンバーシップによって管理されるルーム  <br/> |50%  <br/> |10%  <br/> |0%  <br/> ||
|ユーザー グループによって管理されるルーム  <br/> |50%  <br/> |90%  <br/> |100%  <br/> ||
|各チャット ルームのメンバーシップ一覧におけるユーザー グループ数 (オープン ルーム (明示的には指定されていない))  <br/> |0  <br/> |0  <br/> |0  <br/> ||
|各チャット ルームのメンバーシップ一覧におけるユーザー数 (非オープン ルーム)  <br/> |30  <br/> |150  <br/> |16,000  <br/> ||
|各チャット ルームのメンバーシップ一覧におけるユーザー グループ数 (非オープン ルーム)  <br/> |3   <br/> |5   <br/> |10   <br/> ||
|各チャット ルームのマネージャー一覧におけるユーザーおよびユーザー グループ数 (オープン ルームと非オープン ルーム)  <br/> |6   <br/> |6   <br/> |6   <br/> ||
|各大会議室のチャット ルームの発表者一覧におけるユーザーおよびユーザー グループ数 (オープン ルームと非オープン ルーム)  <br/> |6   <br/> |6   <br/> |6   <br/> ||
|すべての非オープン ルームにおけるユーザー ベースのメンバーシップ エンティティ数  <br/> |465,600  <br/> |15,520  <br/> |-  <br/> ||
|すべての非オープン ルームにおけるユーザー グループ ベースのメンバーシップ エンティティ数  <br/> |46,560  <br/> |4656  <br/> |50  <br/> ||
|すべての大会議室のチャット ルームにおけるユーザーおよびユーザー グループ ベースのエンティティ数  <br/> |0  <br/> |192  <br/> |50  <br/> ||
|すべてのチャット ルーム マネージャー一覧におけるユーザーおよびユーザー グループ ベースのマネージャー エンティティ数  <br/> |192,000  <br/> |6,400  <br/> |60  <br/> ||
|チャット ルームあたりのアクティブ ユーザー  <br/> |30  <br/> |150  <br/> |16,000  <br/> ||
|ユーザーあたりのチャット ルーム  <br/> |12   <br/> |2   <br/> |2   <br/> |16   <br/> |
|各チャット ルームのメンバーシップ一覧のユーザー グループ  <br/> |10   <br/> |10   <br/> |15   <br/> ||
|ユーザー グループによって管理されるルーム  <br/> |50%  <br/> |50%  <br/> |50%  <br/> ||
|すべてのチャット ルームのユーザー グループ ベースのメンバーシップ エンティティ  <br/> |155,200  <br/> |5173  <br/> |68  <br/> ||
|すべてのチャット ルームのユーザー ベースのメンバーシップ エンティティ  <br/> |465,600  <br/> |77,600  <br/> |72,000  <br/> ||
|各チャット ルームのマネージャーの一覧、発表者の一覧、およびスコープの一覧のユーザーおよびユーザー グループ  <br/> |6   <br/> |6   <br/> |6   <br/> ||
|すべてのチャット ルームのマネージャーの一覧、発表者の一覧、およびスコープの一覧のユーザーおよびユーザー グループ  <br/> |192,000  <br/> |6400  <br/> |60  <br/> ||
|アクセス制御エントリ  <br/> |704,160  <br/> |26,768  <br/> |160  <br/> |731,088  <br/> |
|最大アクセス制御エントリ  <br/> ||||2,000,000  <br/> |
   
前のサンプルでは、推奨ガイドラインに従って常設チャット サーバーを展開する場合、コンプライアンスが有効になっている 4 台のサーバー プールで最大 80,000 のアクティブ ユーザーを処理できます。
  
このサンプルは、小規模 (常時 30 のアクティブ ユーザー)、中規模 (150 のアクティブ ユーザー)、および大規模 (16,000 のアクティブ ユーザー) として分類されたチャット ルームを示しています。 上記の表でサポートされている特定のサイズのチャット ルームの数は、次の合計数に基づいて計算されます。
  
- システム内のアクティブ ユーザー
    
- 特定のサイズのチャット ルームのアクティブ ユーザー
    
- 単一ユーザーが参加する特定のサイズのチャット ルーム
    
上記の処理能力の計画表では、各チャット ルームについて、チャット ルームに直接割り当てられたエントリなど、チャット ルームに関連付けられたアクセス制御エントリの数を示しています。アクセス制御リスト (ACL) を使用して、個々のチャット ルームへのアクセスを制御できます。また、カテゴリ レベルでアクセスを制御することもできます。ACL では、個々のアクセス制御エントリは、ユーザー グループ (セキュリティ グループ、配布リストなど) または単一ユーザーのどちらかになります。アクセス制御エントリは、チャット ルームのマネージャー、発表者、およびメンバーに対して定義できます。
  
> [!IMPORTANT]
> チャット ルームの管理戦略を計画する際に、許容されるアクセス制御エントリの合計数は 200 万であることに注意してください。計算されたアクセス制御エントリが 200 万を超える場合は、サーバーのパフォーマンスが大幅に低下する可能性があります。この問題を可能な限り回避するには、アクセス制御エントリが個々のユーザーではなくユーザー グループとなるようにします。 
  
### <a name="plan-capacity-for-managing-chat-room-access-by-invitation"></a>招待によってチャット ルームへのアクセスを管理するための容量を計画する

次の容量計画の表を使用して、常設チャット サーバーが招待状を送信するように構成されている場合に常設チャット データベースに作成および保存する招待の数を把握できます。 カテゴリで招待を管理するには、Skype for  Business Server コントロール パネルの [チャット ルーム カテゴリ] 設定ページを使用するか、Windows PowerShell コマンドレット **set-csPersistentChatCategory** を使用します。 Skype for Business クライアントから起動された [ルームの管理] ページを使用するか、Windows PowerShell コマンドレット **set-csPersistentChatRoom** を使用して、チャット ルーム (カテゴリで許可されている内容に合った) で招待を管理できます。
  
次の表のサンプル データでは、[**チャット ルームの設定**] ページの [**招待**] オプションがすべてのチャット ルームの 50 パーセントで [**はい**] に設定されていることを前提としています。
  
> [!IMPORTANT]
> サーバーによって生成された招待の数の計算値が 100 万を超えると、サーバーのパフォーマンスが大幅に低下する可能性があります。 この問題を回避するには、招待を送信するように構成されているチャット ルームの数を最小限に抑えるか、招待を送信するように構成されているチャット ルームに参加できるユーザーの数を制限してください。 
  
**招待別チャット ルームへのアクセスのサンプル**

||**小規模チャット ルーム**|**中規模チャット ルーム**|**大規模チャット ルーム**|**合計**|
|:-----|:-----|:-----|:-----|:-----|
|チャット ルームにアクセスできるユーザー数  <br/> |ルームあたり 30 ユーザー  <br/> |ルームあたり 150 ユーザー  <br/> |ルームあたり 16,000 ユーザー  <br/> ||
|招待があるルームの割合  <br/> |50%  <br/> |50%  <br/> |50%  <br/> ||
|招待を送信するように構成されているチャット ルーム  <br/> |16,000  <br/> |533  <br/> |5   <br/> ||
|チャット ルームにアクセスできるユーザー  <br/> |60  <br/> |225  <br/> |16,000  <br/> ||
|常設チャット サーバーによって生成された招待  <br/> |960,000  <br/> |120,000  <br/> |80,000  <br/> |1,160,000  <br/> |
|招待の上限数  <br/> ||||2,000,000  <br/> |
|モデル 1 - 1 日、1 ルームあたりの想定メッセージ数で開始  <br/> |||||
|ルームあたりのチャット レート (1 日あたり)  <br/> |50  <br/> |500  <br/> |100  <br/> |650  <br/> |
|すべてのチャット ルームにおけるチャット レート (1 秒あたり)  <br/> |55.56  <br/> |18.52  <br/> |0.03  <br/> |74  <br/> |
|モデル 2 - 1 日、1 ユーザーあたりの投稿メッセージ数で開始  <br/> |||||
|ユーザーあたりのチャット レート (1 日あたり)  <br/> |15   <br/> |5   <br/> |0.1  <br/> |20  <br/> |
|ルームあたりのチャット レート (1 日あたり)  <br/> |38  <br/> |375  <br/> |800  <br/> |1,213  <br/> |
|すべてのチャット ルームにおけるチャット レート (1 秒あたり)  <br/> |41.67  <br/> |13.89  <br/> |0.28  <br/> |56  <br/> |
   
### <a name="plan-capacity-for-persistent-chat-server-performance"></a>常設チャット サーバーのパフォーマンスの容量を計画する

次の表では、常設チャット サーバーのユーザー モデルについて説明します。 この表は、処理能力の計画の要件に関する基礎を提供し、4 台のサーバーで同時に 80,000 のユーザーに対処できる一般的な組織を表しています。
  
**常設チャット サーバーのパフォーマンス ユーザー モデル**

|||
|:-----|:-----|
|アクティブな接続ユーザー数  <br/> |80,000  <br/> |
|常設チャット サーバー サービス インスタンスの数  <br/> |4   <br/> |
|小規模チャット ルームのサイズ  <br/> |30 ユーザー  <br/> |
|中規模チャット ルームのサイズ  <br/> |150 ユーザー  <br/> |
|大規模チャット ルームのサイズ  <br/> |16,000 ユーザー  <br/> |
|チャット ルームの合計数  <br/> |33,077  <br/> |
|小規模チャット ルームの数  <br/> |32,000  <br/> |
|中規模チャット ルームの数  <br/> |1,067  <br/> |
|大規模チャット ルームの数  <br/> |10   <br/> |
|ユーザーあたりのチャット ルームの合計数  <br/> |16   <br/> |
|ユーザーあたりの小規模チャット ルームの数  <br/> |12   <br/> |
|ユーザーあたりの中規模チャット ルームの数  <br/> |2   <br/> |
|ユーザーあたりの大規模チャット ルームの数  <br/> |2   <br/> |
|ユーザーあたりの参加ルーム数  <br/> |24  <br/> |
|ピーク時の参加レート  <br/> |10/秒  <br/> |
|チャット レート合計  <br/> |24/秒  <br/> |
|小規模チャット ルームのチャット レート  <br/> |22.22/秒  <br/> |
|中規模チャット ルームのチャット レート  <br/> |1.67/秒  <br/> |
|大規模チャット ルームのチャット レート  <br/> |~0.15/秒  <br/> |
|招待が構成されているチャット ルームの割合  <br/> |50%  <br/> |
|直接メンバーシップの割合  <br/> |50%  <br/> |
|グループ メンバーシップの割合  <br/> |50%  <br/> |
|Active Directory ドメイン サービスでの親の所属の平均数  <br/> |100 - 200  <br/> |
|ユーザーごとの加入する連絡先の数  <br/> |80  <br/> |
|ユーザーあたりの平均エンドポイント数  <br/> |1.5  <br/> |
|エンドポイントあたりの表示されるチャット ルームの平均数  <br/> |1.5  <br/> |
|ユーザーあたりの表示されるチャット ルームの平均数  <br/> |2.25 (1 ルームと 2 ルームが 50% ずつ)。最大 6 ルームがオープン (1 モニターにつき 1 つ)  <br/> |
|一定間隔でポーリングされる参加者の数  <br/> |25 (表示されるチャット ルーム 1 つあたり)  <br/> |
|ポーリング間隔の長さ  <br/> |5 分  <br/> |
|1 秒あたりにポーリングされる参加者の数  <br/> |15,000  <br/> |
|1 時間あたりのユーザーごとのプレゼンス変更の数  <br/> |6   <br/> |
|1 秒あたりのプレゼンス変更の数  <br/> |133.33  <br/> |
   

