---
title: Skype for Business Server で診断レポート (ユーザーごと) を呼び出す
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.assetid: 9da13470-001e-415f-b8c5-29b1f3b531ba
description: '概要: Skype for Business Server で使用されているユーザーごとの通話診断レポートについて説明します。'
ms.openlocfilehash: c2ef55243680cbb8bc088c2b056b298428b70b50
ms.sourcegitcommit: 2cc98fcecd753e6e8374fc1b5a78b8e3d61e0cf7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/08/2020
ms.locfileid: "40992072"
---
# <a name="call-diagnostic-reports-per-user-in-skype-for-business-server"></a>Skype for Business Server で診断レポート (ユーザーごと) を呼び出す
  
通話診断レポートは、失敗したピアツーピア セッションと会議セッションについて、ユーザーごとの情報を提供します。 この時点では、**ユーザーアクティビティレポート**のレポートは1つだけです。

ユーザー アクティビティ レポートは、特定の期間にユーザーによって実行されたピアツーピアおよび電話会議セッションの詳細な一覧を示します。多くの監視レポートとは異なり、ユーザー アクティビティ レポートは、各呼び出しを個別のユーザーに関連付けます。たとえば、ピアツーピアセッションでは、呼び出しを開始した人 (呼び出し元ユーザー) と呼び出しを受けた人 (呼び出し先ユーザー) の SIP URI が表示されます。電話会議の情報を展開すると、すべての電話会議の参加者と、その電話会議における参加者の役割の一覧が表示されます。

ユーザー アクティビティ レポートは、"ヘルプ デスク" レポートと呼ばれることがあります。ヘルプデスク担当者が、特定のユーザーに関するセッション情報を取得するときによくこのレポートを利用するからです。個別のユーザーに対する、または個別のユーザーによる呼び出しは、[ユーザー URI プレフィックス] ボックスにユーザーの SIP URI を入力するだけでフィルターできます。

この場合、ユーザーアクティビティレポートは、指定された文字列で SIP URI が始まるすべてのユーザーに関する情報を返します。 たとえば、[URI] ボックスに「 **ken** 」と入力すると、ユーザーアクティビティレポートによって**ken**が検索されます。Myer@litwareinc.com。 ただし、次のユーザーも検索されます。

- **ken** azi@litwareinc.com

- **ken** burg@litwareinc.com

- **Ken**.Sanchez@litwareinc.com

- **Ken** nedy@litwareinc.com

Ken Myer の情報のみが返されるようにするには、[検索] ボックスに完全な URI (Ken.Myer@litwareinc.com) を入力するか、少なくとも、少なくとも1種類の Ken の URI を入力して、組織内の他のユーザーと区別します。 次に例を示します。

Ken.my

## <a name="to-access-the-user-activity-report"></a>ユーザー アクティビティ レポートにアクセスするには

ユーザー アクティビティ レポートには、[監視レポート] ホーム ページからアクセスします。 また、 [Skype For Business Server の IP 電話のインベントリレポート](ip-phone-inventory-report.md)でユーザーの URI メトリックをクリックして、ユーザーアクティビティレポートにアクセスすることもできます。 ユーザー アクティビティ レポートで [電話会議 URI] (電話会議の場合) をクリックすると、会議詳細レポートが表示されます。 同様に、ピアツーピア通話の詳細なメトリックをクリックすると、 [Skype For Business Server のピアツーピアセッションの詳細レポート](peer-to-peer-session-detail-report.md)が表示されます。

## <a name="making-the-best-use-of-the-user-activity-report"></a>ユーザー アクティビティ レポートを最大限に利用する

ユーザーアクティビティレポートには、多くの適切な情報はありますが、情報を見つけるのが難しい場合があります。 たとえば、指定した期間中に組織内で実行されるすべてのユーザーアクティビティは、ユーザーアクティビティレポートに含まれます。つまり、レポート内に埋め込むということは、何らかの方法で実際に Skype for Business Server を使用したユーザーに関する情報です。

> [!NOTE]
> 技術的には、一部のユーザーアクティビティが unrecorded になることがあります。 Skype for Business Server では、すべての通話に関する情報を保持することができますが、通話についての情報が記録されていなくても、通話が発信される可能性があります。データベース. Skype for Business Server は、非常に正確であるように設計されていますが、Skype for Business Server を使用する方法については、必ずしも詳しくは説明しません。 (Skype for Business Server の監視を請求システムとして使用することはできないため、すべての通話の100% が記録されるという保証はありません)。次に、監視レポートで表示できるのは、最大で1000レコードだけです。 これは、ユーザー アクティビティの量と作業時間によっては、データベースに実際に格納されたデータの一部がクエリでは返されない場合があることを意味します。 

- この期間内にシステムを実際に使用したのはどのユーザーか。

- この期間内に最もアクティブだったのはどのユーザーか。

- 通話数が最も多いユーザーが、最も多くのインスタント メッセージング セッションに参加しているユーザーでもあるかどうか。

このような情報を確認するには、監視レポートで取得されたデータを Excel スプレッドシートにエクスポートします。 次に、そのスプレッドシート/カンマ区切り値ファイルを使用して、ユーザー アクティビティ レポートのような方法でデータを分析します。 たとえば、レポートデータを Excel にエクスポートしてから、カンマ区切り値ファイルにエクスポートするとします。 その時点で、からデータをインポートできます。次のようなコマンドを使用して、Windows PowerShell に CSV ファイルを保存します。

```PowerShell
$x = Import-Csv -Path "C:\Data\User_Activity_Report.csv"
```

データをインポートした後は、簡単な Windows PowerShell コマンドを使って質問に答えることができます。 たとえば、次のコマンドは、少なくとも 1 つのセッションで "呼び出し元ユーザー" としての役割を果たす一意のユーザーの一覧を返します。

```PowerShell
$x | Group-Object "From user" | Select Name | Sort-Object Name
```

つまり、次のとおりです。

<pre>
Name
----
David.Ahs@litwareinc.com
Gilead.Amosnino@litwareinc.com
Henrik.Jensen@litwareinc.com
Ken.Myer@litwareinc.com
Pilar.Ackerman@litwareinc.com
</pre>

次のコマンドは、ユーザーが参加しているセッションの合計数に基づいて、一意のユーザーの一覧を表示します。

```PowerShell
$x | Group-Object "From user" | Select Count, Name | Sort-Object Count -Descending
```

このコマンドは次のようなデータを返します。

<pre>
Count    Name
-----    ----
  523    Ken.Myer@litwareinc.com
   63    David.Ahs@litwareinc.com
   29    Pilar.Ackerman@litwareinc.com
   17    Gilead.Amosnino@litwareinc.com
   10    Henrik.Jensen@litwareinc.com
</pre>

次のコマンドは、報告されたセッションを、モダリティとしてオーディオが含まれるセッションに制限します。

```PowerShell
$x | Where-Object {$_.Modalities -match "audio"} | Group-Object "From user" | Select Count, Name | Sort-Object Count -Descending
```

レポートに表示されている診断 ID の上にマウスを置くと、その ID について説明するヒントが表示されます。

## <a name="filters"></a>フィルター

フィルターは、必要なデータのみに絞り込んだデータ セットを取得したり、取得したデータを別の方法で表示したりする方法として利用できます。たとえば、ユーザー アクティビティ レポートを使用すると、取得したデータに動作状況の種類 (ピアツーピア セッションまたは電話会議セッション) などに基づいてフィルターを適用できます。また、ユーザーの SIP アドレスによってフィルターを適用することもできます (この場合、1 人のユーザーの動作状況を表示できます)。データをグループ化する方法を選択することもできます。この場合、使用状況は、時間単位、日単位、週単位、または月単位でグループ化されます。

次の表に、ユーザー アクティビティ レポートで使用できるフィルターを示します。

**ユーザー アクティビティ レポートのフィルター**


| **名前**   | **説明**  |
|:-----------|:--------|
| **開始** <br/>             | 時間範囲の開始日と開始時刻。データを時間単位で表示するには、次のように開始日と開始時刻の両方を入力します。  <br/> 7/17/12015 13:00  <br/> 開始時刻を入力しないと、レポートは自動的に指定日の午前 12:00 に開始します。データを日単位で表示するには、次のように日付のみを入力します。  <br/> 7/17/12015  <br/> 週単位または月単位で表示するには、表示する週または月の任意の日付を入力します (その週または月の最初の日である必要はありません)。  <br/> 7/13/2015  <br/> 一週間は、日曜日から始まり、土曜日で終わるものとします。  <br/>                                                      |
| **終了** <br/>               | 時間範囲の終了日と終了時刻。データを時間単位で表示するには、次のように終了日と終了時刻の両方を入力します。  <br/> 7/17/12015 13:00  <br/> 終了時刻を入力しないと、レポートは自動的に指定日の午前 12:00 に終了します。データを日単位で表示するには、次のように日付のみを入力します。  <br/> 7/17/12015  <br/> 週単位または月単位で表示するには、表示する週または月の任意の日付を入力します (その週または月の最初の日である必要はありません)。  <br/> 7/13/2015  <br/> 一週間は、日曜日から始まり、土曜日で終わるものとします。  <br/>                                                             |
| **[動作状況の種類]** <br/>    | 動作状況の種類。次のいずれかを選択します。 <br/>  [すべて] <br/>  ピアツーピア <br/>  電話会議 <br/>      |
| **[モダリティ]** <br/>         | 使用できる [モダリティ] は、選んだ [動作状況の種類] によって異なります。 アクティビティの種類がピアツーピアの場合は、[IM] を選ぶことができます。ファイル送信アプリケーションの共有;トラフィックまたはビデオ。  <br/> [動作状況の種類] が [電話会議] の場合は、[IM 電話会議]、[Web 会議]、[アプリケーション共有]、[音声/ビデオ会議]、[テレフォニー会議] のいずれかを選択できます。  <br/>         |
| **[セッション カテゴリ]** <br/> | 問題のアクティビティが成功したか失敗したかを示します。次のいずれかを選択します。 <br/>  [すべて] <br/>  成功 <br/>  予期されたエラー <br/>  予期しないエラー <br/>  "予期されたエラー" は、発生が予期されるエラーです。たとえば、ユーザーが応答不可のステータスを設定した場合、そのユーザーへの呼び出しはエラーとなることが予期されます。"予期しないエラー" は、そのエラーの発生以外にはシステムに異常がないと思われる状況で発生するエラーです。たとえば、発信者が保留にされたときに、通話が終了してはなりません。そのような状態が発生する場合は、予期しないエラーとしてフラグが設定されます。 <br/> |
| **[ユーザー URI プレフィックス]** <br/>  | ユーザーの SIP アドレス。たとえば、Ken Myer という名前のユーザーのレコードのみを表示するには、次のように、Ken Myer の SIP アドレスを入力する必要があります。  <br/> sip:kenmyer@litwareinc.com  <br/>

## <a name="metrics-for-peer-to-peer-sessions"></a>ピアツーピア セッションの指標

次の表に、ピアツーピア セッション (2 人の参加者だけで行うセッション) について、ユーザー アクティビティ レポートで提供される情報を示します。

**ピアツーピア セッションの指標**

|**名前**|**この項目での並べ替え**|**説明**|
|:-----|:-----|:-----|
|**[詳細]** <br/> |不可  <br/> |この項目をクリックすると、選択されているセッションのピアツーピア セッション詳細レポートが表示されます。  <br/> |
|**[送信元ユーザー]** <br/> |はい  <br/> |ピアツーピア セッションを開始したユーザーの SIP アドレス。  <br/> |
|**[対象ユーザー]** <br/> |はい  <br/> |ピアツーピア セッションに参加したユーザーの SIP アドレス。  <br/> |
|**[モダリティ]** <br/> |はい  <br/> |セッションで使用された通信の種類。たとえば、IM、音声、ファイル送信。  <br/> |
|**[招待時間]** <br/> |はい  <br/> |ピアツーピア セッションへの最初の招待が送信された日時。  <br/> |
|**[応答時間]** <br/> |可  <br/> |"対象" ユーザーがセッションへの招待を受け付けた日時。  <br/> |
|**[終了時刻]** <br/> |可  <br/> |ピアツーピア セッションが終了した日時。  <br/> |
|**[診断 ID]** <br/> |はい  <br/> |SIP メッセージに添付される一意の識別子 (ms-diagnostics ヘッダー形式)。その情報は、多くの場合、エラーのトラブルシューティングに役立ちます。診断ヘッダーはオプションで (このヘッダーを含まない SIP セッションがある可能性もあります)、診断 ID は、何らかの問題が生じたセッションについてのみ報告されます。  <br/> |

## <a name="metrics-for-conferencing-sessions"></a>電話会議セッションの指標

次の表に、電話会議セッション (3 人以上の参加者で行うセッション) について、ユーザー アクティビティ レポートで提供される情報を示します。

**電話会議セッションの指標**

|**名前**|**この項目での並べ替え**|**説明**|
|:-----|:-----|:-----|
|**[会議 URI]** <br/> |はい  <br/> |一意の電話会議 ID。この項目をクリックすると、選択されているセッションの会議詳細レポートが表示されます。この項目を展開すると、電話会議参加者に関する情報が表示されます。詳細については、このトピックの後の「電話会議参加者の指標」を参照してください。  <br/> |
|**[開催者]** <br/> |はい  <br/> |会議を開催したユーザーの SIP アドレス。  <br/> |
|**プール** <br/> |可  <br/> |電話会議で使用されたエッジ サーバーの名前 (エッジ サーバーが使用された場合)。  <br/> |
|**[開始時刻]** <br/> |可  <br/> |会議が開始された日時。  <br/> |
|**[終了時刻]** <br/> |はい  <br/> |会議が終了した日時。  <br/> |

## <a name="metrics-for-conference-participants"></a>電話会議参加者の指標

次の表に、各電話会議参加者についてユーザー アクティビティ レポートで提供される情報を示します。

**電話会議参加者の指標**

|**名前**|**この項目での並べ替え**|**説明**|
|:-----|:-----|:-----|
|**役割** <br/> |いいえ  <br/> |電話会議におけるユーザーの役割 (発表者など)。  <br/> |
|**[参加者]** <br/> |いいえ  <br/> |ユーザーの SIP アドレス。  <br/> |
|**[接続]** <br/> |いいえ  <br/> |ネットワーク接続の種類。たとえば、"内部送信元" は内部接続、"送信元 PSTN" はダイヤル ユーザーを表します。  <br/> |
|**[参加時間]** <br/> |いいえ  <br/> |ユーザーが電話会議に参加した日時。  <br/> |
|**[退場時間]** <br/> |不可  <br/> |ユーザーが電話会議から退場した日時。  <br/> |
|**[診断 ID]** <br/> |いいえ  <br/> |SIP メッセージに添付される一意の識別子 (ms-diagnostics ヘッダー形式)。その情報は、多くの場合、エラーのトラブルシューティングに役立ちます。診断ヘッダーはオプションで (このヘッダーを含まない SIP セッションがある可能性もあります)、診断 ID は、何らかの問題が生じたセッションについてのみ報告されます。  <br/> |

