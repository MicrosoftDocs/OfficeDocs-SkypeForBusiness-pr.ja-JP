---
title: Skype のビジネス サーバーの変換規則を定義します。
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
description: ビジネス サーバーのエンタープライズ VoIP の Skype では、電話番号を E.164 形式に正規化を基に呼をルーティングします。 つまり、一致する SIP URI に翻訳できるように、番号の逆引き参照 (RNL) を実行するための E.164 形式にすべてのダイヤル文字列を正規化する必要があります。 Skype ビジネス サーバー用には、呼び出された ID には、呼び出し元 ID のプレゼンテーションを操作する機能が用意されています。
ms.openlocfilehash: 1615983b4ebeecc7374f8ef5c5c84ced83d0c151
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/11/2019
ms.locfileid: "33896324"
---
# <a name="defining-translation-rules-in-skype-for-business-server"></a>Skype のビジネス サーバーの変換規則を定義します。

ビジネス サーバーのエンタープライズ VoIP の Skype では、電話番号を E.164 形式に正規化を基に呼をルーティングします。 つまり、一致する SIP URI に翻訳できるように、番号の逆引き参照 (RNL) を実行するための E.164 形式にすべてのダイヤル文字列を正規化する必要があります。 Skype ビジネス サーバー用には、呼び出された ID には、呼び出し元 ID のプレゼンテーションを操作する機能が用意されています。

ビジネス サーバー、呼び出し先の電話番号を Skype で (つまり、電話番号と呼ばれる) (つまり、関連付けられているゲートウェイ、構内交換機 (PBX)、または SIP トランクのピアで必要とされるローカルのダイヤル形式に E.164 形式から変換することができますトランク)。 これを行うためには、トランク ピアへのルーティングの前に要求 URI を変換する変換ルールを 1 つ以上定義する必要があります。

## <a name="caller-id-presentation"></a>呼び出し元 ID のプレゼンテーション

Skype ビジネス サーバー用には、トランク ピアで必要とされるローカルのダイヤル形式に E.164 形式からも呼び出し元の関係者の電話番号 (つまりからの呼び出し元の呼び出しは、電話番号) を変換するためのオプションが用意されています。 たとえば、ダイヤル文字列の冒頭から +44 を取り除いて 0114 に置き換える変換ルールを記述できます。

**ビジネス サーバーのコントロール パネルの Skype を使用して、呼び出し元の ID を構成するのには**

1. RTCUniversalServerAdmins グループのメンバーとして、あるいは CsVoiceAdministrator、CsServerAdministrator、または CsAdministrator の役割のメンバーとしてコンピューターにログオンします。 詳細については、[セットアップのアクセス許可の委任](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx)を参照してください。
2. 、ブラウザー ウィンドウを開くし、コントロール パネルを開くための管理 URL を入力します。 ビジネス コントロール パネルの Skype を起動することができますを使用するさまざまな方法についての詳細は、[インストールと管理ツールを開く](../../management-tools/install-and-open-administrative-tools.md)を参照してください。
3. 左側のナビゲーション バーで [**音声ルーティング**] をクリックし、[**トランク構成**] をクリックします。
4. [トランク構成] ページで、既存のトランク (たとえば [**グローバル**] トランク) をダブルクリックして [**編集トランク構成**] ダイアログ ボックスを表示します。
5. 発信者番号のプレゼンテーションを構成するには、次のようにします。
    - エンタープライズ VoIP 展開で利用可能なすべての変換ルールの一覧から 1 つまたは複数のルールを選択するのには [**選択**] をクリックします。 [**発信者番号の変換ルール**] で、トランクに関連付けるルールをクリックし、[**OK**] をクリックします。
    - 新しい変換ルールを定義してトランクに関連付ける場合は、[**新規**] をクリックします。 
    - 既にトランクに関連付けられている変換ルールを編集するには、ルールの名前をクリックして、[**詳細の表示**] をクリックします。
    - 新しいルールを定義するための開始点として使用する既存の翻訳ルールをコピーするには、ルール名をクリックして**コピー**、し、[**貼り付け**] をクリックします。
    - トランクから変換ルールを削除するには、ルールの名前を選択状態にして、[**削除**] をクリックします。

> [!Warning] 
> 関連付けられたトランク ピアに対して変換ルールを構成している場合は、2 つのルールが競合する危険があるため、変換ルールをトランクに関連付けないでください。 

## <a name="called-id-presentation"></a>呼ばれる ID のプレゼンテーション

> [!Important]
> 1 つまたは複数の変換ルールをエンタープライズ VoIP のトランク構成に関連付けることは、*代替*トランク ピアで変換ルールを構成するに使用するものです。 2 つのルールが競合する可能性がありますので、トランク ピアで変換ルールを構成している場合は、エンタープライズ VoIP のトランク構成の変換規則を関連付けないでください。 

作成または変換規則を変更する次の方法のいずれかの方法を使用できます。

- [ビルド規則の翻訳ツールを使用して](#create-or-modify-a-translation-rule-by-using-the-build-a-translation-rule-tool)開始桁、長さ、桁を削除してし、対応する一致パターンと変換ルールを生成するビジネス サーバーのコントロール パネルの Skype を使用し、追加の桁の値を指定します。
- 一致パターンと変換ルールを定義する[正規表現を手動で作成](#create-or-modify-a-translation-rule-manually)をします。

> [!Note]
> 正規表現を記述する方法の詳細については、 [.NET Framework の正規表現](http://go.microsoft.com/fwlink/p/?linkId=140927)を参照してください。 

### <a name="create-or-modify-a-translation-rule-by-using-the-build-a-translation-rule-tool"></a>作成またはビルド規則の翻訳ツールを使用して変換ルールを変更します。

ビルド規則の翻訳ツールでは、一連の値を入力して、対応する一致パターンと変換ルールを生成するビジネス サーバーのコントロール パネルの Skype を有効にすることにより翻訳ルールを定義する場合は、以下の手順を実行します。 

**変換ルールの構築ツールを使用してルールを定義するには**

1. RTCUniversalServerAdmins グループのメンバーとして、あるいは CsVoiceAdministrator、CsServerAdministrator、または CsAdministrator の役割のメンバーとしてコンピューターにログオンします。 詳細については、[セットアップのアクセス許可の委任](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx)を参照してください。
2. 、ブラウザー ウィンドウを開くし、コントロール パネルを開くための管理 URL を入力します。 ビジネス コントロール パネルの Skype を起動することができますを使用するさまざまな方法についての詳細は、[インストールと管理ツールを開く](../../management-tools/install-and-open-administrative-tools.md)を参照してください。
3. 変換ルールを定義するには、まずの手順に従って操作で[メディアを使用してトランクを構成するバイパス](GET LINK AFTER MIGRATION)手順 10、または[メディアのないトランクの構成をバイパス](GET LINK AFTER MIGRATION)ステップ 9。
4. [**新しい変換ルール**] ページまたは [**変換ルールの編集**] ページの [**名前**] に、変換対象の番号パターンを説明する名前を入力します。
5. (省略可能)[**説明**] には、たとえば、 **u. s. 国際長距離通話料金のダイヤル**を変換ルールの説明を入力します。
6. ダイアログ ボックスの [**変換ルールの構築**] セクションの次のフィールドに値を入力します。
    - [**開始番号**]: (オプション) パターンに一致させる番号の先頭の番号を入力します。 たとえば、+ で開始される E.164 形式の番号に一致させるには、このフィールドに「+」を入力します。
    - [**長さ**]: 一致パターンの桁数を指定し、パターンをこの長さと同じ桁数の番号に一致させるか、この長さ以上の番号に一致させるか、どの長さの番号にも一致させるかを選択します。たとえば、**11** と入力してドロップダウン リストで [**At least** ] を選択すると、最低でも 11 桁の長さの番号に一致します。
    - [**削除する番号**]: (オプション) 開始番号から削除する桁数を指定します。 たとえば、「**1**」と入力すると、番号の先頭から + が削除されます。
    - [**追加する番号**]: (オプション) 変換済みの番号の先頭に追加する番号を指定します。たとえば、ルール適用時、変換済みの番号の先頭に 011 を追加したい場合は、「**011**」と入力します。
    
    これらのフィールドに入力した値は、**一致するパターン**および**変換**規則のフィールドに反映されます。 などの上記の例の値を指定する場合、 **matc パターン**」フィールドに表示される正規表現です。
    
    **^\+(\d{9}\d+)$** 

    [**変換ルール**] フィールドには、変換済みの番号の形式のパターンを指定します。このパターンには、次の 2 つのパーツがあります。
    - 一致パターンの桁数を表す値 (**$1** など)
    - (オプション) [**追加する番号**] フィールドに入力することで先頭に追加できる値

    上述の例の値を使用した場合、[**変換ルール**] フィールドに **011$1** が表示されます。
    
    この変換ルールを適用すると、+441235551010 が 011441235551010 になります。
7. [**OK**] をクリックして変換ルールを保存します。
8. [**OK**] をクリックしてトランク構成を保存します。
9. N**トランクの構成**] ページで、[**コミット**] をクリックし、[**すべてコミット**] をクリックします。 

> [!Note]
> 変換ルールを作成または変更したときは必ず、[**すべて確定**] コマンドを実行して構成の変更を公開する必要があります。 詳細については、[発行保留中の音声ルーティング構成の変更](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx)を参照してください。 

### <a name="create-or-modify-a-translation-rule-manually"></a>変換ルールを手動で変更をします。

一致するパターンの正規表現を記述することによって、翻訳ルールと変換ルールを定義する場合は、以下の手順を実行します。 

**変換ルールを手動で定義するには**

1. RTCUniversalServerAdmins グループのメンバーとして、あるいは CsVoiceAdministrator、CsServerAdministrator、または CsAdministrator の役割のメンバーとしてコンピューターにログオンします。 詳細については、[セットアップのアクセス許可の委任](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx)を参照してください。
2. 、ブラウザー ウィンドウを開くし、コントロール パネルを開くための管理 URL を入力します。 ビジネス コントロール パネルの Skype を起動することができますを使用するさまざまな方法についての詳細は、[インストールと管理ツールを開く](../../management-tools/install-and-open-administrative-tools.md)を参照してください。
3. 変換ルールを定義するには、まずの手順に従って操作で[メディアを使用してトランクを構成するバイパス](GET LINK AFTER MIGRATION)手順 10、または[メディアのないトランクの構成をバイパス](GET LINK AFTER MIGRATION)ステップ 9。
4. [**新しい変換ルール**] ページまたは [**変換ルールの編集**] ページの [**名前**] フィールドに、変換対象の番号パターンを説明する名前を入力します。
5. (省略可能)**説明**、翻訳ルールの説明を入力します。たとえば、**米国インターナショナルの長距離ダイヤル**をします。
6. [**変換ルールの構築**] セクションの一番下にある [**編集**] をクリックします。
7. タイプの**正規表現**で次を入力します。
    - [**このパターンと一致**] に、変換する番号を照合するために使用するパターンを指定します。
    - [**変換ルール**] に、変換される番号の形式のパターンを指定します。

    入力する場合など**^ \+(\d{9}\d+)$** **このパターンの一致**でと**011$ 1** **変換ルール**では、ルール、+441235551010 が 011441235551010 に変換します。
8. [**OK**] をクリックして変換ルールを保存します。
9. [**OK**] をクリックしてトランク構成を保存します。
10. [**トランク構成**] ページで [**確定**] をクリックして、[**すべて確定**] をクリックします。 

> [!Note] 
> 変換ルールを作成または変更したときは必ず、[**すべて確定**] コマンドを実行して構成の変更を公開する必要があります。 詳細については、[発行保留中の音声ルーティング構成の変更](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx)を参照してください。 
