---
title: ビジネス サーバーの Skype の正規化ルールを定義します。
ms.author: jambirk
author: jambirk
manager: serdars
ms.audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
description: Skype ビジネス サーバーの正規化ルールをダイヤルされた電話番号を E.164 形式に変換するのに.NET Framework の正規表現を使用します。つまり、正規化の規則は、ユーザーがダイヤルした電話番号をとるし、その数ビジネス サーバーの Skype で内部的に使用される形式に変換します。 各ダイヤル プランには、正規化ルールを 1 つ以上割り当てる必要があります。
ms.openlocfilehash: 1304fa24f469b5ea8735858d3b66637eb404ab25
ms.sourcegitcommit: 5576463b0295e48e0506f7e4b44006ffc0b38a95
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/10/2018
ms.locfileid: "27222934"
---
# <a name="defining-normalization-rules-in-skype-for-business-server"></a><span data-ttu-id="b5af0-104">ビジネス サーバーの Skype の正規化ルールを定義します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-104">Defining normalization rules in Skype for Business Server</span></span>

<span data-ttu-id="b5af0-105">Skype ビジネス サーバーの正規化ルールをダイヤルされた電話番号を E.164 形式に変換するのに.NET Framework の正規表現を使用します。つまり、正規化の規則は、ユーザーがダイヤルした電話番号をとるし、その数ビジネス サーバーの Skype で内部的に使用される形式に変換します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-105">Skype for Business Server normalization rules use .NET Framework regular expressions to translate dialed phone numbers to E.164 format; in other words, normalization rules take the phone number dialed by a user and convert that number to the format used internally by Skype for Business Server.</span></span> <span data-ttu-id="b5af0-106">各ダイヤル プランには、正規化ルールを 1 つ以上割り当てる必要があります。</span><span class="sxs-lookup"><span data-stu-id="b5af0-106">Each dial plan must be assigned one or more normalization rules.</span></span>

<span data-ttu-id="b5af0-107">正規化規則の詳細については、[ダイヤル プランと正規化の規則](https://technet.microsoft.com/en-us/library/gg413082(v=ocs.15).aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-107">For details about normalization rules, see [Dial plans and normalization rules](https://technet.microsoft.com/en-us/library/gg413082(v=ocs.15).aspx).</span></span>

<span data-ttu-id="b5af0-108">正規表現を記述する方法の詳細については、 [.NET Framework の正規表現](http://go.microsoft.com/fwlink/p/?linkId=140927)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-108">For details about how to write regular expressions, see [.NET Framework Regular Expressions](http://go.microsoft.com/fwlink/p/?linkId=140927).</span></span>

<span data-ttu-id="b5af0-109">正規化の規則を編集または定義を次の方法のいずれかの方法を使用できます。</span><span class="sxs-lookup"><span data-stu-id="b5af0-109">You can use either of the following methods to define or edit a normalization rule:</span></span>
- <span data-ttu-id="b5af0-110">開始数字、長さ、桁を削除して、ビジネス サーバーのコントロール パネルの Skype に対応する一致パターンと変換ルールを生成し、追加の桁の値を指定するのには、[**正規化ルールの構築**ツールを使用して](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule)あなたに。</span><span class="sxs-lookup"><span data-stu-id="b5af0-110">[Use the **Build a Normalization Rule** tool](#create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule) to specify values for the starting digits, length, digits to remove and digits to add, and then let Skype for Business Server Control Panel generate the corresponding matching pattern and translation rule for you.</span></span>
- <span data-ttu-id="b5af0-111">一致パターンと変換ルールを定義する[正規表現を手動で作成](#create-or-modify-a-normalization-rule-manually)をします。</span><span class="sxs-lookup"><span data-stu-id="b5af0-111">[Write regular expressions manually](#create-or-modify-a-normalization-rule-manually) to define the matching pattern and translation rule.</span></span> 

## <a name="create-or-modify-a-normalization-rule-by-using-build-a-normalization-rule"></a><span data-ttu-id="b5af0-112">作成するか、ビルドを使用して正規化ルールの正規化ルールを変更</span><span class="sxs-lookup"><span data-stu-id="b5af0-112">Create or modify a normalization rule by using Build a Normalization Rule</span></span>

<span data-ttu-id="b5af0-113">作成またはビジネス サーバーのコントロール パネルの Skype の正規化ルールを変更する場合は、次の手順を完了します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-113">Complete the following steps if you want to create or modify a normalization rule in Skype for Business Server Control Panel.</span></span> 

<span data-ttu-id="b5af0-114">**正規化規則をビルドを使用してルールを定義するには**</span><span class="sxs-lookup"><span data-stu-id="b5af0-114">**To define a rule by using Build a Normalization Rule**</span></span>

1. <span data-ttu-id="b5af0-115">RTCUniversalServerAdmins グループのメンバーとして、あるいは CsVoiceAdministrator、CsServerAdministrator、または CsAdministrator の役割のメンバーとしてコンピューターにログオンします。</span><span class="sxs-lookup"><span data-stu-id="b5af0-115">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="b5af0-116">詳細については、[セットアップのアクセス許可の委任](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-116">For details, see [Delegate setup permissions](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span></span>
2. <span data-ttu-id="b5af0-117">、ブラウザー ウィンドウを開くし、コントロール パネルを開くための管理 URL を入力します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-117">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="b5af0-118">ビジネス コントロール パネルの Skype を起動することができますを使用するさまざまな方法についての詳細は、[インストールと管理ツールを開く](../../management-tools/install-and-open-administrative-tools.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-118">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="b5af0-119">(省略可能)手順 10 で手順 11] または [[変更のダイヤル プラン](GET LINK AFTER MIGRATION)で[ダイヤル プランの作成](GET LINK AFTER MIGRATION)の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="b5af0-119">(Optional) Follow the steps in [Create a dial plan](GET LINK AFTER MIGRATION) through step 11 or [Modify a dial plan](GET LINK AFTER MIGRATION) through step 10.</span></span> 
4. <span data-ttu-id="b5af0-120">[**新しい正規化ルール**] または [**正規化ルールの編集**] の [**名前**] に、正規化される番号パターンについてわかりやすい名前 (たとえば、**5DigitExtension**) を入力します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-120">In **New Normalization Rule** or **Edit Normalization Rule**, type a name that describes the number pattern being normalized in **Name** (for example, **5DigitExtension**).</span></span>
5. <span data-ttu-id="b5af0-121">(オプション) [**説明**] ボックスに、正規化ルールの説明を入力します (たとえば、「5 桁の内線番号を変換」)。</span><span class="sxs-lookup"><span data-stu-id="b5af0-121">(Optional) In **Description**, type a description of the normalization rule (for example, "Translates 5-digit extensions").</span></span>
6. <span data-ttu-id="b5af0-122">[**正規化ルールの構築**] で、次のフィールドに値を入力します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-122">In **Build a Normalization Rule**, enter values in the following fields:</span></span>
    - <span data-ttu-id="b5af0-123">**開始桁の数字**: の先頭の桁と一致するパターンの番号をダイヤルする (オプション) を指定してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-123">**Starting digits**:   (Optional) Specify the leading digits of dialed numbers you want the pattern to match.</span></span> <span data-ttu-id="b5af0-124">たとえば、425 で始まるダイヤル番号とパターンが一致するようにする場合は、「**425**」と入力します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-124">For example, type **425** if you want the pattern to match dialed numbers beginning with 425.</span></span>
    - <span data-ttu-id="b5af0-125">**長さ**: 指定の桁数に一致するパターンし、この長さを正確に一致するパターンをする、ダイヤルする長さでは、少なくとも番号を一致または一致する任意の長さの番号をダイヤルするかどうかを選択します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-125">**Length**:   Specify the number of digits in the matching pattern and select whether you want the pattern to match this length exactly, match dialed numbers that are at least this length, or match dialed numbers of any length.</span></span>
    - <span data-ttu-id="b5af0-126">**桁**: (オプション) を指定する番号と一致するパターンをダイヤルした番号から削除する桁数を開始します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-126">**Digits to remove**:   (Optional) Specify the number of starting digits to be removed from dialed numbers you want the pattern to match.</span></span>
    - <span data-ttu-id="b5af0-127">**数字**: ダイヤルする番号を追加する (オプション) を指定する数字と一致するパターンをします。</span><span class="sxs-lookup"><span data-stu-id="b5af0-127">**Digits to add**:   (Optional) Specify digits to be added to dialed numbers you want the pattern to match.</span></span>
    
    <span data-ttu-id="b5af0-128">これらのフィールドに入力する値は、[**一致パターン**] および [**変換ルール**] に反映されます。</span><span class="sxs-lookup"><span data-stu-id="b5af0-128">The values you enter in these fields are reflected in **Pattern to match** and **Translation rule**.</span></span> <span data-ttu-id="b5af0-129">たとえば、**開始桁の数字**を空のままにすると、[**長さ**] フィールドには、タイプ**7**は、**正確**を選択し、**削除するのには数字**の**0**を指定、結果として得られる正規表現**と一致するパターン**では。</span><span class="sxs-lookup"><span data-stu-id="b5af0-129">For example, if you leave **Starting digits** empty, type **7** into the **Length** field select **Exactly**, and specify **0** in **Digits to remove**, the resulting regular expression in the **Pattern to match** is:</span></span>

    <span data-ttu-id="b5af0-130">**^(\d{7})$**</span><span class="sxs-lookup"><span data-stu-id="b5af0-130">**^(\d{7})$**</span></span>

7. <span data-ttu-id="b5af0-131">[**変換ルール**] で、変換される E.164 電話番号の形式のパターンを次のように指定します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-131">In **Translation rule**, specify a pattern for the format of translated E.164 phone numbers as follows:</span></span>
    - <span data-ttu-id="b5af0-132">一致パターンで指定した桁数を表す値。</span><span class="sxs-lookup"><span data-stu-id="b5af0-132">A value that represents the number of digits specified in the matching pattern.</span></span> <span data-ttu-id="b5af0-133">例では、一致するパターンは、 **^(\d{7})$**、翻訳ルールの中の $1 が 7 桁のダイヤル番号を表します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-133">For example, if the matching pattern is **^(\d{7})$**, then $1 in the translation rule represents 7-digit dialed numbers.</span></span>
    - <span data-ttu-id="b5af0-134">(オプション) "**追加する数字**" フィールドに値を入力して、変換された番号に付加する数字を指定します (たとえば、「**+1425**」)。</span><span class="sxs-lookup"><span data-stu-id="b5af0-134">(Optional) Type a value into the **Digits to add** field to specify digits to be prepended to the translated number (for example, **+1425**).</span></span>
    
    <span data-ttu-id="b5af0-135">**一致させるパターン**が含まれている場合など、 **^(\d{7})$** ダイヤルした番号と**変換ルール**のパターンが含まれている **+1425$ 1** E.164 電話番号のパターンとしてルールが +14255550100 に 5550100 を正規化します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-135">For example, if **Pattern to match** contains **^(\d{7})$** as the pattern for dialed numbers and **Translation rule** contains **+1425$1** as the pattern for E.164 phone numbers, the rule normalizes 5550100 to +14255550100.</span></span>

8. <span data-ttu-id="b5af0-136">(オプション) 正規化ルールによって電話番号が組織の内線番号になる場合は、[**内線番号**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-136">(Optional) If the normalization rule results in a phone number that is internal to your organization, select **Internal extension**.</span></span>
9. <span data-ttu-id="b5af0-p108">(オプション) 正規化ルールをテストする番号を入力し、[**実行**] をクリックします。テスト結果は、[**テストする番号の入力**] の下に表示されます。</span><span class="sxs-lookup"><span data-stu-id="b5af0-p108">(Optional) Enter a number to test the normalization rule, and then click **Go**. The test results are displayed under **Enter a number to test**.</span></span>
    > [!Note] 
    > <span data-ttu-id="b5af0-139">テストにまだ合格していない正規化ルールは、保存しておいて後で再構成できます。</span><span class="sxs-lookup"><span data-stu-id="b5af0-139">You can save a normalization rule that does not yet pass the test and then reconfigure it later.</span></span> <span data-ttu-id="b5af0-140">詳細については、[音声ルーティングのテスト](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-140">For details, see [Test voice routing](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx).</span></span> 

10. <span data-ttu-id="b5af0-141">[**OK**] をクリックして正規化ルールを保存します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-141">Click **OK** to save the normalization rule.</span></span>
11. <span data-ttu-id="b5af0-142">[**OK**] をクリックしてダイヤル プランを保存します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-142">Click **OK** to save the dial plan.</span></span>
12. <span data-ttu-id="b5af0-143">[**ダイヤル プラン**] ページで [**確定**] をクリックして、[**すべて確定**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b5af0-143">On the **Dial Plan** page, click **Commit**, and then click **Commit all**.</span></span> 
    > [!Note]
    > <span data-ttu-id="b5af0-144">正規化ルールを作成または変更するときにはいつでも、[すべて確定] コマンドを実行して構成の変更を公開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b5af0-144">Whenever you create or change a normalization rule, you must run the Commit all command to publish the configuration change.</span></span> <span data-ttu-id="b5af0-145">詳細については、[発行保留中の音声ルーティング構成の変更](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-145">For details, see [Publish pending changes to the voice routing configuration](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx).</span></span> 

## <a name="create-or-modify-a-normalization-rule-manually"></a><span data-ttu-id="b5af0-146">手動による正規化ルールの作成または変更</span><span class="sxs-lookup"><span data-stu-id="b5af0-146">Create or modify a normalization rule manually</span></span>

<span data-ttu-id="b5af0-147">作成または正規化ルールを手動で変更する場合は、次の手順を完了します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-147">Complete the following steps if you want to create or modify a normalization rule manually.</span></span>

<span data-ttu-id="b5af0-148">**正規化ルールを手動で定義するには**</span><span class="sxs-lookup"><span data-stu-id="b5af0-148">**To define a normalization rule manually**</span></span>

1. <span data-ttu-id="b5af0-149">RTCUniversalServerAdmins グループのメンバーとして、あるいは CsVoiceAdministrator、CsServerAdministrator、または CsAdministrator の役割のメンバーとしてコンピューターにログオンします。</span><span class="sxs-lookup"><span data-stu-id="b5af0-149">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="b5af0-150">詳細については、[セットアップのアクセス許可の委任](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-150">For details, see [Delegate setup permissions](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span></span>
2. <span data-ttu-id="b5af0-151">、ブラウザー ウィンドウを開くし、コントロール パネルを開くための管理 URL を入力します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-151">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="b5af0-152">ビジネス コントロール パネルの Skype を起動することができますを使用するさまざまな方法についての詳細は、[インストールと管理ツールを開く](../../management-tools/install-and-open-administrative-tools.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-152">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="b5af0-153">(省略可能)手順 10 で手順 11] または [[変更のダイヤル プラン](GET LINK AFTER MIGRATION)で[ダイヤル プランの作成](GET LINK AFTER MIGRATION)の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="b5af0-153">(Optional) Follow the steps in [Create a dial plan](GET LINK AFTER MIGRATION) through step 11 or [Modify a dial plan](GET LINK AFTER MIGRATION) through step 10.</span></span>  
4. <span data-ttu-id="b5af0-154">[**新しい正規化ルール**] または [**正規化ルールの編集**] の [**名前**] に、正規化される番号パターンについてわかりやすい名前を入力します (たとえば、正規化ルールに「**5DigitExtension**」という名前を付けます)。</span><span class="sxs-lookup"><span data-stu-id="b5af0-154">In **New Normalization Rule** or **Edit Normalization Rule**, type a name that describes the number pattern being normalized in **Name** (for example, name the normalization rule **5DigitExtension**).</span></span>
5. <span data-ttu-id="b5af0-155">(オプション) [**説明**] ボックスに、正規化ルールの説明を入力します (たとえば、「5 桁の内線番号を変換」)。</span><span class="sxs-lookup"><span data-stu-id="b5af0-155">(Optional) In **Description**, type a description of the normalization rule (for example, "Translates 5-digit extensions").</span></span>
6. <span data-ttu-id="b5af0-156">[**正規化ルールの構築**] で [**編集**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b5af0-156">In **Build a Normalization Rule**, click **Edit**.</span></span>
7. <span data-ttu-id="b5af0-157">[正規表現の入力] で次のように入力します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-157">Enter the following in Type a Regular Expression:</span></span>
    - <span data-ttu-id="b5af0-158">[**このパターンを照合**] で、ダイヤル電話番号を照合するために使用するパターンを指定します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-158">In **Match this pattern**, specify the pattern that you want to use to match the dialed phone number.</span></span>
    - <span data-ttu-id="b5af0-159">[**変換ルール**] で、変換される E.164 電話番号の形式のパターンを指定します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-159">In **Translation rule**, specify a pattern for the format of translated E.164 phone numbers.</span></span>

    <span data-ttu-id="b5af0-160">入力する場合など、 **^(\d{7})$** で**このパターンに一致して** **+1425$ 1** **翻訳ルール**では、ルールが +14255550100 に 5550100 を正規化します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-160">For example, if you enter **^(\d{7})$** in **Match this pattern** and **+1425$1** in **Translation rule**, the rule normalizes 5550100 to +14255550100.</span></span>

8. <span data-ttu-id="b5af0-161">(オプション) 正規化ルールによって電話番号が組織の内線番号になる場合は、[**内線番号**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-161">(Optional) If the normalization rule results in a phone number that is internal to your organization, select **Internal extension**.</span></span>
9. <span data-ttu-id="b5af0-p113">(オプション) 正規化ルールをテストする番号を入力し、[**実行**] をクリックします。テスト結果は、[**テストする番号の入力**] の下に表示されます。</span><span class="sxs-lookup"><span data-stu-id="b5af0-p113">(Optional) Enter a number to test the normalization rule, and then click **Go**. The test results are displayed under **Enter a number to test**.</span></span>

    > [!Note]
    > <span data-ttu-id="b5af0-164">テストにまだ合格していない正規化ルールは、保存しておいて後で再構成できます。</span><span class="sxs-lookup"><span data-stu-id="b5af0-164">You can save a normalization rule that does not yet pass the test and then reconfigure it later.</span></span> <span data-ttu-id="b5af0-165">詳細については、[音声ルーティングのテスト](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b5af0-165">For details, see [Test voice routing](https://technet.microsoft.com/en-us/library/gg398915(v=ocs.15).aspx).</span></span> 

10. <span data-ttu-id="b5af0-166">[**OK**] をクリックして正規化ルールを保存します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-166">Click **OK** to save the normalization rule.</span></span>
11. <span data-ttu-id="b5af0-167">[**OK**] をクリックしてダイヤル プランを保存します。</span><span class="sxs-lookup"><span data-stu-id="b5af0-167">Click **OK** to save the dial plan.</span></span>
12. <span data-ttu-id="b5af0-168">[**ダイヤル プラン**] ページは、 **Commi**t をクリックし、[**すべてコミット**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b5af0-168">On the **Dial Plan** page, click **Commi**t, and then click **Commit all**.</span></span> 