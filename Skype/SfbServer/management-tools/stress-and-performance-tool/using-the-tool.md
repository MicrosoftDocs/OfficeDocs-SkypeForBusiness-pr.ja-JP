---
title: Skype for Business Server 2015 のストレスとパフォーマンスのツールを使用する
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
ms.date: 2/13/2018
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 93f42230-24a2-418d-9770-bf4670a9d78f
description: Skype for Business Server 2015 のストレスとパフォーマンスのツールを実行するには、ユーザー、連絡先、ユーザープロファイルの両方を管理し、実行するツールを構成して、ツールによって生成された出力または結果を確認できるようにする必要があります。
ms.openlocfilehash: e0cf241417272cfa16b3e332e7bafe7a112af38b
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/20/2019
ms.locfileid: "34277721"
---
# <a name="using-the-skype-for-business-server-2015-stress-and-performance-tool"></a>Skype for Business Server 2015 のストレスとパフォーマンスのツールを使用する
 
Skype for Business Server 2015 のストレスとパフォーマンスのツールを実行するには、ユーザー、連絡先、ユーザープロファイルの両方を管理し、実行するツールを構成して、ツールによって生成された出力または結果を確認できるようにする必要があります。
  
Skype for Business Server 2015 のストレスとパフォーマンスツールの実行には、次の4つの領域が含まれます (実行可能ファイルは LyncPerfTool)。
  
- [ユーザーと連絡先を作成する](using-the-tool.md#BKMK_CreateUsersAndContacts)
    
- [ユーザープロファイルを構成する](using-the-tool.md#BKMK_UserProfile)
    
- [LyncPerfTool を実行する](using-the-tool.md#BKMK_RunTool)
    
- [結果を解釈する](using-the-tool.md#BKMK_Interpret)
    
## <a name="create-users-and-contacts"></a>ユーザーと連絡先を作成する
<a name="BKMK_CreateUsersAndContacts"> </a>

ストレスとパフォーマンスのテストのためにユーザーと連絡先を作成するには、Skype for Business Server 2015 (SB 2015) ユーザープロビジョニングツール (Userprovisioning Tool) を使用する必要があります。
  
これは、トピックを読むときに役立つ可能性がある有用な用語の一覧です。
  
- **組織単位**-Active Directory ドメインサービス (AD DS) 組織単位 (OU)。
    
- **フェデレーション/クロスプール**-他のインスタントメッセージング (IM) サービスからユーザーと通信できるユーザー。
    
- **配布リスト**または dl。 Ad ds ユーザーの一覧を含む AD DS のオブジェクトです。 複数のユーザーによるコミュニケーションを容易にするために使用されます。
    
- **位置情報サービス**-Skype For business Server 2015 サービスが有効になっていて、スマートフォンで構成されている場合は、拡張 911 (E911) サービスの物理的な場所を取得することができます。
    
- **米国の電話番号**-ユーザーに割り当てられている電話番号と、逆引き番号参照 (RNL) での着信および発信通話のルーティングに使用される SIP URI。
    
### <a name="create-users-and-contacts-by-using-userprovisioningtoolexe"></a>Userプロビジョニングツールを使用してユーザーと連絡先を作成する

> [!NOTE]
> 開始する前に、このツールを実行するには、ドメイン管理者セキュリティグループのメンバーとしてログインしていることを確認してください。 Active Directory ユーザーを作成しようとしているため、この操作を行う必要があります。 
  
ロードシミュレーション用にユーザーと連絡先を作成するには、Skype for Business Server ユーザープロビジョニングツールを使用する必要があります。
  
Skype for business **server のユーザープロビジョニングツール**は、 **Skype for Business server のストレスとパフォーマンスツール**パッケージと共にインストールされます。 パッケージインストーラー (CapacityPlanningTool) が、フロントエンドサーバーまたはテストする Standard Edition サーバーで実行されていることを確認します。
  
Skype for Business Server ユーザープロビジョニングツールを起動するには、フロントエンドサーバーまたは Standard Edition サーバーのファイル Userprovisioning Tool (% LyncStressAndPerfTool ディレクトリ% \ LyncStress) を実行します。
  
> [!IMPORTANT]
> 多数のユーザー (たとえば、1万など) を作成する場合は、User指定ツールを実行します。 この操作は、ツールが*新しい*広告ユーザーを作成して構成するために必要です。
  
ユーザープロビジョニングツールが開いたら、[構成] をクリックし、読み込み構成を選択します。 
  
ユーザーと連絡先の構成を開始するには、パッケージに含まれている既定のファイル ("SampleData" と呼ばれます) を読み込みます。 これにより、展開に関連するように変更する必要があるサンプルデータを含むフィールドが事前に設定されます。
  
既にカスタマイズした設定が含まれている構成済みの XML ファイルがある場合は、そのファイルを読み込むことができます。 以下のセクションで説明するように、ユーザープロビジョニングツールのフィールドに入力します。
  
### <a name="to-configure-server-options"></a>サーバーオプションを構成するには:

1. [**フロントエンドプールの fqdn** ] フィールドに、Standard Edition サーバーの完全修飾ドメイン名 (fqdn)、またはユーザーをホストするフロントエンドプールを入力します。
    
2. [**ユーザー名プレフィックス**] フィールドに、テスト目的 ("TestUser" など) のユーザー名の bust に使用するプレフィックスを入力します。
    
3. [**パスワード**] フィールドに、すべてのテストユーザーアカウントで使用されるパスワードを入力します。
    
4. [ **Account domain** ] フィールドに、現在の AD ドメインのドメイン名 (テストユーザーを作成するドメイン名) を入力します。
    
5. [**組織単位**] フィールドに、これらのテストユーザーを作成する広告ドメインの名前を入力します。 (OU がまだ存在しない場合は、自動的に作成されます)。
    
6. [**電話の市外局番**] フィールドに、すべてのテストユーザーアカウントで使用する3桁の市外局番を入力します。 選択した市外局番が広告の他のユーザーの市外局番と競合していないことを確認します。
    
7. エンタープライズ Voip のテストユーザーを有効にする場合は、[**音声を有効**にする] チェックボックスをオンにします。
    
8. [**ユーザー**数] フィールドで、作成するテストユーザーの合計数を指定します。
    
9. [**開始インデックス**] フィールドで、ユーザー名のプレフィックスのサフィックスとして使用される開始番号を指定します (たとえば、プレフィックスは "TestUser"、次の例では、最初の名前は "0" になります)。
    
     ![[User Creation] タブを表示している User Provisioning Tool](../../media/591d8280-8979-4a8c-83bc-af126e87bf29.png)
  
#### <a name="create-users-button"></a>[ユーザーの作成] ボタン

[**ユーザーの作成**] ボタンをクリックすると、入力した入力パラメーターが検証されます。 検証エラーがある場合は、それらを修正するように求められます。 または、すべての値が正しい場合は、ユーザーは AD に (指定した OU で) 表示されます。 ツールの実行中、ツールの下部に進行状況バーが表示されます。 進行状況バーがアクティブになっている間はアプリケーションを閉じません。
  
ユーザーの作成には時間がかかるため、適切な計画を立ててください。 このプロセスでは、数人のユーザー、および多数のユーザーに対して数時間かかる場合があります。
  
テスト環境の AD ドメインコントローラーにアクセスできない場合でも、指定したユーザーの範囲のいずれかのユーザーとしてログインすることで、ユーザーの作成を検証することができます。 @SipDomain と共に、プレフィックスとサフィックスを使用して、ユーザー名と同じようにしてください。 <em>TestUser20@contoso.net</em>の例を次に示します。
  
> [!NOTE]
> ユーザーが既に存在している場合は、[ユーザーの作成] をクリックすると、構成の変更が反映されます。 
  
#### <a name="delete-users-button"></a>[ユーザーの削除] ボタン

[**ユーザーの削除**] ボタンをクリックすると、タブの入力パラメーターが検証されます。 検証エラーがある場合は、それらを修正するように求められ、入力値が正しく設定されている場合は、指定したテストユーザーが無効になり、Active Directory から削除されます。 この場合も、このタブの下部に進行状況バーが表示され、進行状況バーがアクティブな間はアプリケーションを閉じないでください。
  
> [!NOTE]
> 米国で書式設定された電話番号のみがサポートされます。 電話番号は常にユーザーに割り当てられます。また、User/Tool によって作成されたすべてのユーザーは、既定でエンタープライズ Voip が有効になります。 電話会議の自動応答や UC-PSTN 通話など、電話番号を使用するシナリオでは、この電話番号を使用して、通話を適切にルーティングすることができます。 このため、*すべてのユーザー*は固有の*電話番号*を持っている必要があります。
  
> [!NOTE]
> **ユーザーを2回作成する必要がある場合は、別の市外局番を使用しない限り、または以前のユーザーが無効になっている場合は、このコマンドが失敗します。**
  
> [!IMPORTANT]
> 連絡先を作成する前に、まずユーザーの複製を完了する必要があります (これは [ユーザー] タブから行われます)。 
  
> [!IMPORTANT]
> ユーザーを作成したばかりの場合は、Skype for Business Server のレプリケーションが完了するのを待ってから、データベースのユーザーアカウントを設定する必要があります。 **ユーザーが複製を完了していない場合は、エラーが表示されます。** Skype for Business Server 2015 のフロントエンドサービスが開始された場合、または指定した合計数の最後のユーザーに対して、ユーザーの取得が完了した場合に、ユーザーが複製を完了した日時がわかります。
  
#### <a name="contacts-creation-tab"></a>[連絡先の作成] タブ

このタブでは、ユーザーのテスト用の連絡先情報を指定できます。
  
![[Contents Creation] タブを表示している User Provisioning Tool](../../media/dfb7fdf1-fb97-4e8e-8608-c4995f95dd5b.png)
  
### <a name="to-configure-users-contacts-do-the-following"></a>ユーザーの連絡先を構成するには、次の操作を行います。

1. [**ユーザーごとの連絡先の平均**] フィールドに、各ユーザーの連絡先リストに入力する連絡先の平均数を入力します。
    
2. すべてのユーザーに対して同数の連絡先を作成する場合は、[**固定**] チェックボックスをオンにします。 ユーザー用に作成された連絡先の数を変更する場合は、このチェックボックスをオフにします。
    
3. [**ユーザーごとの平均連絡先グループ**] フィールドに、ユーザーごとの連絡先グループの数を入力します。 この数値は、**ユーザーごとの平均連絡先**よりも小さい必要があります。
    
4. [**フェデレーション/クロスプールの連絡先割合**] フィールドに、0から100までの数値を入力します。 この割合の連絡先は、フェデレーションされたユーザーと共に作成されます。
    
5. [**フェデレーション/クロスプールユーザープレフィックス**] フィールドに、ローカルユーザーの連絡先リストに追加されるフェデレーションユーザーのユーザー名を指定します。
    
6. [**フェデレーション/クロスプールユーザー Sip ドメイン**] フィールドで、フェデレーションされたユーザーの SIP ドメイン名を指定します。
    
7. [**ユーザー作成**] タブで、情報が正しいことを確認します。 連絡先は、[ユーザー作成] タブの値から作成されます。
    
8. [**連絡先の作成**] をクリックして、連絡先の作成を開始します。 このプロセスは数分かかることがあります。 完了すると、"操作が正常に完了しました" というメッセージが表示されたダイアログボックスが表示されます。 [ユーザー作成] タブから作成されたユーザーとしてログオンして作成された連絡先を確認できます。
    
> [!NOTE]
> このツールは、連絡先を作成した後、ターゲットプール内のすべてのフロントエンドサーバーを再起動します。 この操作によって作成された連絡先の数によっては、フロントエンドサーバーが起動するまでに時間がかかる場合があります。 
  
#### <a name="distribution-list"></a>配布リスト

Skype for Business Server 2015 ストレスおよびパフォーマンスツールは、Skype for Business 2015 クライアントで配布リスト (DL) の展開機能をシミュレートすることができます。 ユーザープロビジョニングツールで DL の展開を有効にしない場合は、この手順をスキップできます。
  
![[Distribution List Creation] タブを表示している User Provisioning Tool](../../media/4b689306-70c4-4569-9842-15c73f038eb6.png)
  
[配布リスト] タブでは、ストレスとパフォーマンスツールが配布リストの展開機能に使用する Dl を作成できます。 DLs を作成する前に、ForestPrep 実行を含む、Skype for Business Server 2015 を展開する必要があります。 これを行わない場合、DL 属性は AD スキーマには存在しないため、このツールでは Dl を作成できません。
  
### <a name="to-configure-distribution-lists"></a>配布リストを構成するには:

1. [**配布リストの数**] フィールドに、作成する dl の合計数を指定します (ここでは、ユーザーの数が2倍の値から開始することをお勧めします)。
    
2. [**配布リストのプレフィックス**] フィールドに、作成するすべての dl に含まれるプレフィックス ( *testdl*など) を入力します。 つまり、100 Dl では、DL 名は次のようになります。 testDL0、testDL1、testDL99 になります。
    
3. [ **Dist. リストの最小メンバー**数] フィールドに、各 DL に含めるユーザーの最小数を入力します。
    
4. [ **Dist. リストの最大メンバー**数] フィールドに、各 DL に追加するユーザーの最大数を入力します。
    
#### <a name="create-distribution-lists-button"></a>[配布リストの作成] ボタン

[配布リストの作成] をクリックすると、ツールによって Active Directory が照会され、プレフィックスと番号が一致する配布リストが既に存在するかどうかが確認されます。 このツールでは、まだ存在していない Dl が作成されます。 新しく作成された配布リストにメンバーを追加するときは、[ユーザー作成] タブで指定された範囲からユーザーを選びます。
  
#### <a name="location-info-service-config-tab"></a>[所在地情報] サービス構成タブ

Skype for Business Server 2015 ストレスおよびパフォーマンスツールは、位置情報サービスのためのダミー構成ファイルを生成することもできます。 通常、位置情報サービスは、サーバーのパフォーマンスに大きな影響を与えないことに注意してください。 
  
![[Location Info Service Config] タブを表示している User Provisioning Tool](../../media/227662a2-e0c3-4e34-ab54-5f1459344f30.png)
  
この機能をテストする場合は、フォームの値を入力して、[LIS 構成ファイルの生成] ボタンをクリックします。これは作成されます。CSV ファイル:
  
- LIS_Subnet
    
- LIS_Switches
    
- LIS_Ports
    
- LIS_WAP
    
これらのファイルを LIS データベースにインポートするには、次の PowerShell コマンドレットを使用します。
  
- Set-CsLisSubnet
    
- Set-CsLisSwitch
    
- Set-CsLisPort
    
- Set-CsWirelessAccessPoint
    
## <a name="configure-user-profile"></a>ユーザープロファイルを構成する
<a name="BKMK_UserProfile"> </a>

ユーザー作成ツールを使用してユーザーを作成した後、Skype for Business Server 2015 ロード構成ツール (UserProfileGenerator) を使用して、ユーザープロファイルを構成できます。
  
### <a name="running-the-skype-for-business-server-2015-load-configuration-tool"></a>Skype for Business Server 2015 のロード構成ツールの実行

ロード構成ツール (UserProfileGenerator) を起動し、タブを入力します。 このツールは、シミュレーションの実行に必要なクライアントコンピューターごとにディレクトリを作成します。 各クライアントディレクトリには、Skype for Business Server 2015 応力とパフォーマンスツール (LyncPerfTool) を起動するためのスクリプトが用意されています。 以下のセクションでは、Skype for Business Server 2015 のロード構成ツールの各タブのフィールドに入力する方法の例を示します。
  
> [!IMPORTANT]
> ロード構成ツール (UserProfileGenerator) で使用されるユーザー固有の値は、プールの Skype for Business Server 2015 ユーザー作成ツール (Userプロビジョニングツール) で指定した値と一致する必要があります。 
  
#### <a name="common-configuration-tab"></a>[共通の構成] タブ

ロード構成ツールの [**共通の構成**] タブを以下に示します。 次の手順で説明するように、[共通の構成] タブのフィールドに入力します。
  
![[Common Configuration] タブを表示している [User Provisioning] タブ](../../media/c25df343-3550-47fb-88e0-29194338fee2.png)
  
1. [**使用可能なマシン数**] フィールドに、ストレスとパフォーマンスツール (LyncPerfTool) を実行するために使用するコンピューターの数を入力します。 シミュレートするすべての4500ユーザーに1台のコンピューターを用意することをお勧めしますが、この数値は、読み込みレベルを下げるか、ツールの使用可能な機能の一部のみを使用することをお勧めします (読み込みレベルは、[一般的なシナリオ] タブで設定されています)。
    
2. [**ユーザー名のプレフィックス**] フィールドに、すべてのユーザーの [ユーザー名] フィールドのプレフィックスを入力します。 Uniform Resource Identifier (URI) をログインするには、次のようにします。 *Userprefix [ユーザーの開始インデックス...](ユーザー数-1)]@User ドメイン*(たとえば、myUser009@Contoso.com)。
    
3. [**すべてのユーザーのパスワード**] フィールドに、ユーザーの作成時に使用するパスワードを入力します。 このフィールドを空白のままにすると、ユーザー名がパスワードとして設定されます。
    
4. [**ユーザーの開始インデックス**] フィールドに、構成する最初のユーザーのインデックスを入力します。 さまざまな種類またはロードのレベルに対して異なる範囲を構成できますが、構成する範囲に応じて、読み込み構成ツール (UserProfileGenerator) を1回実行する必要があります。
    
5. [**ユーザー**数] フィールドに、構成するユーザーの合計数を入力します。
    
6. [**ユーザードメイン**] フィールドに、SIP URI として使用されているドメインを入力します。 これは、Skype for Business Server 2015 フロントエンドサーバーまたは Standard Edition サーバーにログオンする各ユーザーの SIP URI を作成するために使用され、アカウントドメインとは異なる場合があります。
    
7. [ **Account domain** ] フィールドに、AD DS ドメインのログオンを入力します。
    
8. [ **MPOP** percent (複数のプレゼンス値)] フィールドに、複数のコンピューターまたはデバイスからログオンしているユーザーのうち、10パーセントなどの値を入力します。
    
9. [ **1 秒あたりのサインイン**数] フィールドに、同時エンドポイントの最大数を入力します。 これは、ユーザーのログインの最大数であり、推奨値は1秒あたりの秒数 (< = 2) です。
    
10. [**アクセスプロキシ] または [プールの FQDN** ] フィールドに、クライアントが接続するサーバーの完全修飾ドメイン名 (FQDN) を入力します。 ユーザーが外部でログオンしている場合は、アクセスプロキシを入力する必要があります。 ユーザーが内部の場合は、エンタープライズプールまたは Standard Edition サーバーの FQDN を指定します。
    
11. [**ポート**] フィールドに、ユーザーが SIP に使用するポートを入力します (既定では 5061)。
    
12. [**外部ネットワークサーバー設定**] フィールドにアクセスプロキシまたはプールの FQDN を入力し、もう一度**ポート**を指定します。 これらの設定は、外部エンドポイントのロードシミュレーションでのみ使用されます。
    
#### <a name="general-scenarios-tab"></a>一般的なシナリオタブ

![[General Scenarios] タブを表示している Load Configuration Tool](../../media/45792e57-4322-4c20-956f-fe480b0de1a7.png)
  
実行する操作を特定したり、無効のままにしたりすることで、各一般的なシナリオのロードレベルとパラメーターを構成できます。 一般的なオプションを次に示します。
  
> [!NOTE]
> すべてのフィールドの読み込みレベル値。ただし、ローカルインフォメーションサービスは、[無効]、[**低**]、[**中**]、[**高**]、または [**カスタム**] に**なり**ます。 設定を選択した状態で無効にした場合は、各クライアントに対して構成が生成されます。 サーバーでサポートされている最大の負荷が高になります。medium は高負荷の 60%低は 30% です。 
  
- **インスタントメッセージ-** これには、ピアツーピアと会議が含まれます。[読み込みレベル] に適切な値を選択します。
    
- **電話会議-** 電話会議*のみ*のロードレベルを選択します。 ピアツーピア通話は、「**ボイスシナリオ**」セクションで後述します。 **[詳細設定**] タブを開いて、MultiView を有効にします。
    
- **アプリケーション共有-** アプリケーション共有の読み込みレベルを選択します。
    
- **データの共同作業-** データの共同作業に使用する読み込みレベルを選択します。これには、データ会議が含まれます。
    
- **配布リストの展開-**[**詳細設定**] ボタンをクリックして、ユーザー作成ツールの [DL] タブで構成された同じ値のフィールドに入力します (userプロビジョニングツール .exe)。 読み込みレベルを選択します。
    
- **アドレス帳 Web クエリ-** これは、アドレス帳ファイルのダウンロードではなく、アドレス帳の参照サービスです。 アドレス帳ファイルのダウンロードに対してこれを有効にする場合は、[**詳細**設定] ボタンをクリックして、 **EnableABSDownload**を True に設定します。 Load level の値を指定します。
    
- **応答グループサービス-**[**詳細設定**] ボタンをクリックし、応答グループサービスエージェントをプロビジョニングしたときに既に作成した応答グループの uri を指定します。 少なくとも1つの応答グループを選択する必要があります。 さらに使用するには、返答グループをセミコロンで区切ります。 **RGSUriSuffixStartIndex**と**RGSUriSuffixEndIndex**を実際の値に更新します。 読み込みレベルを選択します。
    
- **位置情報サービス-**[有効] または [無効] のいずれかの読み込みレベルを選択します。
    
> [!NOTE]
> 各シナリオには、その横に詳細ボタンがあります。また、既定の設定のバリエーションを有効にするチェックボックスのセットがあります。 
  
- [*アドホック*] を選択すると、時間を通じて作成される電話会議のシミュレーションがツールによって生成されます。
    
- [*大きな Conf*を選択すると、大規模な会議シナリオがシミュレートされます。
    
-  *外部*ユーザーに対しても、外部ユーザーのシミュレーションを行うことができます。
    
これらのボタンとチェックボックスは、それぞれのシナリオに固有の追加値であり、ストレスとパフォーマンスツールの動作を変更して、カスタマイズできるようにします。
  
[一般的なシナリオ] タブ (Location Information Services を除く) の各シナリオで、[読み込みレベル] の値が**Custom**の場合は、[詳細設定] ダイアログボックスの対応するフィールドを使って、会話の料金が計算されます。 シナリオによってはフィールド名が異なる場合がありますが、フィールドの説明は次のようになります。*注この番号は、ドロップダウンメニューから [カスタム] が選択されている場合にのみ使用*されます。
  
**高**、**中**、**低**の値は、すべてのシナリオのバランスを考慮したユーザーモデルでの、モダリティあたりの会話料金を変更します。 予想される使用状況の違いにより、モダリティあたりのロードレベルを変更する必要がある場合は、カスタム会話レートを使用します。
  
#### <a name="voice-scenarios-tab"></a>[音声シナリオ] タブ

これは、すべての音声関連のシナリオを構成するためのタブです。
  
![Load Configuration Tool の [Voice Scenarios] タブ](../../media/042e406f-5156-4095-a4eb-6298f24bb51f.png)
  
以下のオプションがあります。
  
- **VoIP-**[**詳細設定**] ボタンをクリックして、PhoneAreaCode と locationprofile (dial plan) フィールドの値を追加します。 また、Load Level の値も指定します。 VoIP または UC/PSTN ゲートウェイが有効になっている場合、読み込みレベルを選択すると、公衆交換電話網 (PSTN) を統合通信 (UC) 構成ファイルに生成して、外部通話をシミュレートすることができます。
    
- **UC/PSTN ゲートウェイ-**[読み込みレベル] の値を選択する必要があります。 [無効] 以外のものを選択する場合は、 **[詳細設定**] ボタンをクリックしても、PSTN 市外局番の値を指定する必要があります。 仲介サーバーと PSTN の下にある [**追加**] をクリックします。 市外局番用のルートが構成されていることを確認します。
    
    > [!TIP]
    > Skype for Business コントロールパネルまたは Skype for Business の管理シェルを使用して、ボイスルートの構成を確認できます。 
  
- **会議アテンダント-** Load Level の値を指定します。 無効以外の値を指定すると、**電話番号**フィールドが有効になります。 使用する自動応答の電話番号を入力します。 [**詳細設定**] をクリックし、[ **locationprofile** ] フィールドに値を入力します。
    
- **電話パーキングサービス-** ここでは、読み込みレベルを指定します。
    
- **仲介サーバーと PSTN-** 使用する各仲介サーバーには、独自の PSTN シミュレータが必要です。 シミュレータに使用するクライアントを決めたら、構成済みの PSTN シミュレータでそのコンピューターへの通話をルーティングするために、仲介サーバーを構成します。 [**追加**] ボタンをクリックして、仲介サーバーの値を構成します。
    
    > [!NOTE]
    > 各シナリオには、その横に [詳細設定] ボタンがあります。 [詳細設定] ダイアログボックスには、ストレスとパフォーマンスツールの動作を変更してカスタマイズを有効にする各シナリオに固有の設定が含まれています。 > [ボイスシナリオ] タブの各シナリオで、[読み込みレベル] の値が**Custom**の場合は、[詳細設定] ダイアログボックスの対応するフィールドを使って、会話の料金を計算します。 シナリオによってはフィールド名が異なる場合がありますが、フィールドの説明は次のようになります。*注この番号は、ドロップダウンメニューから [カスタム] が選択されている場合にのみ使用*されます。
  
#### <a name="web-app-tab"></a>[Web アプリ] タブ

![Load Configuration Tool の [Web app] タブ](../../media/505b54ef-8140-4dec-a43e-08091f592b34.png)
  
Web アプリは、フロントエンドサーバーにインストールされているユニファイドコミュニケーション Web API (UCWA) サーバーを通じて、会議シナリオをサポートします。 Web アプリのタブを使用して、web アプリに関連するすべてのシナリオを構成します。 オプションは次のとおりです。
  
- **一般的な Web アプリの設定-**[**追加の設定**] ボタンをクリックして、フロントエンドプール VIP のディレクトリプール仮想 IP (vip) に**ReachTargetServerUrl**を設定します。
    
- **アプリケーション共有-**[レベルの読み込み] の値を選択します。
    
- **データの共同作業-**[レベルの読み込み] の値を選択します。
    
- **インスタントメッセージ-**[レベルの読み込み] の値を選択します。
    
- **音声会議-**[レベルの読み込み] の値を選択します。
    
> [!NOTE]
> 各シナリオには、その横に **[詳細設定**] ボタンがあります。 [詳細設定] ******ダイアログには、ストレスとパフォーマンスツールの動作を変更して > を有効にする各シナリオに固有の値が含まれています。また、読み込みレベルが Custom の場合は、** 既定の代わりに ConversationsPerHour フィールドが使用されます。
  
#### <a name="mobility-tab"></a>[モバイル] タブ

このタブを使用して、すべてのモビリティ関連シナリオを構成します。
  
![Load Configuration Tool の [Mobility] タブ](../../media/30af39c2-50ea-476a-8a56-ce2ddf08517e.png)
  
以下のオプションがあります。
  
- **一般的なモバイル設定**[**追加の設定**] をクリックし、フィールド UcwaTargetServerUrl をディレクタープール仮想 IP (vip) またはフロントエンドプール VIP に設定します。
    
- **プレゼンスと P2P インスタントメッセージング/オーディオ-**[読み込みレベル] の値を選択して、モビリティーシミュレーションを有効にします。
    
> [!NOTE]
> 各シナリオには、その横に **[詳細設定**] ボタンがあります。 [詳細設定] ******ダイアログには、ストレスとパフォーマンスツールの動作を変更して > を有効にする各シナリオに固有の値が含まれています。また、読み込みレベルが Custom の場合は、** 既定の代わりに ConversationsPerHour フィールドが使用されます。
  
#### <a name="summary-tab"></a>[概要] タブ

[概要] タブには、各シナリオで使用するユーザーが表示されます。
  
![Load Configuration Tool の [Summary] タブ](../../media/436fb3f2-d73e-402d-bc6e-e8a6740819d2.png)
  
[概要] タブには、各シナリオで使用するユーザーが表示されます。 
  
[**カスタムユーザー範囲の生成を有効に**する] チェックボックスをオンにして、ユーザー設定の範囲を含むテーブルのシナリオをダブルクリックして、ユーザー番号の範囲を手動で構成することができます。
  
[チェック (Runclient)] は、生成されたバッチファイルで、サインイン速度に対応する遅延を含めるために、**開始時にサインインの遅延を追加**します。 これは、多数のユーザーにサインインするときにサーバーの過負荷を防ぐために役立ちます。
  
[**ファイルの生成**] をクリックし、構成を生成するフォルダーを選択します。 ファイルが正常に作成されると、ダイアログボックスが表示されます。
  
!["Load configuration files generated successfully" というメッセージ ボックス。 そのまま [OK] をクリックします。](../../media/c3c1d4a0-cb44-4837-8124-03354f5d9d8c.png)
  
## <a name="run-lyncperftool"></a>LyncPerfTool を実行する
<a name="BKMK_RunTool"> </a>

Skype for Business Server 2015 応力とパフォーマンスツール (LyncPerfTool) を実行する前に、ユーザー、連絡先、シナリオを作成する必要があります。 これらの操作を実行するためのツールの使用について詳しくは、この記事の「[ユーザーと連絡先を作成](using-the-tool.md#BKMK_CreateUsersAndContacts)し、[ユーザープロファイルを構成](using-the-tool.md#BKMK_UserProfile)する」をご覧ください。 これらのツールを実行すると、必要なパラメーターが含まれるバッチファイルの一部として実行されるストレスとパフォーマンスのツールで実行されるファイルも生成されます。
  
### <a name="running-the-skype-for-business-server-2015-stress-and-performance-tool"></a>Skype for Business Server 2015 のストレスとパフォーマンスのツールを実行する

ロード構成ツール (UserProfileGenerator) は、パフォーマンスカウンターを登録して XML 構成ファイルを読み込むことで、ストレスとパフォーマンスツール (LyncPerfTool) を実行できるバッチファイルを作成します。 バッチファイルは、構成ファイルごとに LyncPerfTool の1つのインスタンスを実行します。 バッチファイルを実行するには、次の手順を実行します。
  
### <a name="run-the-stress-and-performance-test"></a>ストレスとパフォーマンスのテストを実行する

1. 各クライアントコンピューターに LyncPerfTool が含まれているディレクトリに、構成フォルダーとファイルが含まれるフォルダーをコピーします。 (たとえば、1.28 _ 13.16.16 という名前のフォルダーに構成ファイルを生成した場合は、そのフォルダーを、LyncPerfTool が含まれているフォルダーにコピーします。 各クライアントでこの操作を実行します。)
    
2. クライアントフォルダーに移動し、 **Runclient**バッチスクリプトを実行します。 Windows エクスプローラーでバッチファイルをダブルクリックすると、そのクライアントのすべての構成ファイルが実行されます。 次の構文を使用して、クライアントフォルダーからスクリプトを実行することもできます。
    
   ```
   RunClient0.bat "C:\Program Files\Skype for Business Server 2015\LyncStressAndPerfTool\LyncStress" 
   ```

ストレスとパフォーマンスのツールを直接実行するには、コマンドプロンプトを開いて、コマンドラインで次のコマンドを入力します (初めて実行する場合は、このトピックの`regsvr32 /i /n /s LyncPerfToolPerf.dll`後半のメモに示すように、パフォーマンスカウンターを登録してください)。
  
```
LyncPerfTool.exe /file:IM_client0.xml
```

ツールに構成ファイルの値を表示させるには、次`/displayfile`のようにパラメーターを前のコマンドに追加します。
  
```
LyncPerfTool.exe /file:IM_client0.xml /displayfile
```

プロセスを*終了*するには、Ctrl キーを押しながら C キーを押します。
  
> [!NOTE]
> ストレスとパフォーマンスのツールを直接実行する前に、次のコマンドを使用してパフォーマンスカウンターを登録する必要があります。`regsvr32 /i /n /s LyncPerfToolPerf.dll`
  
> [!NOTE]
> 開始するストレスとパフォーマンスのツールのすべてのインスタンスは、通常、1秒あたり1人のユーザーの代わりにユーザーのサインインを開始します。 
  
プールのピークユーザーのサインイン速度は約 12/秒です。 これは、ユーザーがサインインしている間に、12個を超える LyncPerfTool インスタンスを同時に開始しないことを意味します。 1000ユーザーの場合は、1秒あたりのサインインが完了するまで20分ほどかかります。
  
## <a name="interpreting-the-results"></a>結果を解釈する
<a name="BKMK_Interpret"> </a>

Skype for Business Server 2015 のストレスとパフォーマンスのツールには、クライアントの動作を理解するのに役立つ多くのカウンターと、問題が発生しているかどうかが表示されます。
  
### <a name="client-counters"></a>クライアントカウンター

LyncPerfTool の各インスタンスには、カウンターの個別のインスタンスがあります。 各インスタンスには、プロセス ID で名前が付けられます。 クライアントの過負荷が発生する場合は、他の問題が発生する可能性があります。 この問題を回避するには:
  
- クライアントコンピューターの CPU およびメモリ使用量を監視します。 CPU が常に 90% を超えている場合は、ユーザーの数を減らします。
    
- メモリフットプリントが多い場合、ページファイルの領域が不足し始めると、問題が発生する可能性があります。 コミットチャージがコンピューターの制限に達していないことを確認します。 メモリの制限を使用している場合は、ページファイルのサイズを大きくするか、ユーザーの数を減らすことを検討してください。
    
主要なパフォーマンスカウンターの一覧を次に示します。
  
**一般的な情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|分数で費やした時間  <br/> |プロセスが開始されてから経過した時間。  <br/> |
|アクティブなエンドポイント  <br/> |現在サーバーに接続されているエンドポイントの数です。  <br/> |
|失敗したログオン  <br/> |エンドポイントのサインインエラーの合計数です。  <br/> |
|ログオン試行  <br/> |エンドポイントのサインイン試行の合計数です。  <br/> |
|エンドポイントが切断されました  <br/> |切断されたエンドポイントの合計数です。  <br/> |
   
**プレゼンス情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|SetPresence 通話  <br/> |プレゼンス変更の試行回数の合計です。 さまざまな種類のプレゼンス変更については、「SetPresence (プレゼンスの種類) 呼び出しのパフォーマンスカウンター」を参照してください。  <br/> |
|SetPresence の NNN 応答  <br/> |サーバーから受信した nnn 応答コードの合計数です。  <br/> |
|GetPresence 通話  <br/> |プレゼンス要求の取得試行の合計数です。  <br/> |
|GetPresence に対する NNN の応答  <br/> |サーバーから受信した nnn 応答コードの合計数です。  <br/> |
   
**アドレス帳サービス情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|完全なフル/差分ファイルのダウンロードが試行される  <br/> |試行されたフルまたは差分ファイルのダウンロード要求の合計数です。  <br/> |
|ABS フル/差分ファイルのダウンロードに成功しました  <br/> |試行されたフルまたは差分ファイルのダウンロード要求の合計数です。  <br/> |
|アドレス帳 Web クエリサービスに関連するカウンター  <br/> |アドレス帳ファイルのダウンロードに関連するカウンター。  <br/> |
|ABS 呼び出しを実行しました  <br/> |試行されたアドレス帳 Web クエリサービス要求の合計数です。  <br/> |
|ABS 呼び出しに成功しました  <br/> |成功応答コードを返した、アドレス帳 Web クエリサービス要求の合計数です。  <br/> |
|ABS 呼び出しに失敗しました  <br/> |エラー応答コードを返した、アドレス帳 Web クエリサービス要求の合計数です。  <br/> |
   
> [!NOTE]
> このカテゴリには、アドレス帳サービス (ABS) ファイルのダウンロードとアドレス帳の Web クエリサービス要求を監視するために使用されるカウンターが含まれています。 
  
**配布リスト (DL) 情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|通話を発信しました  <br/> |試みた配布リスト展開 (DLX) web サービス要求の合計数。  <br/> |
|通話成功  <br/> |成功した応答コードを返した DLX web サービス要求の合計数です。  <br/> |
|通話失敗  <br/> |エラー応答コードを返した DLX web サービス要求の合計数です。  <br/> |
   

  
> [!NOTE]
> 以下のパフォーマンスカウンターには、これらのシナリオが有効な場合に、仲介サーバー、A/V 会議サーバー、エッジサーバー、応答グループアプリケーション、会議の自動応答など、すべてのボイスオーバー IP (VoIP) 通話の番号が報告されます。 
  
**VoIP の基本情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|アクティブな通話  <br/> |現在進行中の着信/発信音声通話の合計数です。  <br/> |
|通話終了  <br/> |着信/発信の音声通話の合計数は既に終了しています。  <br/> |
|通話拒否  <br/> |拒否された音声通話の合計数です。  <br/> |
|着信/発信通話を発信しました  <br/> |発信した音声通話の合計数。  <br/> |
|確立された着信/発信通話  <br/> |送受信された音声通話の合計数が設定されました。  <br/> |
|通話受信 NNN  <br/> |サーバーから受信した nnn 応答コードの合計数です。  <br/> |
|VoIP パスレート (%)  <br/> |発信された通話合計発信/合計通話が完了しました。  <br/> |
   
**応答グループサービスの通話情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|アクティブな通話  <br/> |応答グループアプリケーションへのアクティブな通話の合計数です。  <br/> |
|通話を発信しました  <br/> |試行された通話の合計数です。  <br/> |
   
**インスタントメッセージング (IM) 通話情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|アクティブな通話  <br/> |進行中の着信/発信インスタントメッセージ通話の合計数です。  <br/> |
|通話終了  <br/> |受信/送信されたインスタントメッセージの通話の合計数が既に終了しています。  <br/> |
|通話受信 NNN  <br/> |サーバーから受信した nnn 応答コードの合計数です。  <br/> |
|受信/送信された IM メッセージ  <br/> |すべてのセッションで受信または送信されたメッセージの合計数です。  <br/> |
|着信/発信通話を発信しました  <br/> |発信したインスタントメッセージ通話の合計数。  <br/> |
|確立された着信/発信通話  <br/> |確立された受信/送信インスタントメッセージの合計数です。  <br/> |
   
**アプリ共有の通話情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|アクティブな通話  <br/> |進行中の着信/送信アプリケーション共有通話の合計数です。  <br/> |
|通話終了  <br/> |受信/送信アプリケーション共有通話の合計数が既に終了しています。  <br/> |
|通話受信 NNN  <br/> |サーバーから受信した nnn 応答コードの合計数です。  <br/> |
|着信/発信通話を発信しました  <br/> |試行された受信/送信アプリケーション共有通話の合計数。  <br/> |
|確立された着信/発信通話  <br/> |確立された受信/送信アプリケーション共有通話の合計数です。  <br/> |
   
**CAA を通話情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|アクティブな通話  <br/> |現在進行中の着信/発信公衆交換電話網 (PSTN) 通話の合計数です。  <br/> |
|通話終了  <br/> |着信/発信された PSTN 通話の合計数は既に終了しています。  <br/> |
|着信/発信通話を発信しました  <br/> |試行された着信/発信の PSTN 通話の合計数。  <br/> |
|確立された着信/発信通話  <br/> |確立された着信/発信 PSTN 通話の合計数です。  <br/> |
   
**会議情報**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|アクティブなインスタントメッセージ会議  <br/> |進行中のインスタントメッセージ会議の合計数です。  <br/> |
|アクティブな音声/ビデオ会議  <br/> |進行中の音声/ビデオ (A/V) 会議の合計数です。  <br/> |
|アクティブなアプリケーション共有会議  <br/> |進行中のアプリケーション共有会議の合計数です。  <br/> |
|参加者の数  <br/> |現在会議に接続されている参加者の合計数です。  <br/> |
|会議のスケジュールエラー  <br/> |会議をスケジュールしようとしたときに発生したエラーの合計数です。  <br/> |
|電話会議に参加できない  <br/> |会議に接続しようとしているときに発生したエラーの合計数です。  <br/> |
   
**UCWA クライアントカウンター**

|**パフォーマンスカウンター**|**説明**|
|:-----|:-----|
|成功した IMMCU の結合の合計数  <br/> |参加したインスタントメッセージ会議の合計数です。  <br/> |
|成功した DMCU 結合の合計数  <br/> |参加した A/V 会議の合計数です。  <br/> |
   

