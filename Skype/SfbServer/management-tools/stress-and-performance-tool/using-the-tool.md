---
title: 2015 Skype for Business Serverパフォーマンス ツールの使用
ms.reviewer: ''
ms.author: v-mahoffman
author: HowlinWolf-92
ms.date: 2/13/2018
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.collection: IT_Skype16
ms.assetid: 93f42230-24a2-418d-9770-bf4670a9d78f
description: Skype for Business Server 2015 Stress and Performance Tool を実行するには、ユーザー、連絡先、およびユーザー プロファイルの両方を管理し、実行するツールを構成してから、ツールによって生成される出力または結果を確認する必要があります。
ms.openlocfilehash: b71148f4fcf26726b530861b147336a1c7b1d12e
ms.sourcegitcommit: 67324fe43f50c8414bb65c52f5b561ac30b52748
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/08/2021
ms.locfileid: "60839849"
---
# <a name="using-the-skype-for-business-server-2015-stress-and-performance-tool"></a>2015 Skype for Business Serverパフォーマンス ツールの使用
 
Skype for Business Server 2015 Stress and Performance Tool を実行するには、ユーザー、連絡先、およびユーザー プロファイルの両方を管理し、実行するツールを構成してから、ツールによって生成される出力または結果を確認する必要があります。
  
2015 年のストレスとパフォーマンス ツールのSkype for Business Server 4 つの領域があります (実行可能ファイルは次LyncPerfTool.exe。
  
- [ユーザーと連絡先の作成](using-the-tool.md#BKMK_CreateUsersAndContacts)
    
- [ユーザー プロファイルの構成](using-the-tool.md#BKMK_UserProfile)
    
- [LyncPerfTool の実行](using-the-tool.md#BKMK_RunTool)
    
- [結果の解釈](using-the-tool.md#BKMK_Interpret)
    
## <a name="create-users-and-contacts"></a>ユーザーと連絡先の作成
<a name="BKMK_CreateUsersAndContacts"> </a>

Skype for Business Server 2015 (SB 2015) ユーザー プロビジョニング ツール (UserProvisioningTool.exe) を使用して、ストレスとパフォーマンステスト用のユーザーと連絡先を作成する必要があります。
  
これは、トピックを読む上で役立つ可能性がある便利な用語の一覧です。
  
- **組織単位** - Active Directory ドメイン サービス (AD DS) 組織単位 (OU)。
    
- **フェデレーション/クロス プール** - 他のインスタント メッセージング (IM) サービスからユーザーと通信できるユーザー。
    
- **配布リスト** - または DLL。 これらは、DS ユーザー ADリストを含む DS 内ADです。 これらのユーザーは、グループ間のコミュニケーションを促進するために使用されます。
    
- **位置情報サービス**- Skype for Business Server 2015 サービスで、電話ごとに有効および構成されている場合に、拡張 911 (E911) サービスの物理的な場所を取得できます。
    
- **米国の 電話** 番号 - 逆引き番号参照 (RNL) の着信呼び出しと発信呼び出しのルーティングに使用される SIP URI に加えて、ユーザーに割り当てられた 電話 番号。
    
### <a name="create-users-and-contacts-by-using-userprovisioningtoolexe"></a>ユーザーと連絡先を使用してユーザーと連絡先を作成UserProvisioningTool.exe

> [!NOTE]
> 開始する前に、このツールを実行するために Domain Admins セキュリティ グループのメンバーとしてログインしている必要があります。 Active Directory ユーザーを作成するつもりなので、これを行う必要があります。 
  
読み込みシミュレーション用のユーザー Skype for Business Server連絡先を作成するには、ユーザー プロビジョニング ツールを使用する必要があります。
  
[Skype for Business Server **ユーザー プロビジョニング** ツール] は、[ストレスとパフォーマンス **Skype for Business Server] パッケージと一緒にインストール** されます。 パッケージ インストーラー (CapacityPlanningTool.msi) が、テストするフロントエンド サーバーまたは Standard Edition サーバーで実行されている必要があります。
  
Skype for Business Server ユーザー プロビジョニング ツールを起動するには、フロントエンド サーバーまたは Standard Edition サーバーでファイル UserProvisioningTool.exe (%InstalledDirectory%LyncStressAndPerfTool\LyncStress) を実行します。
  
> [!IMPORTANT]
> 多数のユーザー (たとえば、10,000 以上) を作成する場合は、次のUserProvisioningTool.exe。 ツールは新しいユーザーを作成して構成する必要ADがあります。 
  
[ユーザー プロビジョニング ツール] が開いたら、[構成] をクリックし、[構成の読み込み] を選択します。 
  
ユーザーと連絡先の構成を開始するには、パッケージに含まれる既定のファイル ("SampleData.xml" と呼ばれる) を読み込SampleData.xml。 これにより、展開に関連付けするために変更する必要があるサンプル データをフィールドに事前設定します。
  
カスタマイズした設定が既に含まれている構成済みの XML ファイルがある場合は、代わりにそのファイルを読み込む必要があります。 以下のセクションで説明するように、ユーザー プロビジョニング ツールのフィールドに入力します。
  
### <a name="to-configure-server-options"></a>サーバー オプションを構成するには、次の手順を実行します。

1. [**フロントエンド プールの FQDN]** フィールドに、Standard Edition サーバーの完全修飾ドメイン名 (FQDN) またはユーザーをホストするフロントエンド プールを入力します。
    
2. [ **ユーザー名のプレフィックス** ] フィールドに、テスト目的でユーザー名をバストするために使用するプレフィックス ("TestUser"など) を入力します。
    
3. [パスワード **] フィールド** に、すべてのテスト ユーザー アカウントで使用するパスワードを入力します。
    
4. [アカウント **ドメイン]** フィールドに、現在のドメインドメインのドメインAD (テスト ユーザーを作成するドメイン) を入力します。
    
5. [組織 **単位] フィールド** に、これらのテスト ユーザーをADドメインの名前を入力します。 (OU が存在しない場合は、作成されます)。
    
6. [エリア **電話]** フィールドに、すべてのテスト ユーザー アカウントで使用する 3 桁のエリア コードを入力します。 選択したエリア コードが、他のユーザーのエリア コードと競合しないことを確認AD。
    
7. テスト ユーザーを **有効にする** 場合は、[音声が有効] チェック ボックスをオンエンタープライズ VoIP。
    
8. [ユーザー **数] フィールド** で、作成するテスト ユーザーの総数を指定します。
    
9. [ **開始インデックス]** フィールドで、ユーザー名プレフィックスの接尾辞として使用される開始番号を指定します (たとえば、プレフィックスは "TestUser"で、最初の名前は次の例では "0" で終わる)。
    
     ![[ユーザー作成] タブを表示するユーザー プロビジョニング ツール。](../../media/591d8280-8979-4a8c-83bc-af126e87bf29.png)
  
#### <a name="create-users-button"></a>[ユーザーの作成] ボタン

[ユーザーの作成] **ボタンを** クリックすると、入力した入力パラメーターが検証されます。 検証エラーが発生した場合は、修正を求めるメッセージが表示されます。 または、すべての値が正しい場合、ユーザーは (指定した OU) ADに表示されます。 ツールの実行時に、ツールの下部に進行状況バーが表示されます。 進行状況バーがアクティブな状態でアプリケーションを閉じない。
  
ユーザーの作成には時間がかかるので、必要に応じて計画してください。 このプロセスには、数人のユーザーが数分から数時間かかる場合があります。多数のユーザーに対して数時間かかります。
  
テスト環境で AD ドメイン コントローラーにアクセスできない場合でも、作成するユーザー範囲のユーザーの 1 人としてログインして、ユーザーの作成を検証できます。 プレフィックスと接尾辞をユーザー名として@sipDomainしてください。 次に例を示します<em>。TestUser20@contoso.net。</em>
  
> [!NOTE]
> ユーザーが既に存在している場合は、[ユーザーの作成] ボタンをクリックすると、構成の変更によってユーザーが更新されます。 
  
#### <a name="delete-users-button"></a>[ユーザーの削除] ボタン

[ユーザーの削除] **ボタンをクリック** すると、タブの入力パラメーターが検証されます。 検証エラーがある場合は、修正を求めるメッセージが表示され、入力値が正しい場合は、指定したテスト ユーザーが無効になり、Active Directory から削除されます。 繰り返しますが、このタブの下部に進行状況バーが表示され、進行状況バーがアクティブな間はアプリケーションを閉じる必要はありません。
  
> [!NOTE]
> サポートされているのは、米国形式の電話番号のみです。 電話は常にユーザーに割り当て、ユーザーによって作成UserProvisioningTool.exeは既定でエンタープライズ VoIPされます。 電話会議や UC-PSTN 通話などの電話番号を使用自動応答、この電話番号を使用して通話を適切にルーティングします。 このため、すべてのユーザー  *に一意*  の電話番号 *が必要です*  。
  
> [!NOTE]
> **ユーザーを 2 回作成する必要がある場合、別のエリア コードを使用しない限り、または以前のユーザーが Disable-CsUser コマンドレットを使用して無効になっている場合は、コマンドは失敗します。**
  
> [!IMPORTANT]
> 連絡先を作成する前に、最初にユーザー レプリケーションを完了する必要があります ([ユーザー] タブから行います)。 
  
> [!IMPORTANT]
> ユーザーを作成したばかりの場合は、レプリケーションが完了し、Skype for Business Serverにユーザー アカウントが設定されるまで待機する必要があります。 **ユーザーがレプリケートを完了していない場合は、エラーが表示されます。** Skype for Business Server 2015 フロントエンド サービスが開始されたかどうか、または指定した総数の最後のユーザーに対して Get-CsUser コマンドレットを正常に実行した場合、ユーザーがレプリケートを完了した時間を確認できます。
  
#### <a name="contacts-creation-tab"></a>[連絡先の作成] タブ

このタブでは、テスト用にユーザーの連絡先の詳細を指定できます。
  
![[コンテンツの作成] タブを表示するユーザー プロビジョニング ツール。](../../media/dfb7fdf1-fb97-4e8e-8608-c4995f95dd5b.png)
  
### <a name="to-configure-users-contacts-do-the-following"></a>ユーザーの連絡先を構成するには、次の操作を行います。

1. [ユーザー **ごとの連絡先の平均** ] フィールドに、各ユーザーの連絡先リストに入力する連絡先の平均数を入力します。
    
2. すべてのユーザー **に同** じ数の連絡先を作成する場合は、[固定] チェック ボックスをオンにします。 ユーザー用に作成された連絡先の数を変更する場合は、そのチェック ボックスをオフにします。
    
3. [ユーザー **ごとの平均連絡先グループ]** フィールドに、ユーザーごとの連絡先グループの数を入力します。 この数は、ユーザーごとの平均連絡先 **より小さくする必要があります**。
    
4. [フェデレーション **/ クロス プールの連絡先の割合** ] フィールドで、0 ~ 100 の数値を指定します。 この割合の連絡先は、フェデレーション ユーザーと一緒に作成されます。
    
5. [ **フェデレーション/クロス** プール ユーザー プレフィックス] フィールドで、ローカル ユーザーの連絡先リストに追加されるフェデレーション ユーザーのユーザー名を指定します。
    
6. [フェデレーション **/クロス プール ユーザー SIP ドメイン** ] フィールドで、フェデレーション ユーザーの SIP ドメイン名を指定します。
    
7. [ **ユーザーの作成]** タブで、情報が正しいか確認します。 連絡先は、[ユーザー作成] タブの値から作成されます。
    
8. [連絡先 **の作成] を** クリックして連絡先の作成を開始します。 このプロセスには数分かかる場合があります。 完了すると、ダイアログ ボックスが表示され、「操作が正常に完了しました」というメッセージが表示されます。 作成された連絡先を検証するには、[ユーザーの作成] タブから作成されたユーザーとしてログオンします。
    
    > [!NOTE]
    > 連絡先が作成されると、このツールはターゲット プール内のすべてのフロント エンド サーバーを再起動します。 この操作によって作成された連絡先の数に応じて、フロント エンド サーバーの起動に時間がかかる場合があります (最大 2 時間)。 
  
#### <a name="distribution-list"></a>配布リスト

2015 Skype for Business Serverパフォーマンス ツールでは、2015 年のクライアントで配布リスト (DL) 拡張Skype for Businessできます。 ユーザー プロビジョニング ツールで DL 展開を有効にしない場合は、この手順を省略できます。
  
![[配布リストの作成] タブを表示するユーザー プロビジョニング ツール。](../../media/4b689306-70c4-4569-9842-15c73f038eb6.png)
  
[配布リスト] タブでは、ストレスとパフォーマンス ツールが配布リスト拡張機能に使用する DLL を作成できます。 DLL を作成する前Skype for Business ServerフォレストPrep の実行を含め、2015 年に展開する必要があります。 これが行われなかった場合、DL 属性は ADスキーマに存在しないので、ツールは DLL を作成できません。
  
### <a name="to-configure-distribution-lists"></a>配布リストを構成するには、次の手順を実行します。

1. [配布 **リストの** 数] フィールドで、作成する DLL の総数を指定します (ここでの推奨事項は、ユーザー数の 2 倍の値で始める方法です)。
    
2. [配布 **リストのプレフィックス]** フィールドに、作成するすべての DLL が持つプレフィックス (testDL など) *を入力します*  。 つまり、100 の DL では、DL 名は testDL0、testDL1、testDL99 までです。
    
3. **[Dist の最小メンバー] フィールド** に、各 DL に入力する最小ユーザー数を入力します。
    
4. **[Dist の最大メンバー] フィールド** に、各 DL に追加するユーザーの最大数を入力します。
    
#### <a name="create-distribution-lists-button"></a>[配布リストの作成] ボタン

[配布リストの作成] ボタンをクリックすると、ツールは Active Directory にクエリを実行して、プレフィックスと番号に一致する配布リストが既に存在しているのを確認します。 ツールは、まだ存在しない DLL を作成します。 これらの新しく作成された配布リストにメンバーを追加する場合は、[ユーザー作成] タブで指定した範囲からユーザーを選択します。
  
#### <a name="location-info-service-config-tab"></a>[位置情報サービスの構成] タブ

2015 Skype for Business Serverおよびパフォーマンス ツールでは、位置情報サービスのダミー構成ファイルを生成することもできます。 位置情報サービスは、通常、サーバーのパフォーマンスに大きな影響を与える点に注意してください。 
  
![[場所情報サービスの構成] タブを表示するユーザー プロビジョニング ツール。](../../media/227662a2-e0c3-4e34-ab54-5f1459344f30.png)
  
この機能をテストする場合は、フォームの値を入力し、[LIS 構成ファイルの生成] ボタンをクリックして、次の.CSV作成します。
  
- LIS_Subnet.csv
    
- LIS_Switches.csv
    
- LIS_Ports.csv
    
- LIS_WAP.csv
    
これらのファイルを LIS データベースにインポートするには、次の PowerShell コマンドレットを使用します。
  
- Set-CsLisSubnet
    
- Set-CsLisSwitch
    
- Set-CsLisPort
    
- Set-CsWirelessAccessPoint
    
## <a name="configure-user-profile"></a>ユーザー プロファイルの構成
<a name="BKMK_UserProfile"> </a>

(ユーザー作成ツールを使用して) ユーザーを作成したら、Skype for Business Server 2015 Load Configuration ツール (UserProfileGenerator.exe) を使用してユーザー プロファイルを構成できます。
  
### <a name="running-the-skype-for-business-server-2015-load-configuration-tool"></a>2015 Skype for Business Server構成ツールの実行

[構成の読み込み] ツール (UserProfileGenerator.exe) を起動し、タブを入力します。 このツールは、シミュレーションを実行する必要があるクライアント コンピューターごとにディレクトリを作成します。 各クライアント ディレクトリには、2015 年のストレスとパフォーマンス ツール (Skype for Business Server) を開始するスクリプトがLyncPerfTool.exe。 以下のセクションでは、2015 年の読み込み構成ツールの各タブのフィールドを入力するSkype for Business Server示します。
  
> [!IMPORTANT]
> 構成の読み込みツール (UserProfileGenerator.exe) で使用されるユーザー固有の値は、プールの Skype for Business Server 2015 ユーザー作成ツール (UserProvisioningTool.exe) で指定された値と一致している必要があります。 
  
#### <a name="common-configuration-tab"></a>[共通の構成] タブ

[ **構成ツールの読み** 込み] の [共通構成] タブを以下に示します。 次の手順で説明するように、[共通構成] タブのフィールドに入力します。
  
![[共通構成] タブを表示する [ユーザー プロビジョニング] タブ。](../../media/c25df343-3550-47fb-88e0-29194338fee2.png)
  
1. [使用可能 **なコンピューターの数]** フィールドに、ストレスとパフォーマンス ツールを実行するために使用するコンピューターの数を入力します (LyncPerfTool.exe)。 シミュレートする 4500 人のユーザーごとに 1 台のコンピューターを使用することをお勧めしますが、負荷レベルを下げるか、ツールの使用可能な機能のサブセットのみを使用する場合は、その数が異なる場合があります ([全般シナリオ] タブで [負荷レベル] が設定されます)。
    
2. [ユーザー **名のプレフィックス] フィールド** に、すべてのユーザーのユーザー名フィールドのプレフィックスを入力します。 Uniform Resource IDENTIFIER (URI) にログインするには、 *UserPrefix[User Start Index...(ユーザー数-1)@Userドメイン*  (たとえば、myUser009@Contoso.com)。
    
3. [すべての **ユーザーのパスワード] フィールド** に、ユーザーの作成時に使用するパスワードを入力します。 このフィールドを空のままにすると、ユーザー名がパスワードとして設定されます。
    
4. [ユーザー **の開始インデックス]** フィールドに、構成する最初のユーザーのインデックスを入力します。 さまざまな種類または負荷レベルに対して異なる範囲を構成できますが、構成する範囲ごとに 1 回、構成ツール (UserProfileGenerator.exe) を実行する必要があります。
    
5. [ユーザー **数] フィールド** に、構成するユーザーの総数を入力します。
    
6. [ユーザー **ドメイン] フィールド** に、SIP URI に使用するドメインを入力します。 これは、Skype for Business Server 2015 フロントエンド サーバーまたは Standard Edition サーバーにログオンする各ユーザーの SIP URI を作成するために使用され、アカウント ドメインとは異なる場合があります。
    
7. [アカウント **ドメイン] フィールド** に、DS ドメイン ログオンAD入力します。
    
8. **[MPOP の割合**] (複数のプレゼンスの割合) フィールドに、複数のコンピューターまたはデバイスからログオンしているユーザーの割合 (たとえば 10%) を指定します。
    
9. [1 秒あたりのサインイン数] (インスタンスごとの) フィールドに、同時エンドポイントの **最大数を入力** します。 これは、ユーザーのログインの最大数であり、推奨されるレートは 1 秒あたり 2 未満 (<=2) です。
    
10. [ **アクセス プロキシ] または [プールの FQDN]** フィールドに、クライアントに接続するサーバーの完全修飾ドメイン名 (FQDN) を入力します。 ユーザーが外部でログオンしている場合は、アクセス プロキシを入力する必要があります。 ユーザーが内部である場合は、サーバープールまたはサーバー Enterprise FQDN をStandard Editionします。
    
11. [ポート **] フィールド** に、ユーザーが SIP に使用するポートを入力します (既定値は 5061 です)。
    
12. [外部 **ネットワーク サーバーサーバー] フィールド設定** アクセス プロキシまたはプールの FQDN を指定し、もう一度 [ポート] を **指定します**。 これらの設定は、外部エンドポイントの読み込みシミュレーションでのみ使用されます。
    
#### <a name="general-scenarios-tab"></a>[全般シナリオ] タブ

![[全般シナリオ] タブを表示する構成ツールの読み込み。](../../media/45792e57-4322-4c20-956f-fe480b0de1a7.png)
  
実行または無効のままにする処理を決定することで、提供される一般的な各シナリオの負荷レベルとパラメーターを構成できます。 一般的なオプションは次のとおりです。
  
> [!NOTE]
> ローカル 情報サービスが無効、低、中、高、またはカスタムのすべてのフィールドの読み込み **レベルの****値**。 [無効] を選択した場合は、クライアントごとに構成が生成されます。 サーバーでサポートされる最大負荷が高い結果になります。medium は高負荷の 60% です。low は 30% です。 
  
- **インスタント メッセージング -** これには、ピアツーピアと会議が含まれます。[読み込みレベル] で適切な値を選択します。
    
- **電話会議 -** 電話会議専用の負荷レベルを選択 *します*  。 ピアツーピア通話は、もう少し後の「音声シナリオ」セクション **で取り組** む予定です。 [詳細設定] **タブを開** き、MultiView を有効にします。
    
- **アプリケーション共有 -** アプリケーション共有の負荷レベルを選択します。
    
- **データコラボレーション -** データ会議を含むデータコラボレーションの負荷レベルを選択します。
    
- **配布リストの拡張 -** [詳細設定 **] ボタンを** クリックし、ユーザー作成ツール (ユーザー作成ツール) の [DL] タブで同じ値を構成したフィールドに入力UserProvisioningTool.exe。 負荷レベルを選択します。
    
- **アドレス帳 Web クエリ -** これは、アドレス帳ファイルのダウンロードではなく、アドレス帳参照サービスです。 アドレス帳ファイルのダウンロードでこれを有効にする場合は、[詳細設定]ボタンをクリックし **、[EnableABSDownload]** を True に設定します。 読み込みレベルの値を指定します。
    
- **応答グループ サービス -** [詳細設定 **] ボタンを** クリックし、応答グループ サービス エージェントのプロビジョニング時に既に作成した応答グループの URI を指定します。 少なくとも 1 つの応答グループを選択する必要があります。 さらに使用するには、応答グループをセミコロンで区切ります。 **RGSUriSuffixStartIndex および** **RGSUriSuffixEndIndex** を実際の値に更新します。 負荷レベルを選択します。
    
- **位置情報サービス -** [有効] または [無効] のいずれかの読み込みレベルを選択します。
    
> [!NOTE]
> 各シナリオには、その横に [詳細設定] ボタンと、既定の設定のバリエーションを有効にする一連のチェック ボックスがあります。 
  
- *アドホックを選択すると*、ツールは 1 時間を通して作成される会議のシミュレーションを生成できます。
    
- 大きな  *Conf を選択*  すると、大規模な会議シナリオがシミュレートされます。
    
-  *外部*  は、外部ユーザーもシミュレートするツールに指示します。
    
これらのボタンとチェック ボックスは、各シナリオに固有の追加の値であり、ストレスとパフォーマンス ツールの動作を変更し、カスタマイズを可能にします。
  
[一般シナリオ] タブ (位置情報サービスを除く) の各シナリオについて、読み込みレベルの値がカスタムの場合は、[詳細設定] ダイアログ ボックスの対応するフィールドを使用して会話速度が計算されます。 フィールド名はシナリオによって異なる場合がありますが、フィールドの説明は次の状態になります。注 この番号は、ドロップダウン メニューから [カスタム] が選択されている場合にのみ  *使用されます*  。
  
値 **High、Medium、****および Low** は、すべてのシナリオのバランスである User Model に沿ってモダリティごとの会話速度を変更します。  予想される使用量の違いによりモダリティごとの負荷レベルを変更する必要がある場合は、カスタム会話レートを使用します。
  
#### <a name="voice-scenarios-tab"></a>[音声シナリオ] タブ

これは、音声関連のすべてのシナリオの構成のタブです。
  
![[構成ツールの読み込み] [音声シナリオ] タブ。](../../media/042e406f-5156-4095-a4eb-6298f24bb51f.png)
  
選択肢は以下のとおりです。
  
- **VoIP -** [詳細設定] **ボタンを** クリックし、PhoneAreaCode フィールドと LocationProfile (ダイヤル プラン) フィールドの値を追加します。 また、読み込みレベルの値も指定します。 VoIP または UC/PSTN ゲートウェイを有効にするための負荷レベルを選択すると、外部通話をシミュレートするために公衆交換電話網 (PSTN) からユニファイド コミュニケーション (UC) 構成ファイルが生成されます。
    
- **UC/PSTN ゲートウェイ -** [読み込みレベル] の値を選択する必要があります。また、[無効] 以外の値を選択すると、[詳細設定] ボタンをクリックして PSTN エリア コードの値を **指定する必要** があります。 仲介 **サーバーと PSTN** の下の [追加] をクリックします。 エリア コード用にルートが構成されていることを確認します。
    
    > [!TIP]
    > [コントロール パネル] または [Skype for Business管理シェルSkype for Businessを使用して、音声ルートの構成を確認できます。 
  
- **会議アテンダント -**[読み込みレベル] の値を指定します。 [無効] 以外の値を指定すると、[電話番号] **フィールドが有効** になります。 使用する電話番号を自動応答入力します。 [詳細設定 **] を** クリックし **、[LocationProfile] フィールドの値を指定** します。
    
- **通話パーキング サービス -** ここでは、負荷レベルを指定します。
    
- **仲介サーバーと PSTN -** 使用する各仲介サーバーには、独自の PSTN シミュレーターが必要です。 シミュレーターに使用するクライアントを決定した後、構成した PSTN シミュレーターで仲介サーバーを構成して、そのコンピューターに通話をルーティングします。 [追加] **ボタンを** クリックして仲介サーバーの値を構成します。
    
    > [!NOTE]
    > 各シナリオには、その横に [詳細設定] ボタンがあります。 [詳細設定] ダイアログ ボックスには、ストレスとパフォーマンス ツールの動作を変更し、カスタマイズを有効にする各シナリオに固有の設定が含まれる。 > [音声シナリオ] タブの各シナリオで、[読み込みレベル]の値が [カスタム] の場合は、[詳細設定] ダイアログ ボックスの対応するフィールドを使用して会話速度が計算されます。 フィールド名はシナリオによって異なる場合がありますが、フィールドの説明は次の状態になります。注 この番号は、ドロップダウン メニューから [カスタム] が選択されている場合にのみ  *使用されます*  。
  
#### <a name="web-app-tab"></a>[Web アプリ] タブ

![[構成ツールの読み込み] [Web アプリ] タブ。](../../media/505b54ef-8140-4dec-a43e-08091f592b34.png)
  
Web アプリは、フロントエンド サーバーにインストールされているユニファイド コミュニケーション Web API (UCWA) サーバーを介した会議シナリオをサポートします。 [Web アプリ] タブを使用して、すべての Web アプリ関連のシナリオを構成します。 オプションは、次のとおりです。
  
- **一般的な Web アプリ 設定 -**[その **他の設定]** ボタンをクリックし **、ReachTargetServerUrl** をフロントエンド プール VIP のディレクトリ プール仮想 IP (VIP) に設定します。
    
- **アプリケーション共有 -** [読み込みレベル] の値を選択します。
    
- **データコラボレーション -** [読み込みレベル] の値を選択します。
    
- **インスタント メッセージング -** [読み込みレベル] の値を選択します。
    
- **音声会議 -** [読み込みレベル] の値を選択します。
    
> [!NOTE]
> 各シナリオには、その横に **[詳細設定** ] ボタンがあります。 高度なダイアログには、ストレスとパフォーマンス ツールの動作を変更し、カスタマイズを有効にする各シナリオに固有の値が含まれています。> Web アプリの各シナリオで、読み込みレベルがカスタムの場合は、既定の代わりに **ConversationsPerHour** フィールドで指定された値が使用されます。
  
#### <a name="mobility-tab"></a>[モビリティ] タブ

このタブを使用して、モビリティ関連のすべてのシナリオを構成します。
  
![[構成ツールの読み込み] [モビリティ] タブ。](../../media/30af39c2-50ea-476a-8a56-ce2ddf08517e.png)
  
ここでのオプションは次のとおりです。
  
- **General Mobility 設定 -**[**追加の設定** をクリックし、フィールド UcwaTargetServerUrl をディレクター プール仮想 IP (VIP) またはフロントエンド プール VIP に設定します。
    
- **プレゼンスと P2P インスタント メッセージング/オーディオ -** モビリティ シミュレーションを有効にするには、[負荷レベル] の値を選択します。
    
> [!NOTE]
> 各シナリオには、その横に **[詳細設定** ] ボタンがあります。 高度なダイアログには、ストレスとパフォーマンス ツールの動作を変更し、カスタマイズを有効にする各シナリオに固有の値が含まれています。> モビリティ シナリオごとに、負荷レベルがカスタムの場合は **、ConversationsPerHour** フィールドで指定された値が既定ではなく使用されます。
  
#### <a name="summary-tab"></a>[概要] タブ

[概要] タブは、各シナリオで使用するユーザーを示します。
  
![[構成ツールの概要] タブを読み込む。](../../media/436fb3f2-d73e-402d-bc6e-e8a6740819d2.png)
  
[概要] タブは、各シナリオで使用するユーザーを示します。 
  
ユーザー番号範囲を手動で構成するには、[カスタム ユーザー範囲の生成を有効にする] チェック ボックスをオンにし、カスタマイズするユーザー範囲がある表のシナリオをダブルクリックします。
  
チェック **(RunClient.bat) サインイン** 速度に対応するために生成されたバッチ ファイルに遅延を含めるには、開始時にサインイン遅延を追加します。 これは、多数のユーザーにサインインするときにサーバーの過負荷を防ぐのに役立ちます。
  
[ **ファイルの生成]** をクリックし、構成を生成するフォルダーを選択します。 ファイルが正常に作成されると、ダイアログ ボックスが表示されます。
  
![[正常に生成された構成ファイルの読み込み] メッセージ ボックス。 [OK] をクリックします。](../../media/c3c1d4a0-cb44-4837-8124-03354f5d9d8c.png)
  
## <a name="run-lyncperftool"></a>LyncPerfTool の実行
<a name="BKMK_RunTool"> </a>

2015 年のストレスとパフォーマンス ツール (Skype for Business Server) を実行する前に、ユーザー、連絡先、シナリオを作成する必要LyncPerfTool.exe。 ツールを使用してこれらのアクションを実行する方法の詳細については、この記事の [「Create Users and Contacts](using-the-tool.md#BKMK_CreateUsersAndContacts) and [Configure User Profile」](using-the-tool.md#BKMK_UserProfile) を参照してください。 これらのツールを実行すると、必要なパラメーターを含むバッチ ファイルの一部として Stress and Performance ツールを使用して実行されるファイルも生成されます。
  
### <a name="running-the-skype-for-business-server-2015-stress-and-performance-tool"></a>2015 Skype for Business Serverパフォーマンス ツールの実行

構成の読み込みツール (UserProfileGenerator.exe) は、パフォーマンス カウンターを登録し、XML 構成ファイルを読み込み、ストレスとパフォーマンス ツール (LyncPerfTool.exe) を実行できるバッチ ファイルを作成します。 バッチ ファイルは、構成ファイルごとに 1 つのインスタンスLyncPerfTool.exe実行します。 バッチ ファイルを実行するには、次の手順を実行します。
  
### <a name="run-the-stress-and-performance-test"></a>ストレスとパフォーマンスのテストを実行する

1. 構成フォルダーと内部のファイルを含むフォルダーを、各クライアント コンピューター上にLyncPerfTool.exeディレクトリにコピーします。 (たとえば、1.28_13.16.16 という名前のフォルダーに構成ファイルを生成した場合は、そのフォルダーを LyncPerfTool.exe を含むフォルダーにコピーします。 各クライアントでこれを行います。
    
2. クライアント フォルダーに移動し **、RunClient バッチ スクリプトを** 実行します。 エクスプローラーでバッチ ファイルをWindowsすると、そのクライアントのすべての構成ファイルが実行されます。 次の構文を使用して、クライアント フォルダーからスクリプトを実行することもできます。
    
   ```console
   RunClient0.bat "C:\Program Files\Skype for Business Server 2015\LyncStressAndPerfTool\LyncStress" 
   ```

ストレスとパフォーマンス ツールを直接実行するには、コマンド プロンプトを開き、コマンド ラインで次のコマンドを入力します (これを初めて実行する場合は、このトピックの後半のメモに示すように、必ずパフォーマンス カウンターを  `regsvr32 /i /n /s LyncPerfToolPerf.dll` 登録してください)。
  
```console
LyncPerfTool.exe /file:IM_client0.xml
```

ツールに構成ファイルの値を表示するには、前のコマンドにパラメーターを含め、次のように  `/displayfile` します。
  
```console
LyncPerfTool.exe /file:IM_client0.xml /displayfile
```

プロセス  *を終了*  するには、Ctrl + C キーを押します。
  
> [!NOTE]
> ストレスとパフォーマンス ツールを直接実行する前に、次のコマンドを使用してパフォーマンス カウンターを登録する必要があります。  `regsvr32 /i /n /s LyncPerfToolPerf.dll`
  
> [!NOTE]
> 開始するストレスとパフォーマンス ツールのすべてのインスタンスは、ユーザーのサインインを直ちに開始します 。通常、1 秒に 1 人のユーザーの割合で行います。 
  
プールのユーザー サインイン率のピークは、1 秒あたり約 12 です。 つまり、ユーザーがまだサインインしている間LyncPerfTool.exe 12 を超えるインスタンスを同時に開始する必要があります。 1000 人のユーザーが 1 秒あたり 1 回で完全にサインインするには、約 20 分かかります。
  
## <a name="interpreting-the-results"></a>結果の解釈
<a name="BKMK_Interpret"> </a>

2015 Skype for Business Server 2015 Stress and Performance Tool には、クライアントが何をしているのか、問題が発生しているのかを理解するのに役立つカウンターが多数含まれています。
  
### <a name="client-counters"></a>クライアント カウンター

実行中のインスタンスLyncPerfTool.exeカウンターのインスタンスが個別に作成されます。 各インスタンスの名前は、プロセス ID によって指定されます。 クライアントがオーバーロードされている場合は、他の問題が発生する可能性があります。 これらの問題を防止するには、次の手順を実行します。
  
- クライアント コンピューターの CPU とメモリ使用量を監視します。 CPU が一貫して 90% を超える場合は、ユーザー数を減らします。
    
- メモリフットプリントが高い場合は、ページ ファイルの領域が使い切れ始める場合に問題が発生する可能性があります。 コミットチャージがコンピューターの制限に達していないか確認します。 メモリ制限を使用している場合は、ページ ファイルのサイズを大きくするか、ユーザー数を減らすことを検討してください。
    
主要なパフォーマンス カウンターの一覧を次に示します。
  
**全般情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|分の時間  <br/> |プロセスが開始された後に費やされた時間。  <br/> |
|アクティブ なエンドポイント  <br/> |サーバーに現在接続されているエンドポイントの数。  <br/> |
|失敗したログオン  <br/> |エンドポイント サインインエラーの総数。  <br/> |
|ログオン試行  <br/> |エンドポイント サインイン試行の総数。  <br/> |
|[切断されたエンドポイント]  <br/> |切断されたエンドポイントの総数。  <br/> |
   
**プレゼンス情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|SetPresence 呼び出し  <br/> |プレゼンス変更の試行の総数。 さまざまな種類のプレゼンスの変更については、「SetPresence (Presence Type) Calls Performance Counter」を参照してください。  <br/> |
|SetPresence の NNN 応答  <br/> |サーバーから受信した nnn 応答コードの総数。  <br/> |
|GetPresence 呼び出し  <br/> |プレゼンス要求の取得試行の総数。  <br/> |
|GetPresence の NNN 応答  <br/> |サーバーから受信した nnn 応答コードの総数。  <br/> |
   
**アドレス帳サービス情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|ABS Full/Delta ファイルのダウンロードが試行されました  <br/> |完全またはデルタ ファイルのダウンロード要求が試行された総数。  <br/> |
|ABS Full/Delta ファイルのダウンロードが成功しました  <br/> |完全またはデルタ ファイルのダウンロード要求が試行された総数。  <br/> |
|アドレス帳 Web クエリ サービス関連のカウンター  <br/> |アドレス帳ファイルのダウンロード関連カウンター。  <br/> |
|ABS WS 呼び出しの試行  <br/> |試行されたアドレス帳 Web クエリ サービス要求の総数。  <br/> |
|ABS WS 呼び出しが成功しました  <br/> |成功した応答コードを返したアドレス帳 Web クエリ サービス要求の総数。  <br/> |
|ABS WS 呼び出しが失敗しました  <br/> |エラー応答コードを返したアドレス帳 Web クエリ サービス要求の総数。  <br/> |
   
> [!NOTE]
> このカテゴリには、アドレス帳サービス (ABS) ファイルのダウンロードとアドレス帳 Web クエリ サービス要求を監視するために使用されるカウンターが含まれます。 
  
**配布リスト (DL) 情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|呼び出しの試行  <br/> |配布リスト拡張 (DLX) Web サービス要求の試行総数。  <br/> |
|呼び出しが成功しました  <br/> |成功した応答コードを返した DLX Web サービス要求の総数。  <br/> |
|呼び出しが失敗しました  <br/> |エラー応答コードを返した DLX Web サービス要求の総数。  <br/> |
   

  
> [!NOTE]
> 以下に示すパフォーマンス カウンターは、仲介サーバー、音声ビデオ会議サーバー、エッジ サーバー、応答グループ アプリケーション、および会議 自動応答 への呼び出しを含む、すべての Voice over IP (VoIP) 呼び出しのレポート番号です。これらのシナリオが有効になっている場合。 
  
**VoIP の基本情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|アクティブな呼び出し  <br/> |現在進行中の着信/発信音声通話の総数。  <br/> |
|呼び出しが終了しました  <br/> |既に終了している着信/発信音声通話の総数。  <br/> |
|通話拒否  <br/> |着信音声通話の総数が減少しました。  <br/> |
|着信/発信呼び出しの試行  <br/> |試行された着信/発信音声通話の総数。  <br/> |
|確立された着信/発信呼び出し  <br/> |確立された着信/発信音声通話の総数。  <br/> |
|受信した NNN の呼び出し  <br/> |サーバーから受信した nnn 応答コードの総数。  <br/> |
|VoIP パス レート (%)  <br/> |確立された呼び出しの合計/合計呼び出しが試行されました。  <br/> |
   
**応答グループ サービス通話情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|アクティブな呼び出し  <br/> |応答グループ アプリケーションに対するアクティブな呼び出しの総数。  <br/> |
|呼び出しの試行  <br/> |試行された呼び出しの総数。  <br/> |
   
**インスタント メッセージング (IM) 通話情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|アクティブな呼び出し  <br/> |継続的な着信/送信インスタント メッセージング通話の総数。  <br/> |
|呼び出しが終了しました  <br/> |既に終了している着信/送信インスタント メッセージング呼び出しの総数。  <br/> |
|受信した NNN の呼び出し  <br/> |サーバーから受信した nnn 応答コードの総数。  <br/> |
|IM メッセージの受信/送信  <br/> |すべてのセッションで受信または送信されたメッセージの総数。  <br/> |
|着信/発信呼び出しの試行  <br/> |試行された着信/送信インスタント メッセージング呼び出しの総数。  <br/> |
|確立された着信/発信呼び出し  <br/> |確立された着信/送信インスタント メッセージ呼び出しの総数。  <br/> |
   
**アプリ共有通話情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|アクティブな呼び出し  <br/> |進行中の着信/送信アプリケーション共有呼び出しの総数。  <br/> |
|呼び出しが終了しました  <br/> |既に終了している着信/送信アプリケーション共有呼び出しの総数。  <br/> |
|受信した NNN の呼び出し  <br/> |サーバーから受信した nnn 応答コードの総数。  <br/> |
|着信/発信呼び出しの試行  <br/> |試行された着信/送信アプリケーション共有呼び出しの総数。  <br/> |
|確立された着信/発信呼び出し  <br/> |確立された着信/送信アプリケーション共有呼び出しの総数。  <br/> |
   
**CAA 通話情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|アクティブな呼び出し  <br/> |現在進行中の公衆交換電話網 (PSTN) 通話の総数。  <br/> |
|呼び出しが終了しました  <br/> |既に終了している着信/発信 PSTN 通話の総数。  <br/> |
|着信/発信呼び出しの試行  <br/> |試行された着信/発信 PSTN 通話の総数。  <br/> |
|確立された着信/発信呼び出し  <br/> |確立された着信/発信 PSTN 通話の総数。  <br/> |
   
**会議情報**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|アクティブ なインスタント メッセージング会議  <br/> |継続的なインスタント メッセージング会議の総数。  <br/> |
|アクティブな音声/ビデオ会議  <br/> |進行中の音声/ビデオ (音声ビデオ) 会議の総数。  <br/> |
|アクティブ なアプリケーション共有会議  <br/> |進行中のアプリケーション共有会議の総数。  <br/> |
|参加者数  <br/> |現在会議に接続されている参加者の総数。  <br/> |
|会議スケジュールの失敗  <br/> |会議のスケジュールを設定しようとしている間の失敗の総数。  <br/> |
|会議への参加の失敗  <br/> |電話会議への接続中のエラーの総数。  <br/> |
   
**UCWA クライアント カウンター**

|**パフォーマンス カウンター**|**説明**|
|:-----|:-----|
|成功した IMMCU 参加の総数  <br/> |参加したインスタント メッセージング会議の総数。  <br/> |
|成功した DMCU 参加の総数  <br/> |参加した A/V 会議の総数。  <br/> |
   

