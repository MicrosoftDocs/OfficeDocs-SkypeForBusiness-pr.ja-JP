---
title: Skype for Business Server の通話品質ダッシュボードの展開
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 287f64f5-0f8a-455a-8979-7b34bf0217bb
description: '概要: 通話品質ダッシュボードの展開プロセスについて説明します。 通話品質ダッシュボードは、Skype for Business Server 用のツールです。'
ms.openlocfilehash: d42d735ab5a60ec02ad2e1f4f696908996457c0b
ms.sourcegitcommit: 88a16c09dd91229e1a8c156445eb3c360c942978
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/15/2020
ms.locfileid: "42042264"
---
# <a name="deploy-call-quality-dashboard-for-skype-for-business-server"></a>Skype for Business Server の通話品質ダッシュボードの展開
 
**概要:** 通話品質ダッシュボードの展開プロセスについて説明します。 通話品質ダッシュボードは、Skype for Business Server 用のツールです。
  
## <a name="deployment-overview"></a>展開の概要

通話品質ダッシュボード (CQD) は、次の3つの主要コンポーネントで構成されます。
  
- QoE (Quality of Experience) データがレプリケートおよび格納される**アーカイブデータベース**。
    
- **キューブ**。 Qoe アーカイブデータベースからのデータを集計して、最適化された高速なアクセスを実現します。
    
- **ポータル**。ユーザーは qoe データのクエリとビジュアル化を簡単に実行できます。
    
![CQD コンポーネント](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
QoE アーカイブのセットアッププロセスでは、QoE アーカイブデータベースを作成し、ソース QoE 指標データベースから QoE アーカイブデータベースにデータを移動する SQL Server ストアドプロシージャを展開し、ストアドプロシージャを実行するように SQL Server エージェントジョブを設定します。手続きを定期的に行います。 
  
キューブの展開は、QoE アーカイブが配置されているユーザーから情報を取得し、そのキューブを展開して、定期的にキューブを更新する通常の SQL Server エージェントジョブを設定します。
  
ポータルのインストールによって、各ユーザーのレポート/クエリへの CQD ユーザーのマッピングを格納するリポジトリデータベースが作成されます。 その後、ユーザーが事前に定義されたレポートのセットを表示し、カスタマイズしてキューブのデータを表示する独自のクエリを作成できるようにする、IIS web アプリケーションを設定します。 ポータルのインストールでは、ユーザーがリポジトリおよびキューブにプログラムを使用してアクセスするための Api を公開する2つの追加の web アプリケーションが作成されます。 (これらの Api はダッシュボードによっても内部で使用されます)。
  

|**フェーズ**|**手順**|**役割とグループメンバーシップ**|**ドキュメント**|
|:-----|:-----|:-----|:-----|
|必要なハードウェアとソフトウェアをインストールします。  <br/> |CQD 構成を決定し、インストールを実行する SQL Server を選択します。  <br/> |ローカルの Administrators グループのメンバーであるドメイン ユーザー。  <br/> |「展開」のドキュメントの「インストール前の要件」を参照してください。  <br/> |
|CQD をインストールします。  <br/> |展開ドキュメントに従って MSI を実行します。  <br/> |セットアップを実行するには、インストールアカウントが、ローカルの administrators グループのメンバーであり、監視サーバー上の QoE 指標データベースへの読み取りアクセス権を持っているドメインユーザーである必要があります。  <br/> |「展開」のドキュメントの「アカウントと展開手順」セクション。  <br/> |
|ユーザーアクセスを許可します。  <br/> |ポータルへのユーザー認証を管理するには、IIS 7.0 で導入された URL 承認を使用することをお勧めします。 詳細については、「 [IIS 7.0 URL 承認につい](https://www.iis.net/learn/manage/configuring-security/understanding-iis-url-authorization)て」を参照してください。  <br/> |ローカルの Administrators グループのメンバーであるドメイン ユーザー。  <br/> |「展開」のドキュメントの「ポータルに対するユーザーアクセスを管理する」。  <br/> |
|省略可能: サブネットマッピング情報を指定します。  <br/> |QoE アーカイブデータベースにネットワークとマッピングテーブルを作成します。  <br/> |QoE アーカイブデータベースへの書き込みアクセス権を持つアカウント。  <br/> |ユーザーマニュアルの「サブネット情報の提供」セクション。  <br/> |
   


通話品質ダッシュボードの展開には、インフラストラクチャを設定し、ソフトウェアをインストールする必要があります。 次の手順では、このプロセスの概要を説明します。
  
## <a name="deployment-steps"></a>展開手順

1. CQD のアーカイブデータベースコンポーネントがインストールされるコンピューター (これは SQL Server がインストールされているマシン) に CallQualityDashboard をコピーします。 
    
2. MSI を実行します (Windows は、管理者特権で実行するように求められます)。 
    
3. EULA に同意します。
    
4. 通話品質ダッシュボードコンポーネントに関連するファイルが配置される場所のフォルダーを選択するか、既定の場所をそのまま使用します。
    
5. すべての機能を選択します。
    
6. [QoE アーカイブ構成] ページで、次の情報を入力します。
    
   - **Qoe 指標 SQL Server:** QoE 指標 DB が配置されている SQL Server インスタンスの名前 (これはデータソースになります)。
    
   - **Qoe アーカイブの SQL Server 名:** これは読み取り専用フィールドで、ローカルコンピューターの完全修飾ドメイン名に固定されています。 アーカイブ DB は、ローカルコンピューターにのみインストールできます。
    
   - **Qoe アーカイブ SQL Server インスタンス:** アーカイブ DB を作成する場所のローカル SQL Server インスタンス名。 既定の SQL Server インスタンスを使用する場合は、このフィールドを空白のままにします。 名前付き SQL Server インスタンスを使用するには、インスタンス名を指定します (""\"の後の名前など)。
    
   - **Qoe アーカイブデータベース:** 既定では、このオプションは [新しいデータベースの作成] に設定されています。 アーカイブ DB アップグレードはサポートされていないため、[既存のデータベースを使用する] オプションを使用できるのは、既存のアーカイブデータベースが、インストールするビルドと同じスキーマを持っている場合だけです。
    
   - **データベースファイルディレクトリ:** アーカイブ DB のデータベースファイル (.mdf および .ldf) を配置するパスを指定します。 これは、OS とは別のドライブ (推奨されるハードウェア構成では HDD2) である必要があります。 ファイル名はインストールで固定されているため、競合が発生しないようにするために、ファイルを持たない空のディレクトリを使用することをお勧めします。
    
   - **複数のパーティションを使用します。** 既定では、"複数パーティション" に設定されています。これには、ビジネスインテリジェンスエディションまたは Enterprise edition の SQL Server が必要です。 Standard edition の場合は、[単一パーティション] オプションを選択します。 単一パーティションを使用する場合、キューブ処理パフォーマンスが影響を受ける可能性があることに注意してください。
    
     > [!NOTE]
     > セットアップが完了した後に、[複数のパーティションを使用する] オプションを変更することはできません。 これを変更するには、まず、キューブ機能をアンインストールしてから、コントロールパネルの [変更] オプションを使用して再インストールする必要があります。 
  
   - **パーティションファイルディレクトリ:** QoE アーカイブデータベースのパーティションの配置先のパス。 これは、OS ドライブおよび SQL データベースのログファイルドライブとは別のドライブ (推奨されるハードウェア構成の HDD3) に配置する必要があります。 ファイル名はインストールで固定されているため、競合が発生しないようにするために、ファイルを持たない空のディレクトリを使用することをお勧めします。
    
   - **SQL エージェントジョブユーザー-ユーザー名&amp;パスワード:** SQL Server エージェントジョブの "QoE アーカイブデータ" 手順を実行するために使用されるドメインサービスアカウント名とパスワード (マスクされていない)。これは、ストアドプロシージャを実行して QoE 指標 DB からアーカイブ DB にデータをフェッチします。そのため、このアカウントには QoE 指標 DB への読み取りアクセス権が必要です。 このアカウントには、QoE アーカイブ SQL Server インスタンスにログインする必要もあります)。
    
     > [!NOTE]
     > インストールを成功させるには、SQL Server インスタンスを実行しているアカウント (NT service¥ MSSQLSERVER など) に、上記のディレクトリへのアクセス許可とアクセス許可が必要です。 詳細については、「[データベースエンジンアクセスのファイルシステムのアクセス許可を構成する](https://msdn.microsoft.com/library/jj219062%28v=sql.110%29.aspx)」を参照してください。
  
7. [次へ] をクリックすると、インストーラーは前提条件の確認を実行し、問題が発生した場合は報告します。 前提条件のすべてのチェックに合格すると、インストーラーは [キューブ構成] ページに移動します。 
    
    > [!NOTE]
    > QoE アーカイブ SQL Server インスタンスの SQL Server エージェントサービスが現在実行されていないことを示す警告メッセージがインストーラーに表示される場合は、インストールを続行できますが、インストールの後にインストール後に、SQL エージェントサービスが実行中であることを確認して、スタートアップの種類をに設定してください。自動でスケジュールされたジョブが実行されます。 
  
8. [キューブ構成] ページで、次の情報を入力します。
    
   - **Qoe アーカイブの SQL Server 名:** これは読み取り専用フィールドで、ローカルコンピューターの完全修飾ドメイン名に固定されています。 キューブをインストールできるのは、QoE アーカイブデータベース (メモ) を持つコンピューターのみです。 キューブ自体をリモートコンピューターにインストールすることができます。 下を参照)
    
   - **Qoe アーカイブ SQL Server インスタンス:** QoE アーカイブ DB が配置されている SQL Server インスタンスの名前。 既定の SQL Server インスタンスを指定するには、このフィールドを空白のままにします。 名前付き SQL Server インスタンスを指定するには、インスタンス名を入力します (""\"の後の名前など)。 インストール用に [QoE アーカイブコンポーネント] が選択されている場合、このフィールドには [QoE アーカイブ構成] ページで指定された値が事前に入力されます。
    
   - **キューブ分析サーバー:** キューブの作成先の SQL Server Analysis Services インスタンス名。 これは別のマシンでもかまいませんが、インストールするユーザーは、ターゲットの SQL Server Analysis Services インスタンスのサーバー管理者のメンバーである必要があります。
    
     > [!NOTE]
     >  Analysis Services サーバー管理者のアクセス許可の構成の詳細については、「[サーバー管理者のアクセス許可を付与する (Analysis Services)](https://msdn.microsoft.com/library/ms174561.aspx) 」を参照してください。
  
   - **複数のパーティションを使用します。** 既定では、"複数パーティション" に設定されています。これには、ビジネスインテリジェンスエディションまたは Enterprise edition の SQL Server が必要です。 Standard edition の場合は、[単一パーティション] オプションを選択します。 単一パーティションを使用する場合、キューブ処理パフォーマンスが影響を受ける可能性があることに注意してください。
    
     > [!NOTE]
     >  セットアップが完了した後に、[複数のパーティションを使用する] オプションを変更することはできません。 これを変更するには、まず、キューブ機能をアンインストールしてから、コントロールパネルの [変更] オプションを使用して再インストールする必要があります。
  
   - **キューブユーザー-ユーザー名&amp;のパスワード:** キューブ処理をトリガーする、ドメインサービスのアカウント名とパスワード (マスク)。 インストール用に [QoE アーカイブコンポーネント] が選択されている場合、このフィールドには SQL エージェントジョブユーザーの [アーカイブ構成] ページで指定された値が事前に入力されますが、別のドメインサービスアカウントを指定することをお勧めします。これにより、セットアップで最低限必要な特権。
    
9. [次へ] をクリックすると、もう1回検証が行われ、問題が報告されます。 検証が正常に完了すると、インストーラーが [ポータル構成] ページに移動します。 
    
10. [ポータル構成] ページで、次の情報を入力します。
    
    - **Qoe アーカイブ SQL Server:** QoE アーカイブデータベースが配置されている SQL Server インスタンスの名前。 QoE アーカイブ構成ページおよびキューブ構成ページとは異なり、コンピューター名は固定されておらず、指定する必要があることに注意してください。 インストール用に [QoE アーカイブコンポーネント] が選択されている場合、このフィールドには [QoE アーカイブ構成] ページで指定された値が事前に入力されます。
    
    - **キューブ分析サーバー:** キューブが配置されている場所の SQL Server Analysis Service インスタンス名。 インストール用のキューブコンポーネントが選択されている場合、このフィールドには [キューブの構成] ページで指定された値が事前に入力されています。
    
    - **リポジトリ SQL Server:** リポジトリデータベースを作成する SQL Server インスタンスの名前。 QoE アーカイブデータベースが配置されている SQL Server インスタンスの名前が (他のコンポーネントでは) セットアップで事前に提供されている場合、このフィールドには QoE アーカイブ DB SQL Server インスタンス名が事前に入力されています。 これには、任意の SQL Server インスタンスを指定できます。
    
    - **リポジトリデータベース:** 既定では、オプションは [新しいデータベースの作成] に設定されています。 リポジトリ DB アップグレードはサポートされていないため、[既存のデータベースを使用する] オプションを使用できるのは、既存のリポジトリ DB が、インストールするビルドと同じスキーマを持っている場合だけです。
    
    - **IIS アプリケーションプールのユーザー-ユーザー &amp;名のパスワード:** IIS アプリケーションプールを実行するアカウント。 組み込みシステムアカウントが選択されている場合、[ユーザー名] フィールドと [パスワード] フィールドは淡色表示になります。 これらのフィールドは、ユーザーがドメインサービスアカウント情報を入力できるように、ドロップダウンボックスから [その他] が選択されている場合にのみ有効になります。
    
11. [次へ] をクリックすると、指定された資格情報を使用して SQL Server インスタンスにアクセスできるようにし、そのコンピューターで IIS を使用できることを確認するために、最終ラウンドの検証が行われます。 検証が正常に完了すると、インストーラーはセットアップを続行します。 
    
インストーラーの実行が完了すると、ほとんどの場合、SQL Server エージェントジョブが実行され、QoE データとキューブ処理の初期負荷が発生します。 QoE のデータ量によっては、ポータルの表示に使用できるデータがまだありません。 データ読み込みおよびキューブ処理の状態を確認するには、に`http://<machinename>/CQD/#/Health`移動します。 
> [!NOTE]
> ダウンロードキューブ処理の状態を確認するための URL は大文字と小文字が区別されることに注意してください。 「Health」と入力すると、URL は機能しません。 大文字 H の URL の末尾に ' Health ' を入力する必要があります。 
  
デバッグモードが有効になっている場合は、詳細なログメッセージが表示されます。 デバッグモードを有効にするには、 **%SYSTEMDRIVE%\Program Files\Skype For Business 2015 CQD\QoEDataService\web.config**に移動し、次の行を更新して、値が**True**に設定されるようにします。

```xml
<add key="QoEDataLib.DebugMode" value="True" /> 
```

メインのポータルページにはから`http://<machinename>/CQD`アクセスできます。 
## <a name="managing-user-access-for-the-portal"></a>ポータルのユーザーアクセスを管理する

ポータルへのユーザー認証を管理するには、IIS 7.0 で導入された URL 承認を使用することをお勧めします。 IIS セキュリティの詳細については、「 [iis 7.0 URL 承認](https://www.iis.net/learn/manage/configuring-security/understanding-iis-url-authorization)について」を参照してください。
  
すべての web サイトまたは web アプリケーションは、IIS 全体に対して構成された既定の URL 承認を継承します。これは、通常、"すべてのユーザーを許可する" です。 ポータルへのアクセス権をより厳しくする必要がある場合、管理者は "承認ルール" を編集することで、特定のユーザーグループのみにアクセス権を与えることができます。
  
![呼び出し品質の展開-IIS での承認ルール](../../media/0da80c28-58fe-4aca-94b4-db684389468c.png)
  
> [!NOTE]
> 承認規則アイコンは、ASP.NET セクションの「.NET 認証」と混同しないでください。これは、別の認証メカニズムです。 
  
管理者は、継承された "すべてのユーザーを許可する" ルールを最初に削除する必要があります。 これにより、承認されていないすべてのユーザーがポータルにアクセスするのを防ぐことができます。
  
![CQD を展開する](../../media/fa17ad19-d303-40f8-8324-d13fd67936ab.png)
  
次に、管理者は新しい許可ルールを追加し、ポータルにアクセスするためのアクセス許可を特定のユーザーに付与する必要があります。 ユーザーを管理するために、"CQDPortalUsers" という名前のローカルグループを作成することをお勧めします。
  
![通話品質ダッシュボードの展開](../../media/8cfdc141-ec89-4552-921b-53196f497cbf.png)
  
構成の詳細は、ポータルの物理ディレクトリにある web.config に格納されます。
  
```xml
<?xml version="1.0" encoding="UTF-8"?> <configuration> <system.webServer> <security> <authorization> <remove users="*" roles="" verbs="" /> <add accessType="Allow" roles="CQDPortalUsers" /> </authorization> </security> </system.webServer> </configuration> 
```

次の手順では、CQD のダッシュボードを構成します。 ユーザーが IIS によって認証された後、web ポータルコンテンツにアクセスするには、CQD ディレクトリのファイルアクセス許可を持っている必要があります。 CQD directory プロパティの [セキュリティ] タブで Acl を変更して、個々のユーザーまたはグループを追加することができます。ただし、推奨される方法は、ファイルアクセス許可を変更しないでおくことです。 代わりに、iis のワーカープロセスを使用して、どのユーザーが認証されても CQD ディレクトリにアクセスするように IIS の設定を変更します。 
  
> [!IMPORTANT]
> この設定は、CQD アプリケーションに対してのみ変更することが重要です。この設定は、QoEDataService と QoERepositoryService の2つの API アプリケーションでは使用できません。 
  
## <a name="configuring-file-access-for-the-cqd-dashboard"></a>CQD (ダッシュボード) のファイルアクセスを構成する

1. CQD の構成エディターを開きます。
    
     ![通話品質ダッシュボードの展開](../../media/544056eb-3090-434e-bae6-321c984029fa.png)
  
2. [セクション] で、[ **system.webserver/serverRuntime**] を選択します。
    
     ![通話品質ダッシュボードの展開](../../media/b0af0e56-21b0-45dd-b610-5381b39319d3.png)
  
3. 認証 Ateduseroverride を**Useworkerprocessuser**に変更します。
    
     ![通話品質ダッシュボードの展開-構成エディター](../../media/a7c127f5-9a90-4710-afba-1d1e588efb37.png)
  
4. ページの右側にある [**適用**] をクリックします。
    
## <a name="known-issues"></a>既知の問題

### <a name="the-cqd-shows-no-data-after-deployment"></a>CQD は展開後にデータを表示しません

次のエラーが表示されることがあります。

*キューブに対して実行中にクエリを実行できませんでした。クエリエディターを使用してクエリを変更し、問題があれば修正します。また、キューブがアクセス可能であることを確認してください。*

これは、CQD で使用する前に SQL Server Analysis Services でキューブを処理する必要があることを意味します。 これを解決するには、次の手順を実行します。

1. SQL Management Studio を開き、[ **Analysis Services**] を選択します。

2. **QoECube**オブジェクトを展開し、[ **qoe Metric**] を選択して右クリックし、[**参照**] を選択します。 

    これにより、空のブラウザーが返された場合、キューブはまだ続行されていません。

3. [ **Qoe Metric** angain] を右クリックし、[**処理**] を選択します。

4. 処理が完了したら、オブジェクトをもう一度右クリックして [**参照**] を選択し、ブラウザーページにデータが表示されることを確認します。 


### <a name="users-have-trouble-logging-in-because-installer-fails-to-create-the-correct-settings-in-iis"></a>インストーラーが IIS で適切な設定を作成できなかったため、ユーザーがログインに問題がある

まれに、インストーラーが IIS で適切な設定を作成できない場合があります。 ユーザーが CQD にログインできるようにするには、手動での変更が必要です。 ユーザーがログインに問題がある場合は、次の手順を実行してください。
  
1. IIS マネージャーを開き、[既定の Web サイト] に移動します。
    
     ![通話品質ダッシュボードの展開](../../media/dc6007aa-870b-4d70-867d-32ffd937063b.png)
  
2. [認証] をクリックします。 "Anonymous Authentication"、"ASP.NET Impersonation"、"Form Authentication"、および "Windows Authentication" が以下に示す設定と一致しない場合は、以下の設定に一致するように手動で変更してください。 他のすべての認証メカニズムを無効にする必要があります。
    
     ![通話品質ダッシュボードの展開](../../media/5d9e38fb-8a50-41a2-a423-3ce983a83d0c.png)
  
3. [Windows 認証] の場合は、右側の [詳細設定] をクリックします。
    
     ![通話品質ダッシュボードの展開](../../media/cad29486-df40-4cc9-82f3-bbdaca52d9ca.png)
  
4. [拡張保護] を設定して同意し、[カーネルモード認証を有効にする] ボックスを確認します。
    
     ![通話品質ダッシュボードの展開](../../media/0ab2dda1-0001-4747-8cfc-072e9368b6cb.png)
  
5. 上記の手順を、"Default Web Site" の下にある "CQD"、"QoEDataService"、および "QoERepositoryService" の各エントリに対して繰り返します。
    
HTTP および HTTPS ポートバインドの場合、インストーラーは既定のポート番号でポートバインドを作成します (ポート 80 for HTTP およびポート 443 (HTTPS 用))。 これらのバインドを使用する別の web サイトがコンピューターに存在する場合は、競合が発生し、IIS の動作を予測できません。 この問題を回避する最善の方法は、CQD をインストールする前に、他の web サイトがポート80および443にマップされないようにすることです。 
  
IIS で SSL/TLS を有効にし、HTTP ではなく secure HTTPS を使用してユーザーに接続するように強制するには、次のようにします。
  
1. IIS で Secure Sockets Layer を構成する方法については、「 [iis 7 での Secure Sockets layer の構成](https://technet.microsoft.com/library/cc771438%28v=ws.10%29.aspx)」を参照してください。 完了したら、 `http`を`https`に置き換えます。
    
2. SQL Server 接続で TLS を有効にする方法については、「 [Microsoft 管理コンソールを使用して Sql server のインスタンスの SSL 暗号化を有効にする方法](https://support.microsoft.com/kb/316898/)」を参照してください。
    
## <a name="cube-sync-fails"></a>キューブの同期が失敗する

QoEMetrics には、エンドユーザーのクロックに基づいて無効なレコードが含まれている場合があります。 時間のずれが 60 yrs より大きい場合、キューブのインポートは失敗します。
  
 以下の選択肢を使用して、最小および最大 StartTime/EndTime を確認します。 過去およびほぼ遠くの将来のレコードを検索して削除すると、そのレコードは無視され、同期プロセスが分割されます。
  
- CqdPartitionedStreamView から MIN (StartTime) を選択します。
    
- CqdPartitionedStreamView から MAX (StartTime) を選択します。
    
- CqdPartitionedStreamView から MIN (EndTime) を選択します。
    
- CqdPartitionedStreamView から [最大 (EndTime)] を選択します。
    
## <a name="post-install-tasks"></a>インストール後のタスク

### <a name="importing-buildings-and-networks"></a>建物とネットワークのインポート

CQD をインストールした後、次の構成タスクを実行します。
  
1. 建物の種類を定義する (推奨)
    
2. 建物の所有権の種類を定義する (推奨)
    
3. ネットワークの種類を定義する (高推奨)
    
4. 建物のインポート (推奨)
    
5. サブネットのインポート (推奨)
    
### <a name="define-building-types"></a>建物の種類を定義する

建物の種類は、組織内のさまざまな建物定義または種類を記述するために使用されます。 
  
> [!NOTE]
> この手順はオプションですが、推奨されています。 
  
例
  
- 本社
    
- リモートの Office
    
- ジョイント/ベンチャーの場所
    
  **サンプルの SQL 構文**
  
```SQL
INSERT INTO
[dbo].[CqdBuildingType]
([BuildingTypeId],
[BuildingTypeDesc])
VALUES
(1, 
'Headquarters')   
```

BuildingTypeId パラメーターと BuildingTypeDesc パラメーターは必須です。
  
### <a name="define-building-ownership-types"></a>建物の所有権の種類を定義する

所有権の種類は、所有されている資産とリース資産を区別するために使用されます。
  
> [!NOTE]
> この手順はオプションですが、推奨されています。 
  
例
  
- 非 RE&amp;の Contoso リース
    
- Contoso リース RE&amp;F
    
- Contoso の所有者
    
- 関連リース
    
  **サンプルの SQL 構文**
  
```SQL
INSERT INTO
[dbo].[CqdBuildingOwnershipType]
([OwnershipTypeId],
[OwnershipTypeDesc]
)

VALUES
(1,
'Contoso Owned'
)
```

OwnershipTypeId パラメーターと OwnershipTypeDesc パラメーターは必須です。 
  
### <a name="define-network-names"></a>ネットワーク名を定義する

ネットワークの種類は、組織内のさまざまな種類のネットワークを記述するために使用されます。 これにより、特定のネットワークの種類に対してフィルター処理 (またはフィルター処理) することができます。
  
> [!NOTE]
> ネットワーク名を定義することを強くお勧めしますが、オプションです。 ネットワーク名を定義しない場合は、各 CqdNetwork エントリの BuildingId が0になっていることを確認してください。 
  
例
  
- VPN
    
- 実験
    
  **サンプルの SQL 構文**
  
```SQL
INSERT INTO [dbo].[CqdNetworkName] 
( [NetworkName]
,[NetworkType]
 ) 
VALUES
('VPN','VPN') 
```

NetworkNameID パラメーターと Networknameid パラメーターは必須ですが、NetworkType パラメーターは省略可能ですが、推奨されています。
  
### <a name="import-buildings"></a>建物のインポート

建物のインポートによって、特定の洞察を得ることができます (WiFi/有線で構築するごとに低品質の通話)。 
  
> [!NOTE]
> この手順はオプションですが、推奨されています。 
  
新しい建物をインポートする前に、あらかじめ定義された BuildingKey が指定されている必要があります。 これを行うには、"SELECT MAX (BuildingKey) FROM CqdBuilding" を発行して、現在の値を特定し、結果に1を追加します。
  
 **サンプルの SQL 構文**
  
```SQL
INSERT INTO [dbo].[CqdBuilding] 
( [BuildingKey]
,[BuildingName]
,[BuildingShortName]
,[OwnershipTypeId],
[BuildingTypeId]
)
VALUES
(2, 'Ann Arbor', 'AA', 0, 0)
```

BuildingKey、BuildingName、BuildingShortName、OwnershipTypeId、BuildingTypeId の各パラメーターは必須で、その他のパラメーターは省略可能です。
  
### <a name="import-subnets"></a>サブネットのインポート

建物のインポートによって、特定の洞察を得ることができます (WiFi/有線で構築するごとに低品質の通話)。 
  
> [!NOTE]
> この手順はオプションですが、推奨されています。 
  
サブネットをインポートし、前の手順でインポートした建物にマッピングします。 NetworkName に値を設定しない場合は、この表の各エントリで、Networkname の0が使用されていることを確認してください。
  
 **サンプルの SQL 構文**
  
```SQL
INSERT INTO [dbo].[CqdNetwork] 
([Network]
,[NetworkNameID]
,[BuildingKey]
,[UpdatedDate]
)

VALUES
 ('172.16.254.0',0,1,'2015-11-11')
```

Network パラメーターと UpdatedDate パラメーターは必須であり、その他のパラメーターは省略可能です。
  
### <a name="optional-bssid"></a>省略可能: BSSID

BSSID 情報を入力すると、コントローラーまたは無線による追加の WiFi ストリームの関連付けが提供されます。 これは、作成またはサブネットによるフィルター処理に加えて行います。 
  
 **サンプルの SQL 構文**
  
```SQL
INSERT INTO [dbo].[CqdBssid]
([Ap],
[Bss],
[Building],
[ess],
[phy]
)
VALUES
('AP1','00-00-00-00-00-00','Aruba AP 1','Controller1','bgn')
```

**CqdBssidTable の詳細**

|**CQD に示すように**|**CQDBssid テーブル**|**入力例**|
|:-----|:-----|:-----|
|Ap の NName  <br/> |エレメント  <br/> |AP1  <br/> |
|BBssid  <br/> |BSS  <br/> |00-00-00-00-00-00 (区切られた fformat を使用する必要があります)  <br/> |
|Controller  <br/> |セキュリティ  <br/> |アルバ AP 7  <br/> |
|Device  <br/> |ess  <br/> |Controller1  <br/> |
|Radio  <br/> |phy  <br/> |bgn  <br/> |
   
### <a name="processing-the-imported-data"></a>インポートされたデータの処理

既定では、建物/ネットワークデータをインポートした後は、その時点以降に生成されたレコードにのみ適用されます。 
  
この新しいデータを使用して、以前のレコードすべてにタグ付けするには、次のように CqdUpdateBuilding ストアドプロシージャを実行する必要があります。 
  
最初のレコードの日付を指定します (CqdPartitionedStreamView SQL コマンドからの選択最小 (StartTime) を使用していることを識別します)。明日の終了日は、最後の2つの値に対しては NULL になります。
  
データが stream データに関連付けられると、SSIS キューブはすべてのレコードを再処理する必要があります。 これは、BSSID/ISP データを一括で追加する場合にも適用されます。 "プロセスがいっぱいです" が選択されていることを確認します。
  

