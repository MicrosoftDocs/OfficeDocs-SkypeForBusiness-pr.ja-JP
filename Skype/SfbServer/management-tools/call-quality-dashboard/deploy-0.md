---
title: Skype for Business Server の通話品質ダッシュボードの展開
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 287f64f5-0f8a-455a-8979-7b34bf0217bb
description: '概要: 通話品質ダッシュボードの展開プロセスについて説明します。 通話品質ダッシュボードは、Skype for Business Server のツールです。'
ms.openlocfilehash: 3ab7ea5130b33578169505969ee8f43a73a2ac32
ms.sourcegitcommit: 1a08ec9069332e19135312d35fc6a6c3247ce2d2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/11/2020
ms.locfileid: "41888836"
---
# <a name="deploy-call-quality-dashboard-for-skype-for-business-server"></a>Skype for Business Server の通話品質ダッシュボードの展開
 
**概要:** 通話品質ダッシュボードの展開プロセスについて説明します。 通話品質ダッシュボードは、Skype for Business Server のツールです。
  
## <a name="deployment-overview"></a>展開の概要

通話品質ダッシュボード (CQD) は、次の3つの主要コンポーネントで構成されています。
  
- 環境の品質 (QoE) データが複製および保存される**アーカイブデータベース**。
    
- **キューブ**。 Qoe アーカイブデータベースのデータは、最適化された高速アクセス用に集計されます。
    
- **ポータル**。ユーザーは qoe データのクエリやビジュアル化を簡単に行うことができます。
    
![CQD のコンポーネント](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
QoE アーカイブのセットアッププロセスでは、QoE アーカイブデータベースの作成、ソース QoE メトリックデータベースから QoE アーカイブデータベースへのデータの移動を行う SQL Server ストアドプロシージャの展開、およびストアドプロシージャを実行するための SQL Server エージェントジョブのセットアップが必要になります。手順を定期的に行います。 
  
キューブの展開では、QoE アーカイブが配置されているユーザーからの情報を取得し、キューブを展開して、立方体を定期的に更新する定期的な SQL Server エージェントジョブを設定します。
  
ポータルのインストール CQD ユーザーの各ユーザーのレポート/クエリへのマッピングを保存するリポジトリデータベースを作成します。 次に、ユーザーが事前に定義されたレポートのセットを表示し、独自のクエリを作成してキューブのデータを視覚化するためのダッシュボードである IIS web アプリケーションを設定します。 Portal のインストールでは、リポジトリとキューブにプログラムでアクセスするための Api を公開する2つの追加の web アプリケーションを作成します。 (これらの Api は、ダッシュボードでも内部的に使用されます)。
  

|**段階**|**手順**|**役割とグループ メンバーシップ**|**ドキュメント**|
|:-----|:-----|:-----|:-----|
|必要なハードウェアとソフトウェアをインストールします。  <br/> |CQD 構成を決め、インストールを実行する SQL Server を選びます。  <br/> |ローカルの Administrators グループのメンバーであるドメイン ユーザー。  <br/> |展開ドキュメントの「インストール前の要件」セクションを参照してください。  <br/> |
|CQD をインストールします。  <br/> |展開ドキュメントに従って MSI を実行します。  <br/> |セットアップを実行するには、インストールアカウントが、ローカル管理者グループのメンバーであり、監視サーバー上の QoE 指標データベースへの読み取りアクセス権を持っているドメインユーザーである必要があります。  <br/> |展開ドキュメントの「アカウントと展開手順」セクションを参照してください。  <br/> |
|ユーザーアクセスを許可します。  <br/> |ポータルのユーザー認証を管理するには、IIS 7.0 で導入された URL 承認を使用することをお勧めします。 詳細については、「 [IIS 7.0 の URL 承認につい](https://www.iis.net/learn/manage/configuring-security/understanding-iis-url-authorization)て」を参照してください。  <br/> |ローカルの Administrators グループのメンバーであるドメイン ユーザー。  <br/> |展開ドキュメントのポータルセクションのユーザーアクセスを管理します。  <br/> |
|オプション: サブネットマッピング情報を指定します。  <br/> |QoE アーカイブデータベースのネットワークと構築マッピングテーブルを作成します。  <br/> |QoE アーカイブデータベースへの書き込みアクセス権を持つアカウント。  <br/> |ユーザーマニュアルの「サブネット情報の入力」を参照してください。  <br/> |
   


通話品質ダッシュボードの展開には、インフラストラクチャをセットアップし、ソフトウェアをインストールする必要があります。 次の手順では、プロセスの概要を示します。
  
## <a name="deployment-steps"></a>展開の手順

1. CallQualityDashboard のアーカイブデータベースコンポーネント (SQL Server がインストールされているコンピューター) をインストールするコンピューターに、をコピーします。 
    
2. MSI を実行します (Windows では、管理者特権で実行するように求められます)。 
    
3. 使用許諾契約書に同意します。
    
4. 通話品質ダッシュボードコンポーネントに関連するファイルが保存されているフォルダーを選択するか、既定の場所をそのまま使用します。
    
5. すべての機能を選択します。
    
6. QoE アーカイブ構成ページで、次の情報を入力します。
    
   - **Qoe 指標 SQL Server:** QoE Metrics データベースが配置されている場所の SQL Server インスタンスの名前 (これがデータソースになります)。
    
   - **Qoe アーカイブ SQL Server 名:** これは読み取り専用フィールドで、ローカルコンピューターの完全修飾ドメイン名に固定されています。 アーカイブ DB はローカルコンピューターにのみインストールできます。
    
   - **Qoe アーカイブ SQL Server インスタンス:** アーカイブ DB を作成する場所のローカル SQL Server インスタンス名。 既定の SQL Server インスタンスを使用する場合は、このフィールドは空白のままにします。 名前付きの SQL Server インスタンスを使用するには、インスタンス名を指定します (例\": ")。
    
   - **Qoe アーカイブデータベース:** 既定では、このオプションは [新しいデータベースの作成] に設定されています。 アーカイブ DB アップグレードはサポートされていないため、[既存のデータベースを使用する] オプションは、インストールするビルドと同じスキーマが既存のアーカイブデータベースにある場合にのみ使用できます。
    
   - **データベースファイルディレクトリ:** アーカイブ DB のデータベースファイル (.mdf と .ldf) を配置する場所のパス。 これは、OS とは別のドライブ (HDD2 の推奨ハードウェア構成) にある必要があります。 インストールではファイル名が修正されているため、競合が発生しないようにするために、ファイルを持たない空のディレクトリを使用することをお勧めします。
    
   - **複数のパーティションを使用します。** 既定では、"複数パーティション" に設定されます。これには、Business 知能 edition または Enterprise edition の SQL Server が必要です。 Standard edition の場合、[単一パーティション] オプションを選択します。 単一のパーティションを使用している場合、キューブ処理のパフォーマンスに影響する可能性があることに注意してください。
    
     > [!NOTE]
     > セットアップが完了したら、[複数のパーティションを使用する] オプションを変更することはできません。 この設定を変更するには、最初にキューブ機能をアンインストールしてから、[コントロールパネル] の [変更] オプションを使用して再インストールする必要があります。 
  
   - **パーティションファイルディレクトリ:** QoE アーカイブデータベースのパーティションの配置先のパス。 これは、OS ドライブと SQL データベースのログファイルドライブとは別のドライブ (推奨されるハードウェア構成の HDD3) である必要があります。 インストールではファイル名が修正されているため、競合が発生しないようにするために、ファイルを持たない空のディレクトリを使用することをお勧めします。
    
   - **SQL エージェントジョブユーザー-ユーザー名&amp;のパスワード:** SQL Server エージェントジョブの "QoE アーカイブデータ" 手順を実行するために使用される、ドメインサービスアカウント名とパスワード (マスクされたもの)。これは、ストアドプロシージャを実行して、QoE Metrics db からアーカイブ DB にデータを取得します。このアカウントは、[アカウント] セクションで説明されているように、QoE 指標データベース このアカウントでは、QoE アーカイブ SQL Server インスタンスにログインする必要もあります)。
    
     > [!NOTE]
     > NT service¥ MSSQLSERVER などの SQL Server インスタンスが実行されているアカウントは、インストールを成功させるために、上で示したディレクトリへのアクセス/アクセス許可を持っている必要があります。 詳細については、「[データベースエンジンアクセスのためのファイルシステムアクセス許可の構成](https://msdn.microsoft.com/library/jj219062%28v=sql.110%29.aspx)」を参照してください。
  
7. [次へ] をクリックすると、インストーラーは前提条件の確認を実行し、問題が発生した場合はレポートします。 前提条件の確認がすべて合格すると、インストーラーは [キューブの構成] ページに移動します。 
    
    > [!NOTE]
    > QoE アーカイブ SQL Server インスタンスの SQL Server エージェントサービスが現在実行されていないという警告メッセージが表示された場合は、インストールを続行できますが、インストール後には、SQL エージェントサービスが実行されていることを確認して、[スタートアップの種類] を [スタートアップの種類] に設定する必要があります。自動でスケジュールされたジョブを実行します。 
  
8. [キューブの構成] ページで、次の情報を入力します。
    
   - **Qoe アーカイブ SQL Server 名:** これは読み取り専用フィールドで、ローカルコンピューターの完全修飾ドメイン名に固定されています。 キューブは、QoE アーカイブデータベース (注) があるコンピューターからのみインストールできます。 キューブ自体は、リモートコンピューターにインストールされている可能性があります。 以下を参照)
    
   - **Qoe アーカイブ SQL Server インスタンス:** QoE アーカイブ DB が配置されている SQL Server インスタンスの名前。 既定の SQL Server インスタンスを指定するには、このフィールドを空白のままにします。 名前付きの SQL Server インスタンスを指定するには、インスタンス名 ("\") の後に名前を入力します。 インストール用に QoE アーカイブコンポーネントが選択されている場合、このフィールドには、QoE アーカイブ構成ページで指定した値が事前に入力されます。
    
   - **キューブ分析サーバー:** キューブを作成する場所の SQL Server Analysis Services インスタンス名。 これは異なるコンピューターでもかまいませんが、インストールユーザーは、ターゲット SQL Server Analysis Services インスタンスのサーバー管理者のメンバーである必要があります。
    
     > [!NOTE]
     >  Analysis Services のサーバー管理者権限の設定の詳細については、「[サーバー管理者権限を付与する (Analysis Services)](https://msdn.microsoft.com/library/ms174561.aspx) 」を参照してください。
  
   - **複数のパーティションを使用します。** 既定では、"複数パーティション" に設定されます。これには、Business 知能 edition または Enterprise edition の SQL Server が必要です。 Standard edition の場合、[単一パーティション] オプションを選択します。 単一のパーティションを使用している場合、キューブ処理のパフォーマンスに影響する可能性があることに注意してください。
    
     > [!NOTE]
     >  セットアップが完了したら、[複数のパーティションを使用する] オプションを変更することはできません。 この設定を変更するには、最初にキューブ機能をアンインストールしてから、[コントロールパネル] の [変更] オプションを使用して再インストールする必要があります。
  
   - **キューブユーザー-ユーザー名&amp;のパスワード:** キューブ処理をトリガーするドメインサービスアカウント名とパスワード (マスクされている)。 インストール用に QoE アーカイブコンポーネントが選択されている場合、このフィールドには、SQL Agent ジョブユーザーの [アーカイブの構成] ページで指定された値が事前に入力されますが、別のドメインサービスアカウントを指定することをお勧めします。これには、セットアップが最低限必要な権限。
    
9. [次へ] をクリックすると、もう1回検証が行われ、問題が報告されます。 検証が正常に完了したら、インストーラーは [ポータルの構成] ページに移動します。 
    
10. [ポータルの構成] ページで、次の情報を入力します。
    
    - **Qoe アーカイブ SQL Server:** QoE アーカイブデータベースが配置されている SQL Server インスタンスの名前。 QoE アーカイブ構成ページと [キューブ構成] ページとは異なり、コンピューター名は固定されておらず、提供されている必要があることに注意してください。 インストール用に QoE アーカイブコンポーネントが選択されている場合、このフィールドには、QoE アーカイブ構成ページで指定した値が事前に入力されます。
    
    - **キューブ分析サーバー:** キューブが配置されている SQL Server Analysis Services インスタンスの名前。 インストールのために [キューブコンポーネント] が選択されている場合、このフィールドには [キューブの構成] ページで指定された値が事前に入力されています。
    
    - **リポジトリ SQL Server:** リポジトリデータベースを作成する SQL Server インスタンスの名前。 QoE アーカイブデータベースが配置されている SQL Server インスタンスの名前がセットアップ (その他のコンポーネント) の前に指定されている場合、このフィールドには QoE アーカイブ DB SQL Server インスタンス名が事前に入力されています。 これは、任意の SQL Server インスタンスにすることができます。
    
    - **リポジトリデータベース:** 既定では、このオプションは [新しいデータベースの作成] に設定されます。 リポジトリデータベースのアップグレードはサポートされていないため、[既存のデータベースを使用する] オプションは、インストールするビルドと同じスキーマが既存のリポジトリデータベースにある場合にのみ使用できます。
    
    - **IIS アプリプールユーザー-ユーザー名&amp;パスワード:** IIS アプリケーションプールの実行に必要なアカウント。 組み込みのシステムアカウントが選択されている場合、[ユーザー名] と [パスワード] フィールドは淡色表示されます。 これらのフィールドは、ユーザーがドメインサービスアカウント情報を入力できるように、ドロップダウンボックスから [その他] が選択されている場合にのみ有効になります。
    
11. [次へ] をクリックすると、指定された資格情報を使って SQL Server インスタンスにアクセスできること、およびそのコンピューターで IIS を使用できることを確認するために、最終的な検証が行われます。 検証が正常に完了したら、インストーラーはセットアップを続行します。 
    
インストーラーが完了すると、SQL Server エージェントジョブが実行される可能性が高くなり、QoE データとキューブ処理の最初の読み込みが行われます。 QoE 内のデータの量によっては、ポータルの表示に利用可能なデータがありません。 データ読み込みとキューブの処理の状態を確認するには、に`http://<machinename>/CQD/#/Health`アクセスします。 
> [!NOTE]
> ダウンロードキューブ処理の状態を確認する URL は、大文字と小文字が区別されることに注意してください。 「Health」と入力すると、URL が機能しなくなります。 URL の末尾に大文字の H を入力する必要があります。 
  
デバッグモードが有効になっている場合は、詳細なログメッセージが表示されます。 デバッグモードを有効にするには、 **%SYSTEMDRIVE%\Program Files\Skype For Business 2015 CQD\QoEDataService\web.config**に移動し、次の行を更新して値を**True**に設定します。

```xml
<add key="QoEDataLib.DebugMode" value="True" /> 
```

メインポータルページには、から`http://<machinename>/CQD`アクセスできます。 
## <a name="managing-user-access-for-the-portal"></a>ポータルのユーザーアクセスを管理する

ポータルのユーザー認証を管理するには、IIS 7.0 で導入された URL 承認を使用することをお勧めします。 IIS のセキュリティの詳細については、「 [iis 7.0 の URL 承認](https://www.iis.net/learn/manage/configuring-security/understanding-iis-url-authorization)について」を参照してください。
  
すべての web サイトまたは web アプリケーションは、IIS 全体に対して構成された既定の URL 承認を継承します。これは、通常、"すべてのユーザーを許可する" です。 ポータルへのアクセスを制限する必要がある場合、管理者は、"承認ルール" を編集することで、特定のユーザーグループにのみアクセス権を付与することができます。
  
![通話品質の展開 - IIS の承認ルール](../../media/0da80c28-58fe-4aca-94b4-db684389468c.png)
  
> [!NOTE]
> 承認規則アイコンは、ASP.NET セクションの「.NET 承認」と混同しないようにしてください。これは、承認メカニズムが異なります。 
  
管理者は、継承された "すべてのユーザーの許可" ルールを削除する必要があります。 これにより、認証されていないすべてのユーザーがポータルにアクセスできなくなります。
  
![CQD の展開](../../media/fa17ad19-d303-40f8-8324-d13fd67936ab.png)
  
次に、管理者は新しい許可ルールを追加し、ポータルにアクセスするためのアクセス許可を特定のユーザーに付与する必要があります。 ユーザーを管理するために、"CQDPortalUsers" という名前のローカルグループを作成することをお勧めします。
  
![通話品質ダッシュボードの展開](../../media/8cfdc141-ec89-4552-921b-53196f497cbf.png)
  
構成の詳細は、ポータルの物理ディレクトリにある web.config に保存されています。
  
```xml
<?xml version="1.0" encoding="UTF-8"?> <configuration> <system.webServer> <security> <authorization> <remove users="*" roles="" verbs="" /> <add accessType="Allow" roles="CQDPortalUsers" /> </authorization> </security> </system.webServer> </configuration> 
```

次の手順では、CQD のダッシュボードを構成します。 ユーザーが IIS によって認証された後、web ポータルコンテンツにアクセスするためには、ユーザーは CQD ディレクトリのファイル権限を持っている必要があります。 CQD ディレクトリのプロパティの [セキュリティ] タブで Acl を変更して、個々のユーザーまたはグループを追加することができます。ただし、推奨される方法は、ファイルのアクセス許可をそのままにしておくことです。 代わりに、どのユーザーが認証されたかに関係なく、IIS ワーカープロセスを使用して CQD ディレクトリにアクセスするように、IIS の設定を変更します。 
  
> [!IMPORTANT]
> この設定は、CQD アプリケーションでのみ変更することが重要です。この設定は、QoEDataService と QoERepositoryService の2つの API アプリケーションに対してのみ変更することをお勧めします。 
  
## <a name="configuring-file-access-for-the-cqd-dashboard"></a>CQD (ダッシュボード) のファイルアクセスを構成する

1. CQD の構成エディターを開きます。
    
     ![通話品質ダッシュボードの展開](../../media/544056eb-3090-434e-bae6-321c984029fa.png)
  
2. [セクション] で、[ **system.webserver/serverRuntime**] を選びます。
    
     ![通話品質ダッシュボードの展開](../../media/b0af0e56-21b0-45dd-b610-5381b39319d3.png)
  
3. Processateduseroverride を**Useworkerprocessuser**に変更します。
    
     ![通話品質ダッシュボードの展開 - 構成エディター](../../media/a7c127f5-9a90-4710-afba-1d1e588efb37.png)
  
4. ページの右側にある [**適用**] をクリックします。
    
## <a name="known-issues"></a>既知の問題

### <a name="the-cqd-shows-no-data-after-deployment"></a>CQD の展開後にデータが表示されない

次のエラーが表示されることがあります。

*キューブでの実行中にクエリを実行できませんでした。クエリエディターを使用して、クエリを変更し、問題を修正します。また、キューブがアクセシビリティ対応であることを確認してください。*

これは、CQD で使用する前に、キューブを SQL Server Analysis Services で処理する必要があることを意味します。 これを解決するには、次の手順を実行します。

1. SQL Management Studio を開き、[ **Analysis Services**] を選びます。

2. **QoECube**オブジェクトを展開し、 **qoe メトリック**を選択して右クリックし、[**参照**] を選択します。 

    空のブラウザーが返された場合、そのキューブはまだ続行されていません。

3. [ **Qoe Metric** ] を右クリックして、[**プロセス**] を選びます。

4. 処理が完了したら、もう一度オブジェクトを右クリックし、[**参照**] を選択して、ブラウザーページにデータが表示されることを確認します。 


### <a name="users-have-trouble-logging-in-because-installer-fails-to-create-the-correct-settings-in-iis"></a>インストーラーで IIS の適切な設定の作成に失敗しているために、ユーザーのログインで問題が発生した

まれに、インストーラーが IIS で適切な設定を作成できない場合があります。 ユーザーが CQD にログインできるようにするには、手動で変更する必要があります。 ログイン時に問題が発生する場合は、次の手順に従ってください。
  
1. IIS マネージャーを開いて、[既定の Web サイト] に移動します。
    
     ![通話品質ダッシュボードの展開](../../media/dc6007aa-870b-4d70-867d-32ffd937063b.png)
  
2. [認証] をクリックします。 "Anonymous Authentication"、"ASP.NET Impersonation"、"フォーム認証"、および "Windows 認証" が以下に示す設定と一致しない場合は、以下の設定に合わせて手動で変更します。 その他の認証メカニズムはすべて無効にする必要があります。
    
     ![通話品質ダッシュボードの展開](../../media/5d9e38fb-8a50-41a2-a423-3ce983a83d0c.png)
  
3. "Windows 認証" の場合は、右側の [詳細設定] をクリックします。
    
     ![通話品質ダッシュボードの展開](../../media/cad29486-df40-4cc9-82f3-bbdaca52d9ca.png)
  
4. "拡張保護" を設定して、[カーネルモード認証を有効にする] チェックボックスをオンにして確認します。
    
     ![通話品質ダッシュボードの展開](../../media/0ab2dda1-0001-4747-8cfc-072e9368b6cb.png)
  
5. "既定の Web サイト" の下にある "CQD"、"QoEDataService"、"QoERepositoryService" の各エントリについて、上記の手順を繰り返します。
    
HTTP ポートバインディングと HTTPS ポートバインドの場合、インストーラーは既定のポート番号 (HTTP 用のポート80と HTTPS 用のポート 443) でポートバインディングを作成します。 これらのバインドを使用しているコンピューターに別の web サイトがある場合は、競合が発生し、IIS の動作を予測することはできません。 この問題を回避するには、CQD をインストールする前に、他の web サイトがポート80および443にマップされていないことを確認することをお勧めします。 
  
IIS で SSL/TLS を有効にし、HTTP ではなくセキュリティで保護された HTTPS を使用してユーザーを接続するように強制するには:
  
1. IIS でセキュアソケットレイヤーを構成する方法については、「 [iis 7 でセキュアソケットレイヤーを構成する](https://technet.microsoft.com/library/cc771438%28v=ws.10%29.aspx)」を参照してください。 完了したら、 `http`に`https`置き換えます。
    
2. SQL Server 接続で TLS を有効にする方法については、「 [Microsoft 管理コンソールを使用して Sql server のインスタンスに対して SSL 暗号化を有効にする方法](https://support.microsoft.com/en-us/kb/316898/)」を参照してください。
    
## <a name="cube-sync-fails"></a>キューブの同期が失敗する

QoEMetrics には、エンドユーザーの時計に基づいて無効なレコードが含まれている場合があります。 時刻の傾斜が 60 yrs よりも大きい場合、キューブのインポートは失敗します。
  
 以下の選択肢を使用して、[最小] と [最大] と [終了時刻] を確認します。 過去および非常に遠い未来でレコードを検索して削除すると、そのレコードは無視され、同期プロセスが分割されます。
  
- CqdPartitionedStreamView から MIN (開始時刻) を選びます。
    
- CqdPartitionedStreamView から MAX (開始時刻) を選択します。
    
- CqdPartitionedStreamView から [最小 (EndTime)] を選択します。
    
- CqdPartitionedStreamView から MAX (EndTime) を選ぶ
    
## <a name="post-install-tasks"></a>ポストインストールタスク

### <a name="importing-buildings-and-networks"></a>建物とネットワークのインポート

CQD をインストールした後、次の構成タスクを実行します。
  
1. 建物の種類を定義する (推奨)
    
2. 建物の所有権の種類を定義する (推奨)
    
3. ネットワークの種類を定義する (強く推奨)
    
4. 建物をインポートする (推奨)
    
5. サブネットをインポートする (推奨)
    
### <a name="define-building-types"></a>建物の種類を定義する

建物の種類は、組織内のさまざまな建物の定義や種類を説明するために使用されます。 
  
> [!NOTE]
> この手順は省略可能ですが、お勧めします。 
  
例
  
- 小売
    
- リモート Office
    
- ジョイントベンチャーの場所
    
  **サンプルの SQL 構文**
  
```SQL
INSERT INTO
[dbo].[CqdBuildingType]
([BuildingTypeId],
[BuildingTypeDesc])
VALUES
(1, 
'Headquarters')   
```

BuildingTypeId パラメーターと BuildingTypeDesc パラメーターが必要です。
  
### <a name="define-building-ownership-types"></a>建物の所有権の種類を定義する

所有権の種類は、所有している資産とリースアセットを区別するために使用されます。
  
> [!NOTE]
> この手順は省略可能ですが、お勧めします。 
  
例
  
- Contoso の非 RE&amp;
    
- Contoso のリース&amp;
    
- Contoso 所有者
    
- 子会社専用
    
  **サンプルの SQL 構文**
  
```SQL
INSERT INTO
[dbo].[CqdBuildingOwnershipType]
([OwnershipTypeId],
[OwnershipTypeDesc]
)

VALUES
(1,
'Contoso Owned'
)
```

OwnershipTypeId パラメーターと OwnershipTypeDesc パラメーターが必要です。 
  
### <a name="define-network-names"></a>ネットワーク名を定義する

ネットワークの種類は、組織内のさまざまな種類のネットワークを説明するために使用されます。 これにより、特定のネットワークの種類に対してフィルター処理 (またはフィルター処理) を行うことができます。
  
> [!NOTE]
> ネットワーク名を定義することを強くお勧めしますが、省略可能です。 ネットワーク名を定義しない場合は、各 CqdNetwork エントリの BuildingId が0であることを確認します。 
  
例
  
- VPN
    
- 討論
    
  **サンプルの SQL 構文**
  
```SQL
INSERT INTO [dbo].[CqdNetworkName] 
( [NetworkName]
,[NetworkType]
 ) 
VALUES
('VPN','VPN') 
```

NetworkNameID パラメーターと Networknameid パラメーターは必須ですが、NetworkType パラメーターは省略可能ですが、お勧めします。
  
### <a name="import-buildings"></a>建物をインポートする

建物をインポートすることで、特定のインサイト (WiFi/有線などの建物ごとに低品質の通話) を構築することができます。 
  
> [!NOTE]
> この手順は省略可能ですが、お勧めします。 
  
新しい建物をインポートする前に、あらかじめ定義された BuildingKey を指定しておく必要があります。 そのためには、"SELECT MAX (BuildingKey) FROM CqdBuilding" SQL コマンドを実行して、現在の値を特定し、結果に1を加算します。
  
 **サンプルの SQL 構文**
  
```SQL
INSERT INTO [dbo].[CqdBuilding] 
( [BuildingKey]
,[BuildingName]
,[BuildingShortName]
,[OwnershipTypeId],
[BuildingTypeId]
)
VALUES
(2, 'Ann Arbor', 'AA', 0, 0)
```

BuildingKey、BuildingName、BuildingShortName、OwnershipTypeId、BuildingTypeId の各パラメーターは必須で、その他のパラメーターは省略可能です。
  
### <a name="import-subnets"></a>サブネットをインポートする

建物をインポートすることで、特定のインサイト (WiFi/有線などの建物ごとに低品質の通話) を構築することができます。 
  
> [!NOTE]
> この手順は省略可能ですが、お勧めします。 
  
サブネットをインポートして、最後の手順でインポートした建物にマップします。 NetworkName を入力しないことにした場合は、この表の各エントリで、Networkname として0が使用されていることを確認します。
  
 **サンプルの SQL 構文**
  
```SQL
INSERT INTO [dbo].[CqdNetwork] 
([Network]
,[NetworkNameID]
,[BuildingKey]
,[UpdatedDate]
)

VALUES
 ('172.16.254.0',0,1,'2015-11-11')
```

Network パラメーターと UpdatedDate パラメーターは必須であり、その他のパラメーターは省略可能です。
  
### <a name="optional-bssid"></a>省略可能: BSSID

BSSID 情報を入力すると、コントローラーまたは無線による追加の WiFi ストリームの関連付けができます。 これは、構築またはサブネットによるフィルター処理に加えています。 
  
 **サンプルの SQL 構文**
  
```SQL
INSERT INTO [dbo].[CqdBssid]
([Ap],
[Bss],
[Building],
[ess],
[phy]
)
VALUES
('AP1','00-00-00-00-00-00','Aruba AP 1','Controller1','bgn')
```

**CqdBssidTable の詳細**

|**CQD に示されているように、**|**CQDBssid テーブル**|**入力の例**|
|:-----|:-----|:-----|
|Ap 名  <br/> |絶対  <br/> |AP1  <br/> |
|BBssid  <br/> |BSS  <br/> |00-00-00-00-00-00 (区切り文字形式を使用する必要があります)  <br/> |
|官  <br/> |建物  <br/> |アルバ AP 7  <br/> |
|Device  <br/> |ess  <br/> |Controller1  <br/> |
|・  <br/> |phy  <br/> |(bgn)  <br/> |
   
### <a name="processing-the-imported-data"></a>インポートしたデータの処理

既定では、建物/ネットワークデータをインポートした後は、その時点以降に生成されたレコードのみに適用されます。 
  
この新しいデータで、前のすべてのレコードにタグを付けるには、次のように CqdUpdateBuilding ストアドプロシージャを実行する必要があります。 
  
最初のレコードの日付を指定します (Select MIN (StartTime) FROM CqdPartitionedStreamView SQL コマンドを使用していることを確認します)。明日の終了日を指定して、最後の2つの値に対して NULL を返します。
  
データがストリームデータと関連付けられたら、SSIS キューブですべてのレコードを再処理する必要があります。 これは、BSSID/ISP データを一括で追加する場合にも適用されます。 "処理がいっぱいです" が選択されていることを確認します。
  

