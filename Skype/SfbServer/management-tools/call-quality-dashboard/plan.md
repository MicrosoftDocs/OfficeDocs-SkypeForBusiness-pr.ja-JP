---
title: Skype for Business Server の通話品質ダッシュボードの計画
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: cc2fbf41-a7e0-4ef8-a939-47bc42da5529
description: '概要: 通話品質ダッシュボードを計画する際に考慮すべき点について学習します。'
ms.openlocfilehash: 6a1fc39dd26f6c4e9e455babcecb124888629179
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/12/2021
ms.locfileid: "49803177"
---
# <a name="plan-for-call-quality-dashboard-for-skype-for-business-server"></a>Skype for Business Server の通話品質ダッシュボードの計画 
 
**概要:** 通話品質ダッシュボードを計画する際に考慮する必要がある点について学習します。
  
## <a name="overview-of-the-skype-for-business-server-call-quality-dashboard"></a>Skype for Business Server 通話品質ダッシュボードの概要

Skype for Business Server 通話品質ダッシュボード (CQD) は、Skype for Business Server の監視サーバーの Quality of Experience データベース上のレポート層です。 CQD では、Microsoft SQL Server Analysis Services を使用して、集計の使用状況と通話品質情報を提供し、データセットのフィルタリングとピボットを行います。 CQD の機能は次のとおりです。
  
- **CQD の QoE アーカイブ コンポーネントを介した QoE データのアーカイブ ストレージ。** QoE アーカイブ コンポーネントは、監視サーバーが可能な期間よりもずっと長い期間 QoE データを保存できます。 これにより、一度に最大 7 か月間のデータの傾向とレポートを作成し、データがある限りレポート ウィンドウをスライドできます。
- **Analysis Services の機能と速度を使用したMicrosoft SQL Server分析。** CQD は、Microsoft SQL Analysis Services を利用して、分析キューブを介してダッシュボードを強化する高速な概要、フィルター、ピボット機能を提供します。 レポートの実行速度とデータをドリルダウンする機能により、分析時間が大幅に短縮されます。
- **通話品質レポート用に最適化された新しいデータ スキーマ。** キューブには、音声品質のレポートおよび調査用に設計されたスキーマがあります。 ポータル ユーザーは、QoE 指標データベース スキーマが必要なビューにマップする方法を見つけ出すのではなく、レポート タスクに集中できます。 QoE アーカイブとキューブの組み合わせにより、CQD を介したレポートと分析の複雑さを軽減する抽象化が提供されます。 QoE アーカイブ データベース スキーマには、展開固有のデータを設定してデータの全体的な値を向上できるテーブルも含まれています。
- **組み込みのレポート デザイナーとイン place レポート編集。** ポータル コンポーネントには、通話品質方法論の後にモデル化されたいくつかの組み込みレポートが付属しています。 ポータル ユーザーは、ポータルの編集機能を使用してレポートを変更し、新しいレポートを作成できます。
- **レポート構造および分析キューブ データへの Web API アクセス。** ダッシュボード レポート フレームワークは、キューブからのデータを表示する唯一の方法ではありません。 CQD には、HTML と JavaScript を使用して CQD Web API からデータを取得し、データをカスタム形式でレンダリングする例がいくつか示されています。 レポート エディターと CQD Web API を組み合わせて使用すると、レポートとカスタム レポート レイアウトを迅速にプロトタイプ作成できます。

> [!NOTE]
> 管理者は [、CQD](https://cqd.teams.microsoft.com) バージョン 3 を使用して Skype for Business Server 2019 を管理できます (管理者の資格情報でログインします)。 これには、ハイブリッド実装と通話データ コネクタ (CDC) の使用が必要です。 CDC [の有効化の詳細については、「Plan Call Data Connector」](/SkypeForBusiness/hybrid/plan-call-data-connector) を参照してください。 CQD バージョン 3 のドキュメントについては、CQD バージョン 3 の詳細については [、「Microsoft Teams](/MicrosoftTeams/turning-on-and-using-call-quality-dashboard) および Skype for Business Online の通話品質ダッシュボードを有効にし、使用する」を参照してください。

## <a name="cqd-design-goals"></a>CQD 設計目標

CQD を使用すると、IT 管理者は集計データを使用して、メディア品質の問題が発生している環境内のフォーカス領域を特定できます。 IT Pro は、さまざまなユーザー グループの統計情報を比較し、傾向とパターンを特定できます。 個々の通話の問題の解決に重点を置いてではなく、特定の環境の多くのユーザーに適用される問題とソリューションを特定します。 
  
## <a name="call-quality-dashboard-components"></a>通話品質ダッシュボード のコンポーネント

通話品質ダッシュボードは、複数のデータベース、Microsoft SQL エージェント のジョブ、プロセス、および Web アプリケーションで構成されています。 Microsoft SQL エージェント ジョブは、QoE 指標データベースから QoE アーカイブ データベースに定期的にデータをコピーし、QoE アーカイブ データベース内のデータを使用してキューブを処理します。 リポジトリ データベースには、ポータルを実行するレポート定義が格納されます。 ポータルは、キューブ データへのブラウザー アクセスを提供します。 
  
QoE アーカイブ データベース、キューブ データベース、およびリポジトリ データベースを含む CQD コンポーネントは、監視サーバーにインストールするか、独自のサーバーにインストールするか、複数のサーバーにインストールできます。 特定のインストール方法は、CQD のパフォーマンス要求と、同じサーバー上の他のプロセスへの影響に依存します。 詳細については、この記事の後半の「CQD のコンポーネントとトポロジ」を参照してください。
  
### <a name="architectural-overview"></a>アーキテクチャの概要

まとめると、CQD には次の要素が必要です。
  
- アーカイブ データベースとリポジトリ データベースの 2 つのデータベース。
    
- 1 つの SSAS キューブで集計データを表示する 
    
- IIS が CQD Web ポータルをホストする
    
![CQD コンポーネント](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
同じ CQD アーキテクチャが Lync Server 2013 と Skype for Business をサポートしています。 
  
### <a name="cqd-and-skype-for-business-vs-lync-2013"></a>CQD と Skype for Business と Lync 2013

 Skype for Business 環境でのみ、次の機能を利用できます。
  
- Wi-Fiの強さのレポートを作成する
    
- Wi-Fiドライバーのレポートの作成
    
- 通話データの評価 
    
## <a name="information-available-through-cqd"></a>CQD で利用可能な情報

CQD では、Skype for Business Server の音声、ビデオ、およびアプリケーション共有ストリームの数と、良好な通話と悪い通話の数、および良好な通話に対する不良通話の比率を表示できます。 ビューは、さまざまな次元でスライスおよびフィルター処理できます。 CQD は、監視サーバーの QoE 指標データベースからデータを描画します。 その後、データは顧客が提供するデータ (ネットワーク サブネットから建物へのマッピングなど) とマージされ、"建物ごとの通話品質" などのレポートを可能にできます。 
  
また、CQD は、ユーザーが "server" と "client" に関するレポート ビューの作成に集中できるよう、"発信者" や "呼び出し先" などの内部 QoE データイジカシーの多くを抽象化します。 通話品質の方法論に従って、CQD は効率的に、低品質な通話のポケットに共通する条件 (通話品質を改善するためのテネトの 1 つ) を特定するのに役立ちます。
  
## <a name="viewing-data-in-cqd"></a>CQD でのデータの表示

CQD データは、CQD ポータルを介して表示し、REST API 呼び出しを介してアクセスできます。
  
### <a name="cqd-portal"></a>CQD ポータル

ポータルは、キューブ内のデータを表示する最速の方法です。 ポータルには、今すぐ使用できる組み込みのレポートがいくつか付属しています。 組み込みレポートは構造化された方法でリンクされ、呼び出しデータの連続する小さいスライスと小さいスライスにユーザーを導きます。 組み込みレポートでは、さまざまなピボット、フィルター、メジャーを持つグラフとテーブルの組み合わせを示して、さまざまな方法でデータを表示することもできます。 ポータルにアクセスする各ユーザーは、自分が変更および共有できる一連のレポートを所有できます。 CQD Web ポータルの使用方法の詳細については、「Skype for Business Server の通話品質ダッシュボードを使用する」 [を参照してください](use.md)。
  
CQD ポータルでサポートされているオペレーティング システム: Windows 8.1、Windows 8、Windows Server 2012 R2、Windows Server 2012、Windows Server 2016 (Skype for Business Server 2019 CQD のみ)。
  
CQD ポータルでサポートされているブラウザー: Internet Explorer 11、Internet Explorer 10、および Internet Explorer 9。
  
### <a name="rest-apis"></a>REST API

キューブ データには、REST API 呼び出しを介してアクセスすることもできます。 REST API 呼び出しで取得したデータは、HTML ページを介してレンダリングできます。 ユーザーは、クエリ速度と CQD の高レベル スキーマを活用しながら、ビジネス ニーズに適したカスタム レポートを作成できます。 API とサンプルの詳細については [、「Skype for Business Server の通話品質ダッシュボードの開発」を参照してください](develop.md)。 
  
## <a name="defining-your-organizations-requirements-for-cqd"></a>CQD に対する組織の要件の定義

CQD は、QoE データ アーカイブを提供し、通話品質データを迅速かつ詳細に分析します。 次のガイドは、CQD を展開する場合と展開する理由を決定するのに役立ちます。
  
### <a name="when-to-deploy-cqd"></a>CQD を展開する場合

 **CQD を展開すると、組織で通話品質の問題が発生しない場合でも、ベースラインの通話品質測定を確立できます。** ベースラインの通話品質測定の確立は重要です。組織ごとに、有線とリモートのワーカーとオフィス ワーカーの組み合わせがWi-Fi異なるので重要です。 通話品質の問題が発生した場合、最新の通話品質測定値を以前の時間間隔と比較できます。 CQD のトレンド機能を使用すると、通話品質の変化を時間の中で簡単に検出できます。
  
 **CQD を展開して、通話品質に影響を与える可能性のある問題領域を事前に見つけることができます。** 組織の平均通話品質が組織が設定した目標を満たす可能性がある場合でも、平均的な指標の背後に隠れている通話品質の問題が発生する可能性があります。 CQD を使用すると、QoEMetrics データベース内の多くのディメンションで、ピボット テーブルに似た通話品質指標の詳細を取得できます。 ピア グループで外れ値を見つけると、通話品質の問題を事前に特定する迅速な方法です。
  
 **組織内に通話品質の問題がある場合は、CQD を展開して、問題のトラブルシューティングに必要な時間を短縮する必要があります。** CQD は、高速なレポートパフォーマンスと動的ドリルダウン機能を提供することで、既存の通話品質調査を簡素化できます。 CQD は、通話品質調査で環境に対する修復の検証を行うさまざまな種類のワークフロー向けです。
  
### <a name="why-deploy-cqd"></a>CQD を展開する理由

 **QoE レポートが 3 か月を超えるデータで発生する必要がある場合は、CQD を展開する必要があります。** QoEMetrics データベースおよび監視サーバー レポートは、少量のデータを保持およびレポートするように設計されています。 QoE メトリックス データベースは高速な挿入用に最適化されるため、大量の呼び出しやデータベースへの競合するレポート アクセスによって、レポートのパフォーマンスが低下する可能性があります。 CQD の QoE アーカイブ データベースは、より長い保持機能を備え、QoE 指標データの 2 番目のコピーを提供します。 ポータルは、一度に最大 7 か月のデータを表示するために最適化され、必要に応じて QoE アーカイブ内のすべてのデータを報告できます。
  
 **カスタム QoE レポートが必要な場合は、CQD を展開する必要があります。** ポータルには、レポートをすばやく簡単に作成およびプロトタイプを作成するためのレポート エディター機能があります。 また、キューブ データにプログラムでアクセスするために REST API を使用できるようにし、HTML/JavaScript または他の多くのフレームワークを使用したカスタム プレゼンテーションを可能にしています。 レポート用のカスタム データ ビューを作成SQL新しいクエリを作成する必要はなくなりました。
  
 **既存の QoE レポート機能が組織に必要な速度または深さを満たしていない場合は、CQD を展開する必要があります。** CQD には、多くの組み込みレポートが付属しています。 レポートはすぐに役に立ち、データを段階的にドリルして各レベルで追加の分析情報を提供する方法を示します。 また、レポート階層は、多数のレポートを論理的な方法で管理するのにも役立ち、より多くのレポートを簡単にアクセスして理解しやすいものにできます。 CQD は、速度と柔軟性を提供するだけでなく、通話品質方法論によって開発されたワークフローにも最適化されています。
  
## <a name="components-and-topologies-for-cqd"></a>CQD のコンポーネントとトポロジ

CQD にはいくつかのコンポーネントが付属し、各コンポーネントの要件とコンポーネント間の関係を理解し、ツールの最も単純で最もパフォーマンスの高い展開を実現するのに役立ちます。 次の表では、各 CQD コンポーネントの依存コンポーネントについて説明します。
  

|**コンポーネント名**|**依存コンポーネント**|
|:-----|:-----|
|QoE アーカイブ  <br/> |Microsoft SQL Server  <br/> |
|キューブ  <br/> |Microsoft SQL Server Analysis Services  <br/> |
|ポータル  <br/> |Microsoft Information Services  <br/> |
|リポジトリ サービス (ポータルインストールの一部)  <br/> |Microsoft SQL Server  <br/> |
   
> [!NOTE]
> QoE アーカイブとキューブの場合、特定の展開オプションにはビジネス インテリジェンスエディションまたはエンタープライズ エディションのサービス がMicrosoft SQL Server。 詳細については、 [以下の「CQD](plan.md#Infrastructure_Req) のインフラストラクチャ要件」セクションを参照してください。
  
![CQD コンポーネント](../../media/a52f2e6c-a4dd-4de3-879c-47295d2366c3.png)
  
### <a name="single-server-configuration"></a>単一サーバー構成

すべての CQD コンポーネントと依存コンポーネントを 1 つのコンピューターにインストールできます。 単一ボックス構成は最も簡単な構成であり、CQD を自己格納型にできます。 CQD では、監視サーバー上の QoE 指標データベースにアクセスする必要があります。 CQD サーバーは、スタンドアロン コンピューター、仮想マシン、またはホスト マシンの使用可能なリソースとパフォーマンス要件に応じて監視サーバーにすることもできます。 
  
インストール時に、インストールを実行するユーザーは、CQD がインストールされるコンピューターで以前にセットアップされた Microsoft SQL Server および Microsoft SQL Server Analysis Services インスタンスを提供するだけで済みます。 詳細については [、Skype for Business Server の通話](deploy-0.md) 品質ダッシュボードの展開を参照してください。
  
### <a name="multiserver-configuration"></a>マルチサーバー構成

マルチサーバー構成では、QoE アーカイブ、キューブ、およびポータルは、すべて異なるコンピューターにインストールできます。 マルチサーバー構成には、主に次の 2 つの用途があります。
  
- 異なるサーバーでの CQD Web ポータルと CQD キューブのホスティング。
    
- "実稼働" ポータルとは別の "開発" ポータルをホストする。 
    
  **異なるコンピューターでの CQD Web ポータルと CQD キューブのホスティング。** CQD ポータルを SQL Server インストールから分離する必要がある組織や、SQL Server インスタンスと SQL Server Analysis Services インスタンスの SQL Server エディションを混在して一致する必要がある組織は、CQD ポータルと CQD キューブを異なるコンピューターにインストールできます。 QoE アーカイブ コンポーネントは、組織が監視サーバーのパフォーマンス制限に達することなく QoE データをアーカイブする持続的な方法を持つ場合にインストールされる唯一の CQD コンポーネントにすることもできます。
  
![単一サーバー CQD](../../media/f65be6f3-6bba-4c3d-b3ae-c05e03551b5b.png)
  
 **"実稼働" ポータルとは別の "開発" ポータルをホストする。** (REST API を介して) 独自のカスタム レポートを開発する組織は、通常のユーザーが通話品質の監視または調査のためにアクセスする追加の (CQD) ポータル インスタンスを実稼働ポータルと共に展開することを好む場合があります。 開発ポータルは、ポータルに対する変更を実稼働環境から切り離します。 追加の Web ポータルは、異なるコンピューター (以下を参照) に展開するか、同じコンピューター上の異なる Web ディレクトリに展開できます (図は示しません)。 CQD セットアップ プロセスでは常に定義済みの Web アプリケーション名を持つ既定の Web サイトに CQD Web ポータルが展開されるので、後者を実現するには、追加の CQD Web ポータルを実稼働マシンに手動でコピーする必要があります。
  
![CQD マルチ サーバーを計画する](../../media/2326e61e-b485-43e6-9f82-145237ba89cf.png)
  
### <a name="supported-topologies"></a>サポートされるトポロジ

CQD は、複数の QoEMetrics データベースのデータをマージしません。これは、複数の Skype for Business Server トポロジが存在し、それぞれが独自の監視サーバーを持つ場合と同様です。 各 CQD インスタンスは、1 つの QoEMetrics データベースをポイントする必要があります。 ただし、CQD はレポートワークロードの大部分を監視サーバーから移動します。このため、Skype for Business Server トポロジごとに 1 つの監視サーバーを展開する必要がある大規模な組織では、すべてのトポロジに対して 1 つの監視サーバーを使用する必要があります。
  
## <a name="infrastructure-requirements-for-cqd"></a>CQD のインフラストラクチャ要件
<a name="Infrastructure_Req"> </a>

CQD は、すべてのコンポーネントと依存コンポーネントを含めて、仮想マシン、単一のマシン、または複数のコンピューターに展開できます。 ソフトウェアおよびハードウェアの最小要件を以下に示します。 データの可用性とクエリのパフォーマンスは、アクティブな Skype for Business Server ユーザーの数とハードウェアと構成に応じて分単位から時間単位で異なることがあります。そのため、パフォーマンスの測定値を以下に示します。
  
|||
|:-----|:-----|
|CQD 2015 の場合 <br/> |  <br/> |
|サポートされているオペレーティング システム   <br/> |Windows Server 2008 R2、Windows Server 2012、Windows Server 2012 R2  <br/> |
|サポートされるSQL Server  <br/> |SQL Server 2012 年、SQL Server 2014 年、SQL Server 2016 年  <br/> |

|||
|:-----|:-----|
|CQD 2019 の場合 <br/> |  <br/> |
|サポートされているオペレーティング システム   <br/> |Windows Server 2016、Windows Server 2019  <br/> |
|サポートされるSQL Server  <br/> |SQL Server 2017、SQL Server 2019  <br/> |
   
CQD は Microsoft SQL Server、Microsoft SQL Server Analysis Services、および Microsoft インターネット インフォメーション サービス を利用します。そのため、CQD のハードウェアおよびソフトウェアの最小要件は、基本的に依存コンポーネントと同じです。 ただし、データの鮮度に関する組織の要件 (組織が生成する QoE データの量の一部に依存) と展開コストに基づいて、追加の展開に関する考慮事項を検討する必要があります。
  
CQD でのデータ処理は、次の 2 つの主要なステージに分かっています。 
  
- QoE アーカイブ プロセス
    
- CQD キューブの処理
    
  **QoE アーカイブ処理。** QoE アーカイブ処理タスクは、監視サーバー上の QoE 指標データベースから QoE アーカイブ データベースにデータをコピーします。 タスクの処理時間のパフォーマンス特性が根本的に異なる 2 つの状況があります。 1 つ目は、CQD の初期インストール後です。 新しいインストール後にタスクを初めて実行すると、QoE アーカイブ処理タスクは QoE 指標データベース内のすべてのデータを QoE アーカイブ データベースにコピーします。 2 つ目は、この最初のラウンド後の定期的な処理です。 QoE アーカイブ処理タスクは 15 分ごとに実行され、QoE 指標データベース内の新しい QoE レコードを処理します。 一般に、最初の処理時間は CQD のインストール時に初めて実行されるだけなので、問題ではありません。 ただし、CQD サーバーのプロビジョニングが重大な場合、このタスクには数時間かかる場合があります。 QoE アーカイブの初期処理時間などについては、次の表を参照してください。
  
  **CQD キューブの処理。** キューブ処理タスクは、QoE アーカイブ データベースのデータをキューブに集約します。 最初のキューブ処理時間とそれ以降のキューブ処理時間は、CQD キューブにSQL Server Analysis Services エディションによって決まります。 Standard Edition を使用する場合、キューブ データが更新されるごとに、使用可能なすべてのデータの完全な処理が常に行われるため、最初のキューブ処理時間と後続のキューブ処理時間との間に違いはありません。 (つまり、QoE アーカイブ データベースのデータ量が増えるほど、キューブの処理時間が増加します)。SQL Server の Business Intelligence Edition と Enterprise Edition ではパーティションがサポートされています。どちらのエディションを使用する場合も、最初の実行だけが QoE アーカイブ データベース内のすべてのデータを処理します。 後続の実行では、タスクが 15 分ごとにトリガーされると、タスクは最後に実行された後に QoE アーカイブ データベースに追加された新しいレコードのみを処理します。 1 日に 1 回、現在の月のデータを含むパーティションに対する完全な処理も実行されます。
  
物理マシンの特性は、CQD のパフォーマンスに影響を与えるだけでなく、他のコンポーネントから利用できるソフトウェア機能にもSQL Serverがあります。 QoE アーカイブ コンポーネントは他のコンポーネントに比べてディスク負荷が高く、キューブ コンポーネントは CPU とメモリを集中的に消費します。 これらの要因はすべて CQD のデータ処理時間の合計に影響し、データの鮮度と可用性に直接影響します。 組織は、組織の個々のニーズに基づいてハードウェアとソフトウェアを決定する必要があります。 
  
### <a name="tested-hardware-configurations"></a>テスト済みハードウェア構成

このセクションでは、環境内に QoEMetrics DB が 1 つ含まれると仮定します。 
  
**コンピューター プロファイル**

|**マシン**|**CPU コア**|**RAM**|**同じディスク上の QoE アーカイブとキューブ**|**QoE アーカイブと SQL一時 DB を同じディスクに保存する**|
|:-----|:-----|:-----|:-----|:-----|
|仮想マシン  <br/> |4   <br/> |7 GB  <br/> |はい  <br/> |必要  <br/> |
|4 コア  <br/> |4   <br/> |20 GB  <br/> |必要  <br/> |いいえ  <br/> |
|8 コア  <br/> |8   <br/> |32 GB  <br/> |必要  <br/> |いいえ  <br/> |
|16 コア  <br/> |16   <br/> |128 GB  <br/> |いいえ  <br/> |いいえ  <br/> |
   
**パフォーマンスの結果**

|**マシン**|**QoE メトリックス DB サイズ**|**SQL パーティション**|**ディスクの種類**|**ストリームの数**|**初期アーカイブ プロセス**|**最初のキューブ 処理**|**後続のアーカイブ プロセス**|**後続のキューブ 処理**|
|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|
|仮想マシン  <br/> |900 MB  <br/> |Single  <br/> |VHD (可変サイズ)  <br/> |0.5 M  <br/> |30 m  <br/> |2 m  <br/> |30 s  <br/> |1 m  <br/> |
|仮想マシン  <br/> |9 GB  <br/> |Single  <br/> |VHD (可変サイズ)  <br/> |5 M  <br/> |4 時間  <br/> |15 m  <br/> |1 m  <br/> |5 m  <br/> |
|仮想マシン  <br/> |9 GB  <br/> |Single  <br/> |VHD (固定サイズ)  <br/> |5 M  <br/> |2 h  <br/> |5 m  <br/> |1 m  <br/> |5 m  <br/> |
|仮想マシン  <br/> |30+ GB  <br/> |Single  <br/> |VHD (固定サイズ)  <br/> |10 M  <br/> |15 h  <br/> |20 m  <br/> |2 m  <br/> |45 m  <br/> |
|8 コア  <br/> |9 GB  <br/> |Single  <br/> |複数のディスク  <br/> |5 M  <br/> |2 h  <br/> |5 m  <br/> |25 s  <br/> |5 m  <br/> |
|8 コア  <br/> |9 GB  <br/> |複数  <br/> |複数のディスク  <br/> |5 M  <br/> |2 h  <br/> |15 m  <br/> |35 s  <br/> |2 m  <br/> |
|8 コア  <br/> |30+ GB  <br/> |Single  <br/> |複数のディスク  <br/> |20 M  <br/> |9 h  <br/> |20 m  <br/> |1 m  <br/> |20 m  <br/> |
|8 コア  <br/> |30+ GB  <br/> |複数  <br/> |複数のディスク  <br/> |20 M  <br/> |9 h  <br/> |30 m  <br/> |2 m  <br/> |2 m  <br/> |
|4 コア  <br/> |200 GB  <br/> |Single  <br/> |複数のディスク  <br/> |125 M  <br/> |6 日以上  <br/> |7 h  <br/> |2 m  <br/> |6 h  <br/> |
|16 コア  <br/> |500 GB  <br/> |複数  <br/> |複数スピンドル  <br/> |250 M  <br/> |8 日  <br/> |2 h  <br/> |2 m  <br/> |10 m  <br/> |
   
\*QoE 指標データベースは、それぞれ 9 か月と 18 か月のデータを持つ必要がありますが、完全のためにここに提供されます。
  
### <a name="service-account-requirements"></a>サービス アカウントの要件

CQD サーバー上の SQL エージェントが QoEArchiveDB へのデータのインポートに使用できるアカウント (QoEMetrics への読み取りアクセス権を持つ) が必要です。
  
QoEArchiveDB からデータを取得するために、SSAS ジョブ用に別のアカウントを構成する必要がある場合があります (これはオプションのプロセスです)。
  
IIS は、通常、ネットワーク サービスをアプリ プール ID として使用しますが、サービス アカウントに構成できます。
  
### <a name="portal-access-control"></a>ポータルアクセス制御

既定では、すべての認証済みユーザーがアクセスできます。 これは、IIS 承認ルールを使用して特定のグループに制限することで変更できます。
  
### <a name="pre-install-requirements"></a>インストール前の要件

これらの手順では、QoE 指標データベースが既にインストールされ、Skype for Business Server トポロジのどこかで実行されていることを前提にしています。
  
#### <a name="hardware-requirements"></a>ハードウェア要件

CQD は Microsoft SQL Server、Microsoft SQL Analysis Server、および Microsoft Internet Information Server を利用します。そのため、CQD のハードウェアおよびソフトウェアの最小要件は、基本的に依存コンポーネントと同じです。 ただし、データの鮮度に関する組織の要件 (組織が生成する QoE データの量の一部に依存) と展開コストに基づいて、追加の展開に関する考慮事項を検討する必要があります。
  
#### <a name="software-requirements"></a>ソフトウェア要件

CQD には次のオペレーティング システムが必要です。
  
- WINDOWS SERVER 2008 R2 IIS 7.5 の場合
    
- WINDOWS SERVER 2012 IIS 8.0 の場合
    
- Windows Server 2012 R2 と IIS 8.5

- Windows Server 2016 と IIS 10.0 (Skype for Business Server 2019 CQD のみ)

- Windows Server 2019 (Skype for Business Server 2019 CQD のみ)
    
必要な IIS 役割サービスを階層順に次に示します。
  
- Web サーバー
    
  - HTTP 基本機能
    
  - 静的なコンテンツ
    
  - 既定のドキュメント
    
  - アプリケーション開発
    
  - ASP.NET
    
  - ISAPI フィルター
    
  - 正常性 &amp; 診断
    
  - HTTP ログ
    
  - セキュリティ
    
  - URL 承認
    
  - Windows 認証
    
  - 管理ツール
    
  - IIS 管理コンソール
    
> [!NOTE]
>  上記の要件については、次の点に注意してください:> 3.5 および 4.5 バージョンの .Net フレームワークを使用できます。 どちらも必須です (具体的には、3.5 SP1 が必要です)。> 一部のシステムでは、IIS をインストールする前に ASP.NET がセットアップされている場合、ASP.NET が IIS に登録されていない可能性があります。 この問題は、対応する .Net バージョンのアプリケーション プールが存在しない場合と、アプリ プール構成に .NET CLR バージョンがない場合に発生します。 To correct such issue on Windows Server 2008 R2, execute `%systemroot%\Microsoft.NET\Framework64\4.0.30319\aspnet_regiis.exe -iru` . Windows Server 2012および Windows Server 2012 R2 で、IIS マネージャーの既定の Web サイトから "ServiceModel" モジュールを削除して実行します。> 管理ツールはオプションですが、お勧  `dism /online /enable-Feature /all /FeatureName:WCF-HTTP-Activation45` めします。
  
PowerShell を使用してこれらの要件をインストールするには、次を実行します。
  
```PowerShell
import-module servermanager
```

```PowerShell
add-windowsfeature Web-Server, Web-Static-Content, Web-Default-Doc, Web-Asp-Net, Web-Asp-Net45, Web-Net-Ext, Web-Net-Ext45, Web-ISAPI-Ext, Web-ISAPI-Filter, Web-Http-Logging, Web-Url-Auth, Web-Windows-Auth, Web-Mgmt-Console
```

次のバージョンのSQL Serverサポートされています。
  
|||
|:-----|:-----|
| CQD 2015 <br/> |  SQL Server 2012 年、SQL Server 2014 年、SQL Server 2016 年  |
|CQD 2019 <br/> |  SQL Server 2017、SQL Server 2019  |
    
パフォーマンス上の理由から、ビジネス インテリジェンスエディションまたは Enterprise エディションをお勧めします。 これらのエディションでは、複数のパーティション ファイルを同時に処理でき、複数の月以上にわたるデータを処理する場合に便利です。 
  
推奨されませんが、Standard Edition もサポートされています。 処理は 1 つのパーティションに制限されます (セットアップ時に構成する必要があります)。 
  
すべての場合において、"Database Engine Services" と "Analysis Services" をインストールする必要があります。 Analysis Services のサポートを追加する "管理ツール - 完全" 機能SQL Server Management Studioインストールする必要はありません。 機能の選択画面は図のように表示されます。
  
![SQL Serverの要件](../../media/37f2f64b-49c8-4620-94ba-f6d1ae9abf83.png)
  
SSAS セットアップを構成する場合、Analysis Services 構成で、"サーバー モード" を "Multidimensional and Data Mining Mode" に設定します。 
  
ビジネス インテリジェンス機能のSQL Serverおよび構成の詳細については、「多次元およびデータ マイニング モードでの Analysis Services のインストール」 [を参照してください](https://msdn.microsoft.com/library/ms143708%28v=sql.110%29.aspx)。
  
#### <a name="account-requirements"></a>アカウント要件

最低特権の原則では、次の 3 つのドメイン サービス アカウントをお勧めします。 
  
- QoE 指標データベースのログイン セキュリティ プリンシパル (db_datareader 権限を持つ) と QoE アーカイブ SQL Server インスタンスのログイン セキュリティ プリンシパルの両方が既に存在する (セットアップ時にリンク サーバー オブジェクトを作成する必要がある)。 このアカウントは、クライアント エージェント ジョブの "QoE アーカイブ データ" SQL Server実行するために使用されます。
    
    > [!NOTE]
    > ロックダウンが厳しい環境で作業している場合は、QoE 指標監視データベース SQL Server と QoE アーカイブ SQL Server の両方で、このサービス アカウントに "バッチ ジョブとしてログオン" および "ローカルログオンを許可する" ユーザー権限が実際に付与されている必要があります。
    
- エージェント ジョブの "プロセス キューブ" ステップの実行SQL Server使用します。 セットアップは、QoE アーカイブ データベースへのログイン セキュリティ プリンシパル (読み取りおよび書き込み権限を持つ) を作成し、キューブの QoE ロール (フル コントロール権限を持つ) にメンバーを作成します。
    
- Web ポータルと Web API の IIS ワーカー プロセスを実行するために使用されるプロセス。 セットアップは、QoE アーカイブ データベースへのログイン セキュリティ プリンシパル (読み取り権限を持つ)、リポジトリ データベースへのログイン セキュリティ プリンシパル (読み取りおよび書き込み権限を持つ)、およびキューブの QoERole (フル コントロール権限を持つ) のメンバーを作成します。 
    
    > [!NOTE]
    > QoE アーカイブ データベースとリポジトリ データベースの両方が同じ SQL Server でホストされている場合、2 つのユーザー マッピングを持つ 1 つのログイン セキュリティ プリンシパルだけが作成されます。 
  
最初の 2 つのアカウントは論理的に "バック エンド サービス アカウント" と見なされ、最後のアカウントは "フロントエンド サービス アカウント" です。 お勧めしませんが、すべてのケースで 1 つのアカウントを使用できます。
  
> [!NOTE]
> インストールを開始するユーザー アカウントには、QoE Metrics DB への読み取りアクセス権も必要です (インストールを実行する必要がある QoE アーカイブ DB サーバーに対するコンピューター管理者権限を持つ必要があります)。 
  
## <a name="capacity-planning"></a>容量計画
<a name="Infrastructure_Req"> </a>

CQD は QoEMetrics への影響を最小限に抑える目的で設計されています。コードはデータをロックしなくするように最適化され、インポート ジョブは実行できません。
  
使用するハードウェアの種類は、同期を実行する時間の要件によって異なります。 ディスク サイズは次のとおりです。
  
- QoEArchive は、最初は QoEMetrics DB よりも 1.5 倍大きい
    
- SSIS キューブは、DB と比較してほぼ 10 倍のデータを圧縮します。
    
- データは毎月パーティション分割されます。パーティションを削除できる
    

