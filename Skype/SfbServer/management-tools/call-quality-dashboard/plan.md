---
title: Skype for Business Server の通話品質ダッシュボードを計画する
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: cc2fbf41-a7e0-4ef8-a939-47bc42da5529
description: '概要: 通話品質ダッシュボードを計画するときの考慮事項について説明します。'
ms.openlocfilehash: 407366fc98dc423db59ed9bf98cfe58463b708fc
ms.sourcegitcommit: 0979fae58ecd713f8317ed99caae015b5cc2c8e4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/25/2020
ms.locfileid: "44877948"
---
# <a name="plan-for-call-quality-dashboard-for-skype-for-business-server"></a>Skype for Business Server の通話品質ダッシュボードを計画する 
 
**概要:** 通話品質ダッシュボードを計画するときの考慮事項について説明します。
  
## <a name="overview-of-the-skype-for-business-server-call-quality-dashboard"></a>Skype for Business Server 通話品質ダッシュボードの概要

Skype for business Server の通話品質ダッシュボード (CQD) は、Skype for Business Server の監視サーバーの [qoe (Quality of Experience) データベース] の上位にあるレポート層です。 CQD では、Microsoft SQL Server Analysis Services を使用して、データセットでのフィルター処理とピボット処理に加えて、集計の使用状況と通話品質情報を提供します。 CQD の機能は次のとおりです。
  
- **QoE データのアーカイブストレージ (CQD の QoE アーカイブコンポーネント経由)。** QoE アーカイブコンポーネントは、監視サーバーと比較して、より長い期間、QoE データを格納できます。 これにより、一度に最大7か月分のデータの傾向とレポートが可能になり、データが存在するときにレポートウィンドウをさらに前にスライドできるようになります。
- **Microsoft SQL Server Analysis Services のパワーと速度を使用したレポート作成と分析。** CQD では、Microsoft SQL Analysis Services を活用して、分析キューブを使用してダッシュボードを処理する高速な概要、フィルター、およびピボット機能を提供しています。 実行速度をレポートし、データをドリルダウンする機能を使用すると、分析時間が劇的に短縮されます。
- **通話品質レポート用に最適化された新しいデータスキーマ。** キューブには、音声品質のレポートおよび調査用に設計されたスキーマがあります。 ポータルユーザーは、QoE 指標データベーススキーマが必要なビューにマップされる方法を解明する代わりに、レポートタスクに集中できます。 QoE アーカイブとキューブの組み合わせによって、CQD によるレポートと分析の複雑さを軽減する抽象化が提供されます。 QoE アーカイブデータベーススキーマには、データの全体的な価値を高めるために展開固有のデータを格納できるテーブルも含まれています。
- **組み込みのレポートデザイナーとインプレースレポート編集。** ポータルコンポーネントには、通話品質の方法論の後にモデル化されたいくつかの組み込みレポートが付属しています。 ポータルのユーザーは、ポータルの編集機能を使用して、レポートを変更したり、新しいレポートを作成したりできます。
- **レポート構造および分析キューブデータへの Web API のアクセス。** ダッシュボードレポートフレームワークは、キューブのデータを表示する唯一の方法ではありません。 CQD には、HTML と JavaScript を使用して CQD Web Api からデータを取得し、カスタム形式でデータをレンダリングする例がいくつか用意されています。 レポートエディターと CQD Web Api の組み合わせを使用すると、レポートおよびカスタムレポートレイアウトのプロトタイプをすばやく作成できます。

> [!NOTE]
> 管理者は、 [CQD バージョン 3](https://cqd.teams.microsoft.com) (管理者の資格情報を使用してログイン) を使用して Skype For business Server 2019 を管理できるようになりました。 これには、ハイブリッド実装と Call Data Connector (CDC) の使用が必要になります。 CDC を有効にする詳細については、「 [Plan Call Data Connector](/SkypeForBusiness/hybrid/plan-call-data-connector) 」を参照してください。 CQD version 3 のドキュメントについては、CQD バージョン3の詳細については、「 [Microsoft Teams および Skype For Business Online の通話品質ダッシュボードの有効化と使用](/MicrosoftTeams/turning-on-and-using-call-quality-dashboard)」を参照してください。

## <a name="cqd-design-goals"></a>CQD の設計目標

CQD では、IT 担当者が集約データを使用して、メディア品質の問題が発生している環境でフォーカス領域を特定できます。 It プロフェッショナルは、さまざまなユーザーグループの統計情報を比較し、傾向とパターンを識別できます。 個々の通話の問題を解決することに重点を置いていませんが、特定の環境で多くのユーザーに適用される問題と解決策を特定することに重点を置いています。 
  
## <a name="call-quality-dashboard-components"></a>通話品質ダッシュボードコンポーネント

通話品質ダッシュボードは、複数のデータベース、Microsoft SQL エージェントジョブ、プロセス、web アプリケーションで構成されています。 Microsoft SQL エージェントジョブは、定期的に QoE の指標データベースから QoE アーカイブデータベースにデータをコピーし、そのキューブを QoE アーカイブデータベースのデータで処理します。 リポジトリデータベースは、ポータルに電力を供給するレポート定義を格納します。 ポータルは、キューブデータへのブラウザーアクセスを提供します。 
  
CQD コンポーネント (QoE アーカイブ、キューブ、およびリポジトリデータベースを含む) は、監視サーバーにインストールするか、独自のサーバーにインストールするか、複数のサーバー間でインストールすることができます。 特定のインストール方法は、CQD のパフォーマンスの要件や、同じサーバー上の他のプロセスへの影響によって異なります。 詳細については、この記事の後半の「CQD のコンポーネントとトポロジ」を参照してください。
  
### <a name="architectural-overview"></a>アーキテクチャの概要

要約すると、CQD には次の要素が必要です。
  
- 2つのデータベース: アーカイブデータベースとリポジトリデータベース。
    
- 1つの SSAS キューブによる集計データの視覚化 
    
- IIS ホスト CQD Web ポータル
    
![CQD コンポーネント](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
同じ CQD アーキテクチャで Lync Server 2013 と Skype for Business がサポートされています。 
  
### <a name="cqd-and-skype-for-business-vs-lync-2013"></a>CQD および Lync 2013 と Skype for Business の比較

 Skype for Business 環境でのみ、次の機能を使用できます。
  
- 信号強度の wi-fi レポート
    
- チップセットドライバーの wi-fi レポート
    
- 通話データの評価 
    
## <a name="information-available-through-cqd"></a>CQD から入手できる情報

CQD では、Skype for Business Server の音声、ビデオ、およびアプリケーション共有のストリームの数と、良好な通話と不良の呼び出しの数について、および良好な通話の比率を示すことができます。 ビューは、さまざまな次元でスライスおよびフィルター処理できます。 CQD は、監視サーバーの QoE メトリックデータベースからデータを描画します。 その後、データは、ネットワークサブネット間マッピングなどのお客様が指定したデータと共に結合され、"建物ごとの通話品質" などのレポートを作成できます。 
  
また、CQD では、"呼び出し元" や "呼び出し先" など、内部 QoE データの特異性の多くが抽象化されています。これは、ユーザーが "サーバー" と "クライアント" を中心としたレポートビューの作成に集中できるようにすることです。 通話品質の方法論に従うと、CQD は、低品質の通話の受け入れが共通であるという条件を特定するのに役立ちます。これは、通話品質を向上させるための原則の1つです。
  
## <a name="viewing-data-in-cqd"></a>CQD でのデータの表示

CQD データは、CQD ポータル経由で表示し、REST API 呼び出しを使用してアクセスできます。
  
### <a name="cqd-portal"></a>CQD ポータル

ポータルでは、キューブ内のデータを最も簡単に表示できます。 ポータルには、すぐに使用できるいくつかの組み込みレポートが付属しています。 組み込みレポートは構造化された方法でリンクされており、ユーザーは、より小さく、より小さな呼び出しデータのスライスに誘導します。 組み込みレポートでは、さまざまなピボット、フィルター、およびメジャーを使用したグラフと表の組み合わせを示すことによって、データを表示できるさまざまな方法も強調表示されています。 ポータルにアクセスする各ユーザーは、自分が変更したり共有したりできる独自のレポートセットを持つことができます。 CQD Web ポータルの使用法の詳細については、「 [Skype For Business Server の通話品質ダッシュボードの使用](use.md)」を参照してください。
  
CQD Portal でサポートされているオペレーティングシステム: Windows 8.1、Windows 8、Windows Server 2012 R2、Windows Server 2012、および Windows Server 2016 (Skype for Business Server 2019 CQD のみ)。
  
CQD Portal でサポートされているブラウザー: Internet Explorer 11、Internet Explorer 10、Internet Explorer 9。
  
### <a name="rest-apis"></a>REST API

キューブデータには、REST API 呼び出しを介してアクセスすることもできます。 REST API の呼び出しによって取得されるデータは、HTML ページを使用してレンダリングできます。 ユーザーは、ビジネスニーズに適したカスタムレポートを作成しながら、クエリ速度と高レベルの CQD のスキーマを利用できます。 API とサンプルの詳細については、「 [Skype For Business Server の通話品質ダッシュボードを開発](develop.md)する」を参照してください。 
  
## <a name="defining-your-organizations-requirements-for-cqd"></a>組織の CQD の要件の定義

CQD では、QoE データアーカイブ、通話品質データの高速および詳細分析が提供されています。 次のガイドは、CQD を展開するタイミングと理由を決定するのに役に立ちます。
  
### <a name="when-to-deploy-cqd"></a>CQD を展開するタイミング

 **組織で通話品質の問題が発生していない場合でも、CQD を展開して、基準通話の品質測定を確立できます。** すべての組織で Wi-fi と有線の間、およびリモートと office のワーカーが混在しているため、基準通話の品質測定を確立することは重要です。 通話品質の問題が発生した場合は、最新の通話品質の測定値を以前の時間間隔と比較できます。 CQD の傾向分析機能を使用すると、時間の経過とともに、通話品質の変更を簡単に検出できます。
  
 **CQD を展開すると、通話の品質に影響を与える可能性がある問題の領域を事前に見つけることができます。** 組織の平均通話品質が組織によって設定された目標を満たしている場合でも、平均指標の後ろに非表示にされた通話品質の問題が受け入れことがあります。 CQD では、QoEMetrics データベースの多くの次元によって、ピボットテーブルに似た通話品質指標のブレークダウンが許可されます。 ピアグループで外れを発見することは、通話品質の問題を迅速に特定するための簡単な方法です。
  
 **問題のトラブルシューティングに必要な時間を短縮するために組織内で通話品質の問題が発生した場合は、CQD を展開する必要があります。** CQD は、迅速なレポートパフォーマンスと動的なドリルダウン機能を提供することによって、既存の通話品質調査を簡素化できます。 CQD は、さまざまな種類のワークフローに対して設計されており、通話品質調査で環境への修復の検証を行います。
  
### <a name="why-deploy-cqd"></a>CQD を展開する理由

 **3か月を超えるデータに対して QoE レポートを発生させる必要がある場合は、CQD を展開する必要があります。** QoEMetrics データベースと監視サーバーレポートは、小さなデータセットを保持して報告するように設計されています。 QoE 指標データベースは高速挿入用に最適化されているため、レポートパフォーマンスが大量の呼び出しまたはデータベースへの競合するレポートアクセスでよれことがあります。 CQD の QoE アーカイブデータベースは、QoE メトリックデータの2番目のコピーを、より長い期間保持機能を使用して提供します。 ポータルは、一度に最大7か月分のデータを表示するように最適化されており、必要に応じて QoE アーカイブ内のすべてのデータについてレポートを作成することもできます。
  
 **カスタム QoE レポートが必要な場合は、CQD を展開する必要があります。** ポータルには、レポートをすばやく簡単に作成してプロトタイプ作成するためのレポートエディター機能があります。 また、キューブデータにプログラムによってアクセスするための REST Api も用意されており、HTML/JavaScript やその他の多くのフレームワークを使用したカスタムプレゼンテーションを可能にします。 レポート用のカスタムデータビューを作成することを目的として、新しい SQL クエリを作成する必要がなくなりました。
  
 **既存の QoE レポート機能が組織によって要求される速度または深さを満たしていない場合は、CQD を展開する必要があります。** CQD には、多数の組み込みレポートが付属しています。 レポートはすぐに使用できるようになり、データに対して徐々にドリルすることで、各レベルでより詳細な情報が提供されることを示します。 レポート階層は、論理的な方法で多数のレポートを管理するのにも役立つので、簡単にアクセスおよび理解できる、より多くのレポートの作成が促進されます。 CQD は速度と柔軟性を提供するだけでなく、通話品質の方法論で開発されたワークフロー向けにも最適化されています。
  
## <a name="components-and-topologies-for-cqd"></a>CQD のコンポーネントとトポロジ

CQD にはいくつかのコンポーネントが付属しており、各コンポーネントの要件と、各コンポーネント間の関係を理解しておくと、ツールの最もシンプルかつ最適な展開を得ることができます。 次の表では、各 CQD コンポーネントの依存コンポーネントについて説明します。
  

|**コンポーネント名**|**依存コンポーネント**|
|:-----|:-----|
|QoE アーカイブ  <br/> |Microsoft SQL Server  <br/> |
|キューブ  <br/> |Microsoft SQL Server Analysis Services  <br/> |
|向け  <br/> |Microsoft Information Services  <br/> |
|リポジトリサービス (ポータルのインストールの一部)  <br/> |Microsoft SQL Server  <br/> |
   
> [!NOTE]
> QoE アーカイブとキューブの場合、特定の展開オプションには、Microsoft SQL Server のビジネスインテリジェンスまたはエンタープライズエディションが必要です。 詳細については、以下の「 [CQD のインフラストラクチャ要件](plan.md#Infrastructure_Req)」を参照してください。
  
![CQD コンポーネント](../../media/a52f2e6c-a4dd-4de3-879c-47295d2366c3.png)
  
### <a name="single-server-configuration"></a>単一サーバー構成

すべての CQD コンポーネントと依存コンポーネントを1台のコンピューターにインストールできます。 単一ボックス構成は最も簡単な構成で、CQD を自己完結型にすることができます。 CQD では、監視サーバー上の QoE 指標データベースへのアクセスが必要になります。 CQD サーバーは、スタンドアロンコンピューター、仮想マシン、またはホストコンピューターの使用可能なリソースとパフォーマンス要件に応じて、監視サーバーにすることもできます。 
  
インストール時に、インストールを実行するユーザーは、CQD がインストールされるコンピューター上で以前に設定されていた Microsoft SQL Server および Microsoft SQL Server Analysis Services インスタンスを提供するだけで十分です。 詳細については、「 [Deploy Call Quality Dashboard For Skype For Business Server](deploy-0.md) 」を参照してください。
  
### <a name="multiserver-configuration"></a>マルチサーバー構成

マルチサーバー構成では、QoE アーカイブ、キューブ、およびポータルはすべて異なるコンピューター上に存在することができます。 マルチサーバー構成には、主に次の2つの用途があります。
  
- CQD Web ポータルと CQD キューブを異なるサーバー上でホストします。
    
- "運用" ポータルとは別に "開発" ポータルをホストする。 
    
  **CQD Web ポータルと CQD キューブを異なるコンピューターにホストする。** CQD Portal を SQL Server インストールから分離したり、sql server インスタンスおよび sql Server Analysis Services インスタンスに SQL Server のエディションを混在させたりする必要がある組織では、CQD Portal と CQD キューブを異なるコンピューターにインストールすることもできます。 また、QoE アーカイブコンポーネントは、監視サーバーのパフォーマンスの制限に達しずに、QoE データをアーカイブするための持続可能な方法を必要とする場合にインストールされる唯一の CQD コンポーネントになることもあります。
  
![単一サーバー CQD](../../media/f65be6f3-6bba-4c3d-b3ae-c05e03551b5b.png)
  
 **"運用" ポータルとは別に "開発" ポータルをホストする。** (REST Api を使用して) 独自のカスタムレポートを開発する組織では、通常のユーザーが通話品質監視や調査のためにアクセスする、運用ポータルと共に追加 (CQD) ポータルインスタンスを展開することをお勧めします。 開発ポータルは、運用環境からポータルに加えられた変更を分離することができます。 その他の web ポータルは、別のコンピューター (下の図を参照) に展開するか、同じコンピューター上の別の web ディレクトリに展開することができます (ここでは示されていません)。 後者の場合、CQD セットアッププロセスは常に、定義済みの web アプリケーション名を使用して既定の web サイトに CQD Web ポータルを展開するため、追加の CQD web ポータルを運用マシンに手動でコピーする必要があります。
  
![CQD マルチサーバーを計画する](../../media/2326e61e-b485-43e6-9f82-145237ba89cf.png)
  
### <a name="supported-topologies"></a>サポートされるトポロジ

CQD では、複数の QoEMetrics データベースからのデータはマージされません。複数の Skype for Business Server トポロジがあり、それぞれに独自の監視サーバーがある場合です。 各 CQD インスタンスは、1つの QoEMetrics データベースをポイントする必要があります。 ただし、CQD は、レポートワークロードのほとんどを監視サーバーから移動するため、Skype for Business Server トポロジごとに1台の監視サーバーを展開する必要がある大規模な組織では、すべてのトポロジに対して1つの監視サーバーを使用することを検討する必要があります。
  
## <a name="infrastructure-requirements-for-cqd"></a>CQD のインフラストラクチャ要件
<a name="Infrastructure_Req"> </a>

すべてのコンポーネントおよび依存コンポーネントを含む CQD は、仮想マシン、単一のコンピューター、または複数のコンピューターに展開できます。 以下に、ソフトウェアおよびハードウェアの最小要件を示します。 アクティブな Skype for Business Server ユーザーおよびハードウェアおよび構成の数によっては、データの可用性とクエリのパフォーマンスが数分から数時間に及ぶことがあります。そのため、以下にいくつかのパフォーマンス測定値が提供されています。
  
|||
|:-----|:-----|
|CQD 2015 の場合 <br/> |  <br/> |
|サポートされているオペレーティング システム   <br/> |Windows Server 2008 R2、Windows Server 2012、Windows Server 2012 R2  <br/> |
|サポートされている SQL Server  <br/> |Sql Server 2012、SQL Server 2014、SQL Server 2016  <br/> |

|||
|:-----|:-----|
|CQD 2019 の場合 <br/> |  <br/> |
|サポートされているオペレーティング システム   <br/> |Windows Server 2016、Windows Server 2019  <br/> |
|サポートされている SQL Server  <br/> |SQL Server 2017、SQL Server 2019  <br/> |
   
CQD は、Microsoft SQL Server、Microsoft SQL Server Analysis Services、および Microsoft インターネットインフォメーションサービスを利用しているため、CQD のハードウェアおよびソフトウェアの最小要件は基本的にこれらの依存コンポーネントと同じです。 ただし、データ鮮度に関する組織の要件 (組織が生成する QoE データの量によって異なります) と展開コストに基づいて、追加の展開検討を行う必要があります。
  
CQD でのデータ処理は、次の2つの主要な段階に分かれています。 
  
- QoE アーカイブプロセス
    
- CQD キューブ処理
    
  **QoE アーカイブ処理。** QoE アーカイブ処理タスクは、監視サーバー上の QoE 指標データベースから QoE アーカイブデータベースにデータをコピーします。 タスクの処理時間には、根本的に異なるパフォーマンス特性があるという2つの状況があります。 1つ目は、CQD の初期インストール後のものです。 新規インストール後に初めてタスクを実行すると、QoE アーカイブ処理タスクは、QoE の測定基準データベースに含まれるすべてのデータを QoE アーカイブデータベースにコピーします。 2番目は、この最初のラウンドの後の定期的な処理です。 QoE アーカイブ処理タスクは15分ごとに実行され、QoE 指標データベースにあるすべての新しい QoE レコードを処理します。 通常、CQD がインストールされている場合は、最初に実行される処理時間が重要ではありません。 ただし、CQD サーバーが非常に厳しくなっている場合は、このタスクに数時間かかることがあります。 最初の QoE アーカイブの処理時間などについては、次の表を参照してください。
  
  **CQD キューブ処理。** キューブ処理タスクは、QoE アーカイブデータベースからキューブにデータを集約します。 最初のキューブ処理時間と以降のキューブ処理時間は、CQD キューブで使用される SQL Server Analysis Services edition によって決まります。 Standard edition が使用されている場合、キューブデータを更新するたびに、キューブデータが更新されるたびに、使用可能なすべてのデータが完全に処理されるため、最初のキューブ処理時間とその後のキューブ処理時間との間に違いはありません。 これは、QoE アーカイブデータベースのデータ量が増加するにつれてキューブの処理時間が長くなることを意味します。SQL Server のビジネスインテリジェンスエディションおよび Enterprise Edition ではパーティションがサポートされているため、どちらかのエディションを使用している場合は、最初の実行のみで QoE アーカイブデータベース内のすべてのデータが処理されます。 後続の実行では、タスクが15分ごとにトリガーされるときに、タスクは、最後にタスクを実行してから QoE アーカイブデータベースに追加された新しいレコードのみを処理します。 1日に1回は、現在の月のデータが含まれているパーティションでも完全な処理が行われます。
  
物理コンピューターの特性は、CQD のパフォーマンスだけでなく、SQL Server コンポーネントから使用できるソフトウェア機能に影響を与える可能性があります。 QoE アーカイブコンポーネントは他のコンポーネントと比較して、ディスクの使用量が増加しますが、キューブコンポーネントは CPU とメモリの消費量が増加します。 これらの要因はすべて、データの鮮度と可用性に直接的な影響を与える CQD のデータ処理時間の合計に寄与しています。 組織の個々のニーズに基づいて、ハードウェアとソフトウェアに関する決定を行う必要があります。 
  
### <a name="tested-hardware-configurations"></a>テスト済みのハードウェア構成

このセクションでは、環境内に単一の QoEMetrics DB があることを前提としています。 
  
**コンピュータープロファイル**

|**マシン**|**CPU コア**|**RAM**|**同じディスク上の QoE アーカイブとキューブ**|**同じディスク上の QoE アーカイブと SQL Temp DB**|
|:-----|:-----|:-----|:-----|:-----|
|仮想マシン  <br/> |4   <br/> |7 GB  <br/> |はい  <br/> |はい  <br/> |
|4コア  <br/> |4   <br/> |20 GB  <br/> |はい  <br/> |いいえ  <br/> |
|8コア  <br/> |8   <br/> |32 GB  <br/> |はい  <br/> |いいえ  <br/> |
|16コア  <br/> |16   <br/> |128 GB  <br/> |いいえ  <br/> |いいえ  <br/> |
   
**パフォーマンス結果**

|**マシン**|**QoE 指標の DB サイズ**|**SQL パーティション**|**ディスクの種類**|**ストリームの数**|**最初のアーカイブプロセス**|**最初のキューブプロセス**|**後続のアーカイブプロセス**|**その後のキューブプロセス**|
|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|
|仮想マシン  <br/> |900 MB  <br/> |1 行  <br/> |VHD (可変サイズ)  <br/> |. 5 M  <br/> |30 m  <br/> |2 m  <br/> |30秒  <br/> |1 m  <br/> |
|仮想マシン  <br/> |9 GB  <br/> |1 行  <br/> |VHD (可変サイズ)  <br/> |5 M  <br/> |4 h  <br/> |15 m  <br/> |1 m  <br/> |5 m  <br/> |
|仮想マシン  <br/> |9 GB  <br/> |1 行  <br/> |VHD (固定サイズ)  <br/> |5 M  <br/> |2 h  <br/> |5 m  <br/> |1 m  <br/> |5 m  <br/> |
|仮想マシン  <br/> |30以上  <br/> |1 行  <br/> |VHD (固定サイズ)  <br/> |10 M  <br/> |15 h  <br/> |20 m  <br/> |2 m  <br/> |45 m  <br/> |
|8コア  <br/> |9 GB  <br/> |1 行  <br/> |複数のディスク  <br/> |5 M  <br/> |2 h  <br/> |5 m  <br/> |25 s  <br/> |5 m  <br/> |
|8コア  <br/> |9 GB  <br/> |複数  <br/> |複数のディスク  <br/> |5 M  <br/> |2 h  <br/> |15 m  <br/> |35 s  <br/> |2 m  <br/> |
|8コア  <br/> |30以上  <br/> |1 行  <br/> |複数のディスク  <br/> |20 M  <br/> |9 h  <br/> |20 m  <br/> |1 m  <br/> |20 m  <br/> |
|8コア  <br/> |30以上  <br/> |複数  <br/> |複数のディスク  <br/> |20 M  <br/> |9 h  <br/> |30 m  <br/> |2 m  <br/> |2 m  <br/> |
|4コア  <br/> |200 GB  <br/> |1 行  <br/> |複数のディスク  <br/> |125 M  <br/> |6日以上  <br/> |7 h  <br/> |2 m  <br/> |6 h  <br/> |
|16コア  <br/> |500 GB  <br/> |複数  <br/> |複数のスピンドル  <br/> |250 M  <br/> |8日  <br/> |2 h  <br/> |2 m  <br/> |10 m  <br/> |
   
\*QoE の測定基準データベースでは、それぞれ9か18か月のデータが必要になることがあるので、これらは実際の展開では発生しませんが、完全な結果が得られるはずです。
  
### <a name="service-account-requirements"></a>サービスアカウントの要件

CQD サーバー上の SQL エージェントが QoEArchiveDB にデータをインポートするために使用できるアカウント (QoEMetrics への読み取りアクセス権) が必要です。
  
また、QoEArchiveDB からデータを取得するために、SSAS ジョブに個別のアカウントを構成する必要がある場合があります (これはオプションのプロセスです)。
  
IIS は、通常、ネットワークサービスをアプリケーションプール Id として使用しますが、サービスアカウントを構成することもできます。
  
### <a name="portal-access-control"></a>ポータルアクセス制御

既定では、認証されたユーザーはすべてアクセスできます。 これは、IIS 承認規則を使用して特定のグループに制限することで変更できます。
  
### <a name="pre-install-requirements"></a>インストール前の要件

これらの手順では、QoE メトリックデータベースが既にインストールされており、Skype for Business Server のトポロジで実行中であることを前提としています。
  
#### <a name="hardware-requirements"></a>ハードウェア要件

CQD では、CQD のハードウェアおよびソフトウェアの最小要件が基本的にこれらの依存コンポーネントと同じになるように、Microsoft SQL Server、Microsoft SQL Analysis Server、および Microsoft インターネットインフォメーションサービスを活用しています。 ただし、データ鮮度に関する組織の要件 (組織が生成する QoE データの量によって異なります) と展開コストに基づいて、追加の展開検討を行う必要があります。
  
#### <a name="software-requirements"></a>ソフトウェア要件

CQD には、次のオペレーティングシステムが必要です。
  
- IIS 7.5 を使用した Windows Server 2008 R2
    
- Windows Server 2012 と IIS 8.0
    
- IIS 8.5 を使用した Windows Server 2012 R2

- IIS 10.0 を使用した Windows Server 2016 (Skype for Business Server 2019 CQD のみ)

- Windows Server 2019 (Skype for Business Server 2019 CQD のみ)
    
必要な IIS の役割サービス (階層順) を次に示します。
  
- Web サーバー
    
  - HTTP 基本機能
    
  - 静的なコンテンツ
    
  - 既定のドキュメント
    
  - アプリケーション開発
    
  - ASP.NET
    
  - ISAPI フィルター
    
  - 正常性 &amp; 診断
    
  - HTTP ログ
    
  - セキュリティ
    
  - URL 承認
    
  - Windows 認証
    
  - 管理ツール
    
  - IIS 管理コンソール
    
> [!NOTE]
>  上記の要件については、次の点に注意してください。 > 3.5 および4.5 バージョンの .Net framework を使用できます。 両方が必要です (具体的には 3.5 SP1 が必要です)。 > の一部のシステムでは、IIS をインストールする前に ASP.NET をセットアップすると、ASP.NET が IIS に登録されないことがあります。 この問題により、対応する .Net バージョンのアプリケーションプールが存在しないこと、およびアプリプール構成に .NET CLR バージョンが存在しないことが検出されます。 Windows Server 2008 R2 でこのような問題を解決するには、を実行 `%systemroot%\Microsoft.NET\Framework64\4.0.30319\aspnet_regiis.exe -iru` します。 Windows Server 2012 および Windows Server 2012 R2 で、 `dism /online /enable-Feature /all /FeatureName:WCF-HTTP-Activation45` IIS マネージャーの既定の Web サイトから "ServiceModel" モジュールを削除することによって実行されます。 > 管理ツールはオプションですが、推奨されています。
  
PowerShell を使用してこれらの要件をインストールするには、次のように実行します。
  
```PowerShell
import-module servermanager
```

```PowerShell
add-windowsfeature Web-Server, Web-Static-Content, Web-Default-Doc, Web-Asp-Net, Web-Asp-Net45, Web-Net-Ext, Web-Net-Ext45, Web-ISAPI-Ext, Web-ISAPI-Filter, Web-Http-Logging, Web-Url-Auth, Web-Windows-Auth, Web-Mgmt-Console
```

次のバージョンの SQL Server がサポートされています。
  
|||
|:-----|:-----|
| CQD 2015 <br/> |  Sql Server 2012、SQL Server 2014、SQL Server 2016  |
|CQD 2019 <br/> |  SQL Server 2017、SQL Server 2019  |
    
パフォーマンス上の理由から、ビジネスインテリジェンスまたは Enterprise edition を使用することをお勧めします。 これらのエディションでは、並行して処理できる複数のパーティションファイルの使用が許可されています。これは、複数の月またはそれを超える期間にわたるデータの処理に役立ちます。 
  
推奨されていませんが、Standard edition もサポートされています。 処理は1つのパーティションに制限されます (セットアップ時に構成する必要があります)。 
  
すべての場合において、「データベースエンジンサービス」と「Analysis Services」をインストールする必要があります。 "管理ツール-完全" 機能をインストールすることをお勧めします。これにより、Analysis Services の SQL Server Management Studio のサポートが追加されます。 機能の選択画面は、図のようになります。
  
![SQL Server 機能の要件](../../media/37f2f64b-49c8-4620-94ba-f6d1ae9abf83.png)
  
SSAS セットアップを構成する場合は、Analysis Services の構成で、"サーバーモード" を "多次元およびデータマイニングモード" に設定します。 
  
SQL Server のビジネスインテリジェンス機能のインストールと構成の詳細については、「 [Analysis Services を多次元およびデータマイニングモードでインストール](https://msdn.microsoft.com/library/ms143708%28v=sql.110%29.aspx)する」を参照してください。
  
#### <a name="account-requirements"></a>アカウントの要件

最小限の特権の原則として、3つのドメインサービスアカウントが推奨されています。 
  
- QoE の指標データベース (db_datareader 特権を持つ) のログインセキュリティプリンシパルと、QoE アーカイブ SQL Server インスタンスのログインセキュリティプリンシパル (セットアップ時にリンクされたサーバーオブジェクトを作成するために必要) の両方が既にあるもの。 このアカウントは、SQL Server エージェントジョブの "QoE Archive Data" 手順を実行するために使用されます。
    
    > [!NOTE]
    > ロックダウンされた環境で作業している場合は、このサービスアカウントに「バッチジョブとしてログオンする」と「ローカルログオンを許可する」のユーザー権限が QoE メトリック監視データベース SQL Server と QoE Archive SQL Server の両方に付与されていることを確認する必要があります。
    
- 1つは、SQL Server エージェントジョブの "プロセスキューブ" 手順の実行に使用されるものです。 セットアップは、QoE アーカイブデータベースへのログインセキュリティプリンシパル (読み取りおよび書き込み権限を持つ) を作成し、そのキューブの QoE ロール (フルコントロール権限を持つ) にメンバーを作成します。
    
- Web ポータルおよび web Api 用の IIS ワーカープロセスを実行するために使用される1つ。 セットアップは、QoE アーカイブデータベースへのログインセキュリティプリンシパル (読み取り特権を持つ)、ログインセキュリティプリンシパルからリポジトリデータベース (読み取りおよび書き込み権限を持つ)、およびキューブの QoERole (フルコントロール権限を持つ) のメンバーを作成します。 
    
    > [!NOTE]
    > QoE アーカイブデータベースとリポジトリデータベースの両方が同じ SQL Server でホストされている場合は、2つのユーザーマッピングを持つログインセキュリティプリンシパルが1つだけ作成されます。 
  
最初の2つのアカウントは、論理的には「バックエンドサービスアカウント」、最後のアカウントは「フロントエンドサービスアカウント」と考えることができます。 推奨されていませんが、すべての場合に1つのアカウントを使用することができます。
  
> [!NOTE]
> インストールを開始するユーザーアカウントは、QoE 指標 DB への読み取りアクセス権を持っている必要があります (インストールを実行する必要がある QoE アーカイブ DB サーバーに対してコンピューターの管理者権限がある場合もあります)。 
  
## <a name="capacity-planning"></a>容量計画
<a name="Infrastructure_Req"> </a>

CQD は、QoEMetrics への影響を最小限にするように設計されています。データをロックしないようにコードを最適化し、インポートジョブを調整可能にします。
  
使用するハードウェアの種類は、同期を実行する速度の要件によって異なります。 ディスクのサイズ変更は次のとおりです。
  
- QoEArchive は、最初は QoEMetrics DB よりも大きく 1.5 x
    
- SSIS キューブは、DB と比較してデータをほぼ10倍圧縮します。
    
- データは月単位でパーティション分割されます。パーティションを削除できます。
    

