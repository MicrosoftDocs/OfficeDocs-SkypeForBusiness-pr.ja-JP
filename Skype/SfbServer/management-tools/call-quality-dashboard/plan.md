---
title: Skype for Business Server の通話品質ダッシュボードの計画
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: cc2fbf41-a7e0-4ef8-a939-47bc42da5529
description: '概要: 通話品質ダッシュボードを計画する際の考慮事項について説明します。'
ms.openlocfilehash: 3a0982f565495740887b6da07dd802de1205dcf8
ms.sourcegitcommit: 2cc98fcecd753e6e8374fc1b5a78b8e3d61e0cf7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/08/2020
ms.locfileid: "40991412"
---
# <a name="plan-for-call-quality-dashboard-for-skype-for-business-server"></a>Skype for Business Server の通話品質ダッシュボードの計画 
 
**概要:** 通話品質ダッシュボードを計画する際の考慮事項について説明します。
  
## <a name="overview-of-the-skype-for-business-server-call-quality-dashboard"></a>Skype for Business Server 通話品質ダッシュボードの概要

Skype for Business Server Call Quality Dashboard (CQD) は、Skype for Business Server の監視サーバーのエクスペリエンスデータベースの上にあるレポートレイヤーです。 CQD は、Microsoft SQL Server Analysis Services を使用して、データセットでのフィルター処理とピボット処理に加えて、集計の使用状況と通話品質情報を提供します。 CQD には次のような機能があります。
  
- **CQD の QoE アーカイブコンポーネントによる QoE データのアーカイブストレージ。** QoE アーカイブコンポーネントは、監視サーバーの場合よりもずっと長い期間、QoE データを保存できます。 これにより、最大7か月間のデータについて、トレンド分析とレポート作成が可能になり、レポートウィンドウをデータが存在する時点で戻ることができます。
- **Microsoft SQL Server Analysis Services のパワーと速度を使用したレポートと分析。** CQD は、Microsoft SQL Analysis Services を利用して、概要、フィルター、ピボット処理機能を提供し、分析キューブを使用してダッシュボードを実現します。 実行速度とデータのドリルダウン機能をレポートすると、分析にかかる時間が大幅に短縮されます。
- **通話品質レポート用に最適化された新しいデータスキーマ。** キューブには、音声品質レポートと調査用に設計されたスキーマがあります。 ポータルユーザーは、QoE 指標データベーススキーマが必要なビューにどのようにマップされるかを判断する代わりに、レポートタスクに集中することができます。 QoE アーカイブとキューブを組み合わせることで、CQD でのレポート作成と分析の複雑さを軽減することができます。 また、QoE アーカイブデータベーススキーマには、展開固有のデータを設定してデータの全体的な値を向上させることができるテーブルも含まれています。
- **組み込みのレポートデザイナーとインプレースレポートの編集。** ポータルコンポーネントには、通話品質の方法でモデル化されたいくつかの組み込みレポートが用意されています。 ポータルのユーザーは、ポータルの編集機能を使用してレポートを変更したり、新しいレポートを作成したりできます。
- **Web API でレポートの構造と分析キューブデータにアクセスできます。** ダッシュボードレポートフレームワークは、キューブのデータを表示する唯一の方法ではありません。 CQD では、HTML と JavaScript を使って CQD Web Api からデータを取得し、カスタム形式でデータを表示する例をいくつか示します。 レポートエディターと CQD Web Api を組み合わせることで、レポートとカスタムレポートのレイアウトをすばやくプロトタイプすることができます。

> [!NOTE]
> 管理者が[CQD バージョン 3](https://cqd.teams.microsoft.com) (管理者の資格情報でログイン) を使用して、Skype For business Server 2019 を管理できるようになりました。 これには、ハイブリッド実装と Call Data Connector (CDC) の使用が必要です。 CDC を有効にする方法について詳しくは、「[通話データコネクタの計画](/SkypeForBusiness/hybrid/plan-call-data-connector)」をご覧ください。 CQD バージョン3のドキュメントについては、「 [Microsoft Teams および Skype For Business Online の通話品質ダッシュボードをオン](/MicrosoftTeams/turning-on-and-using-call-quality-dashboard)にして使用する」を参照してください。 CQD バージョン3の詳細については、こちらを参照してください。

## <a name="cqd-design-goals"></a>CQD のデザイン目標

CQD により、IT 担当者は集計データを使用して、メディア品質の問題が発生している環境におけるフォーカス領域を識別できるようになります。これにより、IT 担当者は異なるユーザーのグループの統計情報を比較して、傾向とパターンを識別できます。個別の通話に関する問題の解決にフォーカスしていませんが、特定の環境内の多くのユーザーに該当する問題と解決策の識別にフォーカスしています。 
  
## <a name="call-quality-dashboard-components"></a>通話品質ダッシュボードコンポーネント

通話品質ダッシュボードは、複数のデータベース、Microsoft SQL エージェントジョブ、プロセス、web アプリケーションで構成されています。 Microsoft SQL エージェントのジョブは、qoe アーカイブデータベースにデータを定期的にコピーし、QoE アーカイブデータベースのデータでキューブを処理します。 リポジトリデータベースには、ポータルに電力を供給するレポートの定義が保存されます。 ポータルでは、キューブデータへのブラウザーアクセスが提供されます。 
  
QoE アーカイブ、キューブ、リポジトリデータベースなどの CQD コンポーネントは、監視サーバーにインストールするか、独自のサーバーにインストールするか、複数のサーバーにインストールすることができます。 特定のインストール方法は、CQD のパフォーマンス要求と、同じサーバー上の他のプロセスへの影響によって異なります。 詳細については、この記事の後半の「CQD のコンポーネントとトポロジ」を参照してください。
  
### <a name="architectural-overview"></a>アーキテクチャの概要

要約すると、CQD には次の要素が必要です。
  
- 2つのデータベース: アーカイブデータベースとリポジトリデータベース。
    
- 1つの SSAS 立方体で集計データをビジュアル化する 
    
- IIS ホスト CQD Web ポータル
    
![CQD のコンポーネント](../../media/ef3359b1-c98b-4cc5-a549-c84c6e03c011.png)
  
同じ CQD アーキテクチャでは、Lync Server 2013 と Skype for Business がサポートされています。 
  
### <a name="cqd-and-skype-for-business-vs-lync-2013"></a>CQD と Skype for Business と Lync 2013 の比較

 Skype for Business 環境でのみ、次の機能を利用できます。
  
- シグナルの強さに関する wi-fi レポート
    
- チップセットドライバの wi-fi レポート
    
- 通話データの評価 
    
## <a name="information-available-through-cqd"></a>CQD で利用可能な情報

CQD では、Skype for Business Server の音声、ビデオ、およびアプリケーション共有ストリームの数と、良好な呼び出しと不適切な呼び出しの数を示すことができます。 ビューは、さまざまな次元でスライスしたり、フィルター処理したりすることができます。 CQD は、監視サーバーの QoE メトリックデータベースからデータを描画します。 このデータは、"建物あたりの通話品質" などのレポートを作成するために、ネットワークサブネット間マッピングなど、お客様が提供するデータと結合されます。 
  
また、CQD は、"caller" や "呼び出し先" など、内部の QoE データの多くの特異性を抽象化します。これは、ユーザーが "サーバー" と "クライアント" を中心にしたレポートビューの構築に専念できるようにすることです。 通話品質の方法に従って、CQD は、通話品質を向上させるための受け入れの問題が発生する可能性が高い条件を特定するのに役立ちます。
  
## <a name="viewing-data-in-cqd"></a>データを CQD で表示する

CQD データは、CQD ポータルから表示し、REST API 呼び出しを使ってアクセスできます。
  
### <a name="cqd-portal"></a>CQD ポータル

ポータルは、キューブ内のデータを表示するための最も簡単な方法です。 ポータルには、すぐに使用できるいくつかの組み込みレポートが用意されています。 組み込みのレポートは構造化された方法でリンクされるため、ユーザーは通話データのサイズが小さく、小さくなります。 また、組み込みレポートでは、さまざまなピボット、フィルター、メジャーを含むグラフとテーブルの組み合わせを示すことで、さまざまな方法でデータを表示できます。 ポータルにアクセスする各ユーザーは、各自のレポートのセットを変更して共有できます。 CQD Web ポータルの使用法の詳細については、「 [Skype For Business Server の通話品質ダッシュボードの使用](use.md)」を参照してください。
  
CQD ポータルでサポートされているオペレーティングシステム: Windows 8.1、Windows 8、Windows Server 2012 R2、Windows Server 2012、Windows Server 2016 (Skype for Business Server 2019 CQD のみ)。
  
CQD Portal でサポートされているブラウザー: Internet Explorer 11、Internet Explorer 10、Internet Explorer 9。
  
### <a name="rest-apis"></a>REST Api

キューブデータは、REST API 呼び出しを介してアクセスすることもできます。 REST API の呼び出しによって取得されたデータは、HTML ページを使ってレンダリングできます。 ユーザーは、ビジネスニーズに合ったカスタムレポートを作成しながら、クエリ速度と CQD の高レベルスキーマを利用できます。 API とサンプルの詳細については、「 [Skype For Business Server の通話品質ダッシュボードの開発](develop.md)」を参照してください。 
  
## <a name="defining-your-organizations-requirements-for-cqd"></a>組織の要件を CQD に定義する

CQD は、QoE データアーカイブ機能と、通話品質データの高速およびディープ分析を提供します。 次のガイドは、CQD を展開するタイミングと理由を決定するのに役立ちます。
  
### <a name="when-to-deploy-cqd"></a>CQD を展開する状況

 **組織で通話品質の問題が発生していない場合でも、CQD を展開して、基準となる通話品質の測定値を設定することができます。** 基準計画通話品質の測定は、すべての組織が Wi-fi とワイヤード、およびリモートと office の両方のワーカーとの間にさまざまな組み合わせを持っているため、重要になります。 通話品質の問題が発生した場合は、最新の通話品質の測定値を以前の時間間隔と比較できます。 CQD のトレンド分析機能を使用すると、時間の経過に伴う通話品質の変化を簡単に検出できます。
  
 **CQD を展開して、通話品質に影響を与える可能性がある問題領域を事前に見つけることができます。** 組織の平均通話品質が、組織によって設定された目標を満たしている場合でも、平均的な指標の背後で非表示になっている通話品質の問題が受け入れことがあります。 CQD を使うと、QoEMetrics データベースの多くのディメンションを使って、ピボットテーブルのように、通話品質指標の内訳を見ることができます。 ピアグループで外れている場合は、通話品質の問題をすばやく見つけることができます。
  
 **問題のトラブルシューティングに必要な時間を節約するために、組織内に通話品質の問題がある場合は、CQD を展開する必要があります。** CQD を使うと、迅速なレポートのパフォーマンスと動的なドリルダウン機能を提供することで、既存の通話品質調査を簡素化できます。 CQD は、さまざまなワークフローのために設計されています。通話品質調査で環境の修復を検証します。
  
### <a name="why-deploy-cqd"></a>CQD を展開する理由

 **QoE レポートを3か月以上のデータに対して実行する必要がある場合は、CQD を展開する必要があります。** QoEMetrics データベースと監視サーバーレポートは、少量のデータを保持して報告するように設計されています。 QoE 指標データベースは、簡単に挿入できるように最適化されているため、レポートのパフォーマンスは大量の通話やデータベースへの競合レポートアクセスによって impeded されることがあります。 CQD の QoE アーカイブデータベースは、長期間の保存機能を備えた、QoE メトリックデータの2番目のコピーを提供します。 ポータルは、一度に最大7か月間のデータを表示するように最適化されており、必要に応じて QoE アーカイブ内のすべてのデータについてレポートを作成することもできます。
  
 **カスタム QoE レポートが必要な場合は、CQD を展開する必要があります。** ポータルには、すばやく簡単にレポートを作成してプロトタイプを作成するためのレポートエディター機能が用意されています。 また、キューブデータへのプログラムによるアクセス用の REST Api も用意されており、HTML/JavaScript などのさまざまなフレームワークを使ったカスタムプレゼンテーションを可能にします。 レポート用にカスタムデータビューを作成することを目的として、新しい SQL クエリを作成する必要はなくなりました。
  
 **既存の QoE レポート機能が、組織に必要な速度または深度を満たしていない場合は、CQD を展開する必要があります。** CQD には、多くの組み込みレポートが用意されています。 レポートはすぐに役に立ち、データに段階的にドリルダウンすることで、各レベルで追加の洞察を提供できます。 また、レポート階層は、多数のレポートを論理的な方法で管理するのに役立ちます。また、簡単にアクセスして理解できるレポートの作成が促進されます。 CQD は速度と柔軟性を提供するだけでなく、通話品質の方法で開発されたワークフローに合わせて最適化されています。
  
## <a name="components-and-topologies-for-cqd"></a>CQD のコンポーネントとトポロジ

CQD にはいくつかのコンポーネントが付属しており、各コンポーネントの要件と互いの関係を理解して、ツールの最もシンプルで最適な展開を実現することができます。 次の表では、各 CQD コンポーネントの依存コンポーネントについて説明します。
  

|**コンポーネント名**|**依存コンポーネント**|
|:-----|:-----|
|QoE アーカイブ  <br/> |Microsoft SQL Server  <br/> |
|立方体  <br/> |Microsoft SQL Server Analysis Services  <br/> |
|ポータル  <br/> |Microsoft Information Services  <br/> |
|リポジトリサービス (ポータルのインストールの一部)  <br/> |Microsoft SQL Server  <br/> |
   
> [!NOTE]
> QoE アーカイブとキューブの場合、特定の展開オプションには、Microsoft SQL Server のビジネスインテリジェンスまたはエンタープライズエディションが必要です。 詳細については、以下の CQD セクションの[インフラストラクチャ要件](plan.md#Infrastructure_Req)を参照してください。
  
![CQD のコンポーネント](../../media/a52f2e6c-a4dd-4de3-879c-47295d2366c3.png)
  
### <a name="single-server-configuration"></a>単一サーバー構成

すべての CQD コンポーネントと依存コンポーネントを1台のコンピューターにインストールできます。 単一ボックス構成は最も簡単な構成であり、CQD を自己完結させることができます。 CQD は、監視サーバー上の QoE メトリックデータベースへのアクセスのみを必要とします。 CQD サーバーは、スタンドアロンコンピューター、仮想マシン、またはホストコンピューターの利用可能なリソースとパフォーマンス要件に応じて、監視サーバーにすることもできます。 
  
インストール中、インストールを実行しているユーザーは、CQD をインストールするコンピューター上で以前にセットアップされている Microsoft SQL Server Analysis Services インスタンスを提供する必要があります。 詳細については、「 [Skype For Business Server 用の通話品質ダッシュボードの展開](deploy-0.md)」を参照してください。
  
### <a name="multiserver-configuration"></a>マルチサーバー構成

マルチサーバー構成では、QoE アーカイブ、キューブ、ポータルはすべて異なるコンピューター上に存在することができます。 マルチサーバー構成には、主に次の2つの用途があります。
  
- CQD Web ポータルと CQD Cube をさまざまなサーバーでホストします。
    
- "製作" ポータルとは別に "開発" ポータルをホストする。 
    
  **CQD Web ポータルと CQD Cube をさまざまなコンピューターでホストします。** Sql server インスタンスと sql server Analysis Services インスタンスの sql Server エディションを混在させて使用するための要件を持つ組織では、CQD ポータルと sql server Analysis Services インスタンスを組み合わせて使用することをお勧めします。 CQD ポータルをインストールして、複数のコンピューター上の CQD キューブ。 また、QoE アーカイブコンポーネントは、監視サーバーのパフォーマンスの制限を受けずに、QoE データをアーカイブするための持続可能な方法を組織が必要としている場合にのみ、インストールされる唯一の CQD コンポーネントにすることができます。
  
![単一サーバー CQD](../../media/f65be6f3-6bba-4c3d-b3ae-c05e03551b5b.png)
  
 **"製作" ポータルとは別に "開発" ポータルをホストする。** REST Api を使用して独自のカスタムレポートを作成する組織では、通常のユーザーによる通話品質の監視または調査のための追加の (CQD) ポータルインスタンスの展開をお勧めします。 開発ポータルは、ポータルに対するすべての変更を運用環境から分離することができます。 追加の web ポータルは、別のコンピューター (以下に表示) に展開することも、同じコンピューター上の異なる web ディレクトリに展開することもできます (表示されません)。 CQD のセットアッププロセスでは、事前に定義された web アプリケーション名を持つ既定の web サイトに CQD Web ポータルを展開するため、このような場合は、追加の CQD web ポータルを運用マシンに手動でコピーする必要があります。
  
![CQD マルチ サーバーの計画](../../media/2326e61e-b485-43e6-9f82-145237ba89cf.png)
  
### <a name="supported-topologies"></a>サポートされるトポロジ

CQD では、複数の QoEMetrics データベースからデータを結合することはできません。複数の Skype for Business Server トポロジがあり、それぞれが独自の監視サーバーを備えている場合と同じです。 各 CQD インスタンスは、QoEMetrics データベースを1つポイントする必要があります。 ただし、CQD では、監視サーバーのレポートワークロードの大半を軽減するため、Skype for Business Server トポロジごとに1つの監視サーバーを導入する必要がある大規模な組織では、すべてのトポロジに対して1つの監視サーバーを使用することを検討してください。
  
## <a name="infrastructure-requirements-for-cqd"></a>CQD のインフラストラクチャ要件
<a name="Infrastructure_Req"> </a>

CQD は、すべてのコンポーネントと依存コンポーネントを含め、仮想マシン、単一のコンピューター、複数のコンピューターに展開することができます。 以下に、ソフトウェアとハードウェアの最小要件を示します。 データの可用性とクエリのパフォーマンスは、アクティブな Skype for Business Server ユーザーの数とハードウェアと構成によって、分単位で異なる場合があります。そのため、以下でいくつかのパフォーマンス測定値が提供されます。
  
|||
|:-----|:-----|
|CQD 2015 の場合 <br/> |  <br/> |
|サポートされているオペレーティングシステム  <br/> |Windows Server 2008 R2、Windows Server 2012、Windows Server 2012 R2  <br/> |
|サポートされている SQL Server  <br/> |Sql Server 2012、SQL Server 2014、SQL Server 2016  <br/> |

|||
|:-----|:-----|
|CQD 2019 の場合 <br/> |  <br/> |
|サポートされているオペレーティングシステム  <br/> |Windows Server 2016、Windows Server 2019  <br/> |
|サポートされている SQL Server  <br/> |SQL Server 2017、SQL Server 2019  <br/> |
   
CQD は、Microsoft SQL Server、Microsoft SQL Server Analysis Services、Microsoft インターネットインフォメーションサービスを利用するため、CQD の最小ハードウェアおよびソフトウェア要件は、基本的にこれらの依存コンポーネントと同じです。 ただし、データの鮮度に関する組織の要件 (組織が生成する QoE データの量によって異なります) と展開コストに基づいて、追加の展開の考慮事項を行う必要があります。
  
CQD でのデータ処理は、次の2つの主要なステージに分かれています。 
  
- QoE アーカイブプロセス
    
- CQD キューブの処理
    
  **QoE アーカイブ処理。** QoE アーカイブ処理タスクは、監視サーバー上の QoE 指標データベースから QoE アーカイブデータベースにデータをコピーします。 タスクの処理時間が根本的に異なるパフォーマンス特性を持つという2つの状況があります。 1つ目は、CQD の最初のインストール後のものです。 新規インストール後に初めてタスクを実行すると、QoE アーカイブ処理タスクは、QoE Metrics データベースのすべてのデータを QoE アーカイブデータベースにコピーします。 2番目のプロセスは、この最初のラウンドの後の定期的な処理です。 QoE アーカイブ処理タスクは15分ごとに実行され、QoE 指標データベース内の新しい QoE レコードを処理します。 通常、CQD がインストールされているときに初めて実行されるため、最初の処理時間は問題ではありません。 ただし、CQD サーバーが大幅にプロビジョンされている場合、このタスクには数時間かかることがあります。 次の表を参照してください。例として、初期 QoE アーカイブ処理時間があります。
  
  **CQD キューブの処理。** キューブ処理タスクは、QoE アーカイブデータベースのデータをキューブに集計します。 最初のキューブ処理時間と後続のキューブ処理時間は、CQD キューブで使用される SQL Server Analysis Services エディションによって決定されます。 Standard edition が使用されている場合、最初のキューブ処理時間とその後のキューブ処理時間の違いはありません。キューブデータが更新されるたびに、常にすべての利用可能なデータが完全に処理されます。 (これは、QoE アーカイブデータベース内のデータ量が増加するにつれて、キューブの処理時間が長くなることを意味します)。ビジネスインテリジェンスエディションと SQL Server の Enterprise Edition では、パーティションがサポートされているため、いずれかのエディションを使用している場合は、最初の実行でのみ QoE アーカイブデータベース内のすべてのデータが処理されます。 以降の実行では、タスクが15分ごとにトリガーされるときに、タスクは、最後にタスクを実行した後に QoE アーカイブデータベースに追加された新しいレコードのみを処理します。 1日に1回、現在の月のデータが含まれているパーティションでも完全な処理が行われます。
  
物理マシンの特性は、CQD のパフォーマンスに影響を与える可能性があります。また、SQL Server コンポーネントから提供されているソフトウェア機能に影響する場合があります。 QoE アーカイブコンポーネントは、他のコンポーネントと比べてディスク負荷が高くなりますが、キューブコンポーネントの CPU とメモリの消費量は増加します。 これらのすべての要素は、CQD のデータ処理時間の合計に寄与します。これは、データの鮮度と可用性に直接影響します。 組織の個々のニーズに基づいて、ハードウェアとソフトウェアに関する決定を行う必要があります。 
  
### <a name="tested-hardware-configurations"></a>テストしたハードウェア構成

このセクションでは、環境に1つの QoEMetrics DB があることを前提としています。 
  
**マシンプロファイル**

|**Fax**|**CPU コア**|**RAM**|**同じディスク上の QoE アーカイブとキューブ**|**同じディスク上の QoE アーカイブと SQL Temp DB**|
|:-----|:-----|:-----|:-----|:-----|
|仮想マシン  <br/> |4  <br/> |7 GB  <br/> |はい  <br/> |はい  <br/> |
|4コア  <br/> |4  <br/> |20 GB  <br/> |はい  <br/> |いいえ  <br/> |
|8コア  <br/> |個  <br/> |32 GB  <br/> |はい  <br/> |いいえ  <br/> |
|16コア  <br/> |16  <br/> |128 GB  <br/> |いいえ  <br/> |いいえ  <br/> |
   
**パフォーマンスの結果**

|**Fax**|**QoE 指標の DB サイズ**|**SQL パーティション**|**ディスクの種類**|**ストリームの数**|**初期のアーカイブプロセス**|**最初のキューブプロセス**|**後続のアーカイブプロセス**|**後続のキューブプロセス**|
|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|
|仮想マシン  <br/> |900 MB  <br/> |同じ  <br/> |VHD (可変サイズ)  <br/> |.5 M  <br/> |30 m  <br/> |2 m  <br/> |30 s  <br/> |1 m  <br/> |
|仮想マシン  <br/> |9 GB  <br/> |同じ  <br/> |VHD (可変サイズ)  <br/> |5 M  <br/> |4 h  <br/> |15 m  <br/> |1 m  <br/> |5 m  <br/> |
|仮想マシン  <br/> |9 GB  <br/> |同じ  <br/> |VHD (固定サイズ)  <br/> |5 M  <br/> |2 h  <br/> |5 m  <br/> |1 m  <br/> |5 m  <br/> |
|仮想マシン  <br/> |30 + GB  <br/> |同じ  <br/> |VHD (固定サイズ)  <br/> |10 M  <br/> |15 h  <br/> |20 m  <br/> |2 m  <br/> |45 m  <br/> |
|8コア  <br/> |9 GB  <br/> |同じ  <br/> |複数のディスク  <br/> |5 M  <br/> |2 h  <br/> |5 m  <br/> |25 s  <br/> |5 m  <br/> |
|8コア  <br/> |9 GB  <br/> |多数  <br/> |複数のディスク  <br/> |5 M  <br/> |2 h  <br/> |15 m  <br/> |35 s  <br/> |2 m  <br/> |
|8コア  <br/> |30 + GB  <br/> |同じ  <br/> |複数のディスク  <br/> |20 M  <br/> |9 h  <br/> |20 m  <br/> |1 m  <br/> |20 m  <br/> |
|8コア  <br/> |30 + GB  <br/> |多数  <br/> |複数のディスク  <br/> |20 M  <br/> |9 h  <br/> |30 m  <br/> |2 m  <br/> |2 m  <br/> |
|4コア  <br/> |200 GB  <br/> |同じ  <br/> |複数のディスク  <br/> |125 M  <br/> |6 + 日  <br/> |7 h  <br/> |2 m  <br/> |6 h  <br/> |
|16コア  <br/> |500 GB  <br/> |多数  <br/> |複数のスピンドル  <br/> |250 M  <br/> |8日  <br/> |2 h  <br/> |2 m  <br/> |10 m  <br/> |
   
\*実際の展開では、QoE Metrics データベースはそれぞれ9か18か月分のデータを保持する必要があるため、これらは実際の展開では発生しません。
  
### <a name="service-account-requirements"></a>サービスアカウントの要件

CQD サーバー上の SQL エージェントで QoEArchiveDB にデータをインポートするために使用できるアカウント (QoEMetrics への読み取りアクセス権が必要) が必要です。
  
また、QoEArchiveDB からデータを取得するために、SSAS ジョブ用に別のアカウントを構成することが必要になる場合もあります (これはオプションのプロセスです)。
  
通常、IIS はネットワークサービスをアプリプール Id として使用しますが、サービスアカウントに構成することもできます。
  
### <a name="portal-access-control"></a>ポータルのアクセス制御

既定では、認証されたユーザーはすべてアクセスできます。 これは、IIS 承認規則を使用して特定のグループに制限することによって変更できます。
  
### <a name="pre-install-requirements"></a>プリインストールの要件

次の手順では、QoE Metrics データベースがすでにインストールされていて、Skype for Business Server のトポロジで実行されていることを前提としています。
  
#### <a name="hardware-requirements"></a>ハードウェア要件

CQD は、Microsoft SQL Server、Microsoft SQL Analysis Server、Microsoft Internet Information Server を利用するため、CQD の最小ハードウェアおよびソフトウェア要件は、基本的にこれらの依存コンポーネントと同じです。 ただし、データの鮮度に関する組織の要件 (組織が生成する QoE データの量によって異なります) と展開コストに基づいて、追加の展開の考慮事項を行う必要があります。
  
#### <a name="software-requirements"></a>ソフトウェア要件

CQD には、次のオペレーティングシステムが必要です。
  
- Windows Server 2008 R2 と IIS 7.5
    
- Windows Server 2012 と IIS 8.0
    
- Windows Server 2012 R2 と IIS 8.5

- Windows Server 2016 (IIS 10.0) (Skype for Business Server 2019 CQD のみ)

- Windows Server 2019 (Skype for Business Server 2019 CQD のみ)
    
必要な IIS の役割サービス (階層順) を次に示します。
  
- Web サーバー
    
  - HTTP 共通機能
    
  - 静的コンテンツ
    
  - 既定のドキュメント
    
  - アプリケーション開発
    
  - ASP.NET
    
  - ISAPI フィルター
    
  - 正常&amp;性診断
    
  - HTTP ログ
    
  - セキュリティ
    
  - URL 承認
    
  - Windows 認証
    
  - 管理ツール
    
  - IIS 管理コンソール
    
> [!NOTE]
>  上記の要件については、> 3.5 および4.5 バージョンの .Net framework を参照してください。 両方が必要です (特に 3.5 SP1 が必要です)。一部のシステムでは、ASP.NET が IIS のインストール前にセットアップされている場合、ASP.NET が IIS に登録されていない可能性があり > ます。 この問題は、対応する .Net バージョンのアプリケーションプールがないこと、およびアプリプール構成で .NET CLR のバージョンが見つからないことによって発生します。 Windows Server 2008 R2 でこのような問題を修正する`%systemroot%\Microsoft.NET\Framework64\4.0.30319\aspnet_regiis.exe -iru`には、を実行します。 Windows Server 2012 および Windows Server 2012 R2 では、 `dism /online /enable-Feature /all /FeatureName:WCF-HTTP-Activation45`実行後に、IIS Manager の既定の Web サイトから "ServiceModel" モジュールを削除します。 > 管理ツールはオプションですが、推奨されます。
  
PowerShell を使用してこれらの要件をインストールするには、次の手順を実行します。
  
```PowerShell
import-module servermanager
```

```PowerShell
add-windowsfeature Web-Server, Web-Static-Content, Web-Default-Doc, Web-Asp-Net, Web-Asp-Net45, Web-Net-Ext, Web-Net-Ext45, Web-ISAPI-Ext, Web-ISAPI-Filter, Web-Http-Logging, Web-Url-Auth, Web-Windows-Auth, Web-Mgmt-Console
```

次のバージョンの SQL Server がサポートされています。
  
- SQL Server 2012
    
- SQL Server 2014

- SQL Server 2016

- SQL Server 2017

- SQL Server 2019 (Skype for Business Server 2019 CQD のみ)
    
パフォーマンス上の理由から、ビジネスインテリジェンスまたは Enterprise edition をお勧めします。 これらのエディションでは、並列処理できる複数のパーティションファイルを使用できます。これは、複数の月または長いデータを処理する場合に便利です。 
  
推奨されませんが、Standard edition もサポートされています。 処理は1つのパーティションに制限されます (セットアップ時に構成する必要があります)。 
  
いずれの場合も、"データベースエンジンサービス" と "Analysis Services" をインストールする必要があります。 この機能は推奨されますが、Analysis Services の SQL Server Management Studio サポートを追加する "管理ツール-完了" 機能もインストールする必要があります。 機能選択画面は図のようになります。
  
![SQL Server 機能要件](../../media/37f2f64b-49c8-4620-94ba-f6d1ae9abf83.png)
  
SSAS のセットアップを構成する場合は、Analysis Services の構成で、"サーバーモード" を "多次元およびデータマイニングモード" に設定します。 
  
SQL Server ビジネスインテリジェンス機能のインストールと構成について詳しくは、「[多次元およびデータマイニングモードでの Analysis Services のインストール](https://msdn.microsoft.com/en-us/library/ms143708%28v=sql.110%29.aspx)」をご覧ください。
  
#### <a name="account-requirements"></a>アカウント要件

最低限の権限の原則として、3つのドメインサービスアカウントをお勧めします。 
  
- QoE Metrics データベースのログインセキュリティプリンシパルとして (db_datareader 権限を持つ) と、QoE Archive SQL Server インスタンスでのログインセキュリティプリンシパル (セットアップ時にリンクサーバーオブジェクトを作成するために必要) の両方が既に存在するもの。 このアカウントは、SQL Server エージェントジョブの "QoE アーカイブデータ" ステップを実行するために使用されます。
    
- SQL Server エージェントジョブの "プロセスキューブ" ステップを実行するために使用されるもの。 セットアップによって、QoE アーカイブデータベースへのログインセキュリティプリンシパル (読み取りと書き込みの権限を持つ) が作成され、キューブの QoE の役割 (フルコントロール権限を持つメンバー) も作成されます。
    
- Web ポータルと web Api に対して IIS ワーカープロセスを実行するために使用されるもの。 セットアップでは、QoE アーカイブデータベースへのログインセキュリティプリンシパル (読み取り特権を持つ)、リポジトリデータベースへのログインセキュリティプリンシパル (読み取りと書き込みの特権を持つ)、キューブの QoERole (フルコントロール権限を持つ) のメンバーを作成します。 
    
    > [!NOTE]
    > QoE アーカイブデータベースとリポジトリデータベースの両方が同じ SQL Server でホストされている場合、2つのユーザーマッピングを持つ1つのログインセキュリティプリンシパルのみが作成されます。 
  
最初の2つのアカウントは、"バックエンドサービスアカウント" として論理的に考慮することができ、最後のアカウントは "フロントエンドサービスアカウント" です。 推奨されませんが、どのような場合でも1つのアカウントを使用することができます。
  
> [!NOTE]
> インストールを開始するユーザーアカウントには、QoE 指標データベースへの読み取りアクセス権が必要です (また、インストールを実行する必要がある QoE アーカイブ DB サーバー上のコンピューター管理者権限を持っている必要があります)。 
  
## <a name="capacity-planning"></a>キャパシティプランニング
<a name="Infrastructure_Req"> </a>

CQD は、QoEMetrics への影響を最小限にするために設計されています。コードはデータをロックしないように最適化されており、インポートジョブは調整できます。
  
使用するハードウェアの種類は、同期を迅速に実行するための要件によって異なります。 ディスクのサイズ変更は、次のようになります。
  
- QoEArchive は、最初に QoEMetrics DB よりも大きく 1.5 x
    
- SSIS キューブはデータベースと比較して約 10 ~ 10 のデータを圧縮する
    
- データは毎月分割されます。パーティションを削除できる
    

