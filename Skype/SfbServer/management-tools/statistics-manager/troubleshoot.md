---
title: Skype for Business Server の統計情報マネージャーのトラブルシューティング
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 946189fa-521f-455c-9762-904e7e41b791
description: '概要: このトピックでは、Skype for Business Server の Statistics Manager の展開のトラブルシューティングを行います。'
ms.openlocfilehash: ea3d6f66003841e893ebe2dcc5d3fe02d0da125b
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/12/2021
ms.locfileid: "49821777"
---
# <a name="troubleshoot-statistics-manager-for-skype-for-business-server"></a>Skype for Business Server の統計情報マネージャーのトラブルシューティング
 
**概要:** Skype for Business Server の Statistics Manager の展開のトラブルシューティングを行う場合は、このトピックを参照してください。
  
このトピックでは、アプリケーション イベント ログに表示される可能性があるイベントを説明して Statistics Manager の展開をトラブルシューティングする方法と、イベントを修正するために実行する可能性がある適切なアクションについて説明します。 このトピックは、以下のセクションで構成されています。
  
- [エージェント イベント](troubleshoot.md#BKMK_Agent)
    
- [リスナー イベント](troubleshoot.md#BKMK_Listener)
    
- [Web サイトの問題](troubleshoot.md#BKMK_Website)
    
## <a name="agent-events"></a>エージェント イベント
<a name="BKMK_Agent"> </a>

- **1000** - プロセッサ リミターをセットアップできません (ジョブ オブジェクト) — 不明な理由
    
- **1001** - プロセスに対するプロセス制限は許可されません (おそらく既にジョブ オブジェクト内に存在します)。
    
    エージェントは Windows ジョブ オブジェクト内で実行され、メモリ使用量が自動的に制限されます。 エージェントが起動しない場合、これらのイベント エントリがイベント ログに記録されている場合、ジョブ オブジェクトをサーバー上でインスタンス化できません。 これを回避するには、構成ファイルの値を変更することで、メモリ上限を削除できます。
    
  ```console
  C:\Program Files\Skype for Business Server StatsMan Agent\PerfAgent.exe.config
  ```

    "MaxProcessMemoryMB" を検索し、次に示すように値を "0" に変更します。
    
  ```xml
  <setting name="MaxProcessMemoryMB" serializeAs="String"> <value>300</value> </setting>
  ```

    > [!NOTE]
    > この変更を行った場合、エージェントは通常 100 MB のメモリを消費しますが、既定のように強制的に \< 300 MB に制限されません。 この変更を行った場合は、メモリ使用量を監視して、エージェントがホスト マシンで大量のメモリを消費することを確認することをお勧めします。 
  
- **2000** - クライアントの初期化エラー
    
- **2001**- どの送信元 IP 上のサービスにも接続可能
    
    エージェントがリスナー コンピューターに接続できない場合は、次の確認を行います。
    
    1. リスナー サービスがリスナー コンピューターで実行されている必要があります。 実行されていない場合は、Redis がサーバーで実行されているのを確認し、リスナー サービスを再起動します。
        
        リスナー コンピューターの Statistics Manager イベント ログを調して、Statistics Manager Listener サービス自体に問題が発生しなかからなか確認します。
        
    2. telnet などの接続ツールを使用して、エージェント コンピューターから適切なポートのリスナーへの接続を確認します。
        
        接続されていない場合は、リスナー コンピューターが接続されているネットワークの種類 (プライベート/パブリック/ドメイン) に対して、受信ファイアウォール規則がリスナー コンピューターで有効になっている必要があります。 リスナー コンピューターがドメインに参加していない場合、ネットワークがパブリックとして一覧表示される可能性があります。その場合、Statistics Manager と一緒にインストールされたファイアウォールルールは既定では適用されません。
    
- **4000** - リスナーからサーバー情報をダウンロードできません (不明な理由)
    
  - **4001** - リスナー トポロジにサーバーが見つかりません
    
    このエラーは、サーバーがリスナーに正常に接続しているが、サーバーがリスナーのキャッシュ内のトポロジに追加されていない場合に発生します。 解決策のオプション:
    
  - トポロジをインポートする手順に従ってください。 「 [トポロジのインポート」を参照してください](deploy.md#BKMK_ImportTopology)。 
    
  - エージェントがトポロジにリストされていないサーバー上にある場合 (たとえば、SQL AlwaysOn クラスター内のノード)、トポロジのインポートの手順に従って手動でエージェントを追加する必要[があります。](deploy.md#BKMK_ImportTopology)
    
  - **4002** - リスナーのパスワードが無効です
    
    エージェントが使用を試みる暗号化されたパスワードが、リスナー自体のサービス パスワードと一致しません。 エージェントをアンインストールし、正しいサービス パスワードを使用して再インストールします。
    
  - **4003** - 証明書の拇印が一致しません
    
    インストール時にエージェントに与えられた証明書の拇印が、リスナーが現在使用している証明書の拇印と一致しならないので、接続は拒否されます。 エージェントをアンインストールし、正しい証明書の拇印を使用して再インストールします。
    
  - **4004** - 無効な応答または HttpStatusCode
    
    リスナーが予期した状態で応答していない。 
    
  - 接続がプロキシされている場合は、プロキシ構成を確認します。
    
  - リスナー コンピューターの StatsMan ログで、構成に関する問題を確認します。
    
  - **4005** - XML を逆シリアル化できない
    
    リスナー サーバー上のサーバー情報が破損しているか、エージェント コンピューターとリスナー コンピューターの間にバージョンの不一致がある可能性があります。 バージョンが一致し、リスナーのイベント ログに問題が記録されていないか確認します。
    
## <a name="listener-events"></a>リスナー イベント
<a name="BKMK_Listener"> </a>

- **10000** - スタートアップ エラー不明な理由 (これらは回復不能であり、サービスは結果として停止/クラッシュします)
    
  - **10001** - 構成の問題
    
    通常、このエラーは、[listener_install_location]\PerfAgentListener.exe.config ファイルが手で変更され、アプリケーションが読み取りできない場合に発生します。
    
  - **10002** - HTTP リスナー初期化エラー
    
    このイベントは、通常、インストール中に URL ACL が正しく設定されていないか、SSL 証明書が無効な場合にログに記録されます。 構成内の証明書が有効な証明書を確認します。 インストールされている場合は、「統計マネージャーを展開する」の手順に従ってリスナー [を再インストールします](deploy.md#BKMK_Deploy)。
    
  - **10003** - Redis エラー
    
  - **10004** - キャッシュ インフラストラクチャの障害
    
  - **10007** - 設定 (redis に格納)
    
    リスナーは Redis に接続できないか、キャッシュから整形データを取得する必要が生じ、開始できない。 Redis サービスがサーバーで開始され、適切に構成されていることを確認します。
    
  - **10005** — サーバー情報の取得/解析
    
    Redis キャッシュのトポロジ情報が無効です。 まず、Redis とリスナーを再起動します。 エラーが解決しない場合は、「 [トポロジをインポートしてトポロジ](deploy.md#BKMK_ImportTopology) データを再作成する」を参照してください。
    
- **10100** — Redis PING の停止
    
  - **10101** - Redis PING の停止が続く (60 秒ごとに)
    
  - **30100** — Redis PING の停止が復元されました
    
    リスナーが Redis に接続できない場合、これらはログに記録されます。 Redis が開始され、リスナーと Redis 間のネットワーク接続が使用可能な場合。
    
- **10200** - Redis 書き込み停止
    
  - **10201** - Redis 書き込みの停止が継続しました (60 秒ごとに)
    
  - **30100** - Redis 書き込みの停止が解決されました
    
    これらは、リスナーが Redis キャッシュに書き込めない場合にログに記録されます。 Redis が開始され、リスナーと Redis 間のネットワーク接続が使用可能な場合。
    
- **30000** — 正常に開始されました
    
    リスナーが開始されるたびログに記録されます。
    
- **22000** - Statistics Manager エージェントの初期化に成功しました。
    
- **23000** - EventLogQueryManager の初期化に成功しました (初回または失敗後)
    
- **24000** - serverinfo の初期化に成功しました (初回または失敗後)。
    
- **25000** - リスナーが投稿に失敗した後 (または最初に成功した投稿) 後にオンラインに戻る
    
- **5000** — データを投稿するリスナーのオフラインの開始
    
- **5001** - リスナーがまだオフラインで長期続く
    
    これらのイベントは、監視/警告/消去の問題に役立ちます。
    
## <a name="website-issues"></a>Web サイトの問題
<a name="BKMK_Website"> </a>

- Chrome でのログイン プロンプトの繰り返し - これはバージョン 1.1 で解決されたバグでした。 Chrome ブラウザーでログイン プロンプトが繰り返し表示される場合は、最新バージョンの Statistics Manager にアップグレードしてください。 実行している Web サイトのバージョンを確認するには、次の手順を実行します。
    
  - エクスプローラーで開きます (既定のディレクトリ)
    
  - ビューを右クリックしてStatsManHubWebSite.dllプロパティを表示します。
    
  - [KHI 横] ビューまたは [カウンターの詳細] ビューでコンピューターが見つからない場合は、そのコンピューターがサイトおよびプールのメンバーである必要があります。 表示されていない場合、これらのビューには表示されません。 トポロジ内のサーバーのサイトとプールの定義については、「トポロジのインポート」を [参照してください](deploy.md#BKMK_ImportTopology)。
    
  - 製品バージョンが説明の詳細に表示されます。
    
## <a name="for-more-information"></a>関連情報
<a name="BKMK_Website"> </a>

詳細については、次のトピックを参照してください。
  
- [Skype for Business Server の Statistics Manager の計画](plan.md)
    
- [Skype for Business Server の Statistics Manager の展開](deploy.md)
    
- [Skype for Business Server の Statistics Manager のアップグレード](upgrade.md)
