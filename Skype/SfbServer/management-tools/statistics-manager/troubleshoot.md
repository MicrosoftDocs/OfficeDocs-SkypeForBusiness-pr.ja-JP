---
title: Skype for Business Server の統計情報マネージャーのトラブルシューティング
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.collection: IT_Skype16
ms.assetid: 946189fa-521f-455c-9762-904e7e41b791
description: '概要: このトピックを参照して、統計マネージャーの展開のトラブルシューティングを行Skype for Business Server。'
ms.openlocfilehash: 622e3fdecc9cbe0def1f87a623692cb93889bb00
ms.sourcegitcommit: 556fffc96729150efcc04cd5d6069c402012421e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/26/2021
ms.locfileid: "58612056"
---
# <a name="troubleshoot-statistics-manager-for-skype-for-business-server"></a>Skype for Business Server の統計情報マネージャーのトラブルシューティング
 
**概要:** このトピックを参照して、統計マネージャーの展開のトラブルシューティングを行Skype for Business Server。
  
このトピックでは、アプリケーション イベント ログに表示される可能性があるイベントと、イベントの修正に必要な適切なアクションを説明することで、Statistics Manager の展開をトラブルシューティングする方法について説明します。 このトピックは、以下のセクションで構成されています。
  
- [エージェント イベント](troubleshoot.md#BKMK_Agent)
    
- [リスナー イベント](troubleshoot.md#BKMK_Listener)
    
- [Web サイトの問題](troubleshoot.md#BKMK_Website)
    
## <a name="agent-events"></a>エージェント イベント
<a name="BKMK_Agent"> </a>

- **1000** - プロセッサ リミター (Job Object) をセットアップできません — 不明な理由
    
- **1001** - プロセスの制限は、プロセスで許可されません (おそらく既に Job オブジェクト内にある可能性があります)
    
    エージェントは、ジョブ オブジェクトの内部でWindowsメモリフットプリントを自動的に制限します。 エージェントが起動しない場合、これらのイベント エントリがイベント ログに存在する場合、ジョブ オブジェクトをサーバー上でインスタンス化できません。 これを回避するには、構成ファイルの値を変更することで、メモリ上限を削除できます。
    
  ```console
  C:\Program Files\Skype for Business Server StatsMan Agent\PerfAgent.exe.config
  ```

    "MaxProcessMemoryMB" を検索し、次に示すように値を "0" に変更します。
    
  ```xml
  <setting name="MaxProcessMemoryMB" serializeAs="String"> <value>300</value> </setting>
  ```

    > [!NOTE]
    > この変更が行われた場合、エージェントは通常 100 MB のメモリを消費しますが、既定では 300 MB に強制的に制限 \< されません。 この変更が行われた場合は、エージェントがホスト コンピューターで大量のメモリを消費しなかからないよう、メモリ使用量を監視することをお勧めします。 
  
- **2000** - クライアントの初期化エラー
    
- **2001**- 任意の送信元 IP でサービスに接続を確立する必要はありません
    
    エージェントがリスナー コンピューターに接続できない場合は、次の情報を確認します。
    
    1. リスナー サービスがリスナー コンピューターで実行されている必要があります。 実行されていない場合は、Redis がサーバーで実行されている状態を確認し、リスナー サービスを再起動します。
        
        リスナー コンピューターの Statistics Manager イベント ログを確認して、Statistics Manager リスナー サービス自体に問題がないか確認します。
        
    2. Telnet などの接続ツールを使用して、エージェント コンピューターから正しいポートのリスナーへの接続を確認します。
        
        接続されていない場合は、リスナー コンピューターが接続されているネットワークの種類 (プライベート/パブリック/ドメイン) のリスナー コンピューターで受信ファイアウォールルールが有効になっているか確認します。 リスナー コンピューターがドメインに参加していない場合、ネットワークはパブリックとして表示され、その場合、Statistics Manager にインストールされているファイアウォール ルールは既定では適用されません。
    
- **4000** - リスナーからサーバー情報をダウンロードできません (不明な理由)
    
  - **4001** - リスナー トポロジでサーバーが見つかりません
    
    このエラーは、サーバーがリスナーに正常に接続しているが、サーバーがリスナーのキャッシュ内のトポロジに追加されていない場合に発生します。 解決策のオプション:
    
  - トポロジをインポートする手順に従ってください。 「 [トポロジのインポート」を参照してください](deploy.md#BKMK_ImportTopology)。 
    
  - エージェントがトポロジにリストされていないサーバー (たとえば、SQL AlwaysOn クラスター内のノード) にある場合は、「トポロジのインポート」の手順に従ってエージェントを手動で追加する必要[があります](deploy.md#BKMK_ImportTopology)。
    
  - **4002** - リスナー パスワードが無効です
    
    エージェントが使用しようとする暗号化されたパスワードは、リスナー自体のサービス パスワードと一致しません。 正しいサービス パスワードを使用してエージェントをアンインストールし、再インストールします。
    
  - **4003** - 証明書の拇印の不一致
    
    インストール時にエージェントに与えられた証明書の拇印は、リスナーが現在使用している証明書の拇印と一致し、したがって接続は拒否されます。 エージェントをアンインストールし、正しい証明書拇印を使用してエージェントを再インストールします。
    
  - **4004** - 無効な応答または HttpStatusCode
    
    リスナーが予期した状態で応答していない。 
    
  - 接続がプロキシされている場合は、プロキシ構成を確認します。
    
  - リスナー コンピューターの StatsMan ログで、構成に関する問題を確認します。
    
  - **4005** - XML のシリアル化を取りやめられなかった
    
    リスナー サーバー上のサーバー情報が壊れているか、エージェント コンピューターとリスナー コンピューターのバージョンが一致しない可能性があります。 バージョンが一致し、リスナー イベント ログで問題が発生した場合はチェックしてください。
    
## <a name="listener-events"></a>リスナー イベント
<a name="BKMK_Listener"> </a>

- **10000** - スタートアップエラー 不明な理由 (これらは回復不能であり、結果としてサービスが停止/クラッシュします)
    
  - **10001** - 構成の問題
    
    通常、これは[listener_install_location]\PerfAgentListener.exe.configファイルが手で変更され、アプリケーションで読み取りできない場合に発生します。
    
  - **10002** : HTTP リスナーの初期化エラー
    
    このイベントは通常、インストール中に URL ACL が正しく設定されていないか、SSL 証明書が無効な場合にログに記録されます。 構成内の証明書が有効である必要があります。 その場合は、[統計マネージャーの展開] の指示に従って [リスナーを再インストールします](deploy.md#BKMK_Deploy)。
    
  - **10003** - Redis エラー
    
  - **10004** : インフラストラクチャのキャッシュエラー
    
  - **10007** — 設定 (redis に格納)
    
    リスナーは Redis に連絡したり、キャッシュから整形されたデータを取得したりする必要が生じ、開始する必要があります。 Redis サービスがサーバーで正常に開始および構成されていることを確認します。
    
  - **10005** - サーバー情報の取得/解析
    
    Redis キャッシュ内のトポロジ情報が無効です。 まず、Redis とリスナーを再起動します。 エラーが解決しない場合は、「 [トポロジをインポートして](deploy.md#BKMK_ImportTopology) トポロジ データを再作成する」を参照してください。
    
- **10100** - Redis PING の停止
    
  - **10101** - Redis PING の継続的な停止 (60 秒ごとに)
    
  - **30100** - Redis PING の停止が復元されました
    
    リスナーが Redis に接続できない場合、これらはログに記録されます。 Redis が開始され、リスナーと Redis の間のネットワーク接続が利用できます。
    
- **10200** - Redis 書き込み停止
    
  - **10201** - Redis Write の停止が継続 (60 秒ごとに)
    
  - **30100** - Redis 書き込み停止が解決されました
    
    これらは、リスナーが Redis キャッシュに書き込めない場合にログに記録されます。 Redis が開始され、リスナーと Redis の間のネットワーク接続が利用できます。
    
- **30000** - 正常に開始されました
    
    リスナーが開始されるごとにログに記録されます。
    
- **22000** : 統計マネージャー エージェントの初期化に成功しました。
    
- **23000** - EventLogQueryManager の初期化が成功しました (初回または失敗後)
    
- **24000** - serverinfo の初期化が成功しました (初回または失敗後)
    
- **25000** - リスナーが投稿に失敗した後 (または最初に成功した投稿) 後にオンラインに戻る
    
- **5000** - データを投稿するリスナーオフラインの開始
    
- **5001** - リスナーがオフライン状態で長期に及び続く
    
    これらのイベントは、問題の監視/通知/クリアに役立ちます。
    
## <a name="website-issues"></a>Web サイトの問題
<a name="BKMK_Website"> </a>

- Chrome での繰り返しログイン プロンプト - これはバージョン 1.1 で解決されたバグでした。 Chrome ブラウザーでログインプロンプトが繰り返し表示される場合は、最新バージョンの Statistics Manager にアップグレードしてください。 実行している Web サイトのバージョンを確認するには、次の手順を実行します。
    
  - エクスプローラーで開く (既定のディレクトリ)
    
  - プロパティを右クリックStatsManHubWebSite.dllプロパティを表示します。
    
  - コンピューターが [KHI ランドスケープ] ビューまたは [カウンターの詳細] ビューで見つからない場合は、そのコンピューターがサイトとプールのメンバーである必要があります。 表示されていない場合は、これらのビューには表示されません。 トポロジ内のサーバーのサイトとプールを定義する方法については [、「Import the topology」を参照してください](deploy.md#BKMK_ImportTopology)。
    
  - 製品のバージョンが [説明] の詳細に表示されます。
    
## <a name="for-more-information"></a>関連情報
<a name="BKMK_Website"> </a>

詳細については、次のトピックを参照してください。
  
- [Skype for Business Server の Statistics Manager の計画](plan.md)
    
- [Skype for Business Server の Statistics Manager の展開](deploy.md)
    
- [Skype for Business Server の Statistics Manager のアップグレード](upgrade.md)
