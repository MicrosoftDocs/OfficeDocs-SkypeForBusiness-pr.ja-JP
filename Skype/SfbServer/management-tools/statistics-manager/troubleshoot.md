---
title: Skype for Business Server の統計情報マネージャーのトラブルシューティング
ms.reviewer: ''
ms.author: serdars
author: SerdarSoysal
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
ms.localizationpriority: medium
ms.collection: IT_Skype16
ms.assetid: 946189fa-521f-455c-9762-904e7e41b791
description: '概要: このトピックを読んで、Skype for Business Server用 Statistics Manager のデプロイのトラブルシューティングを行います。'
ms.openlocfilehash: a7604b15826ee55e127cd24447b0557b24b78548
ms.sourcegitcommit: 296862e02b548f0212c9c70504e65b467d459cc3
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/25/2022
ms.locfileid: "65675279"
---
# <a name="troubleshoot-statistics-manager-for-skype-for-business-server"></a>Skype for Business Server の統計情報マネージャーのトラブルシューティング

**概要：** Skype for Business Server用 Statistics Manager のデプロイのトラブルシューティングについては、このトピックを参照してください。

このトピックでは、アプリケーション イベント ログに表示される可能性があるイベントと、イベントを修正するために実行する可能性がある適切なアクションについて説明することで、Statistics Manager のデプロイのトラブルシューティングを行う方法について説明します。 このトピックは、以下のセクションで構成されています。

- [エージェント イベント](troubleshoot.md#BKMK_Agent)

- [リスナー イベント](troubleshoot.md#BKMK_Listener)

- [Web サイトの問題](troubleshoot.md#BKMK_Website)

## <a name="agent-events"></a>エージェント イベント
<a name="BKMK_Agent"> </a>

- **1000** — プロセッサ リミッタをセットアップできません (ジョブ オブジェクト) — 不明な理由

- **1001** - プロセスの制限はプロセスで許可されていません (おそらく既にジョブ オブジェクト内)

    エージェントは、Windows ジョブ オブジェクト内で実行され、メモリ フットプリントが自動的に制限されます。 エージェントが起動せず、これらのイベント エントリがイベント ログに存在する場合、ジョブ オブジェクトはサーバー上でインスタンス化できません。 これを回避するには、構成ファイルの値を変更することで、メモリの上限を削除できます。

  ```console
  C:\Program Files\Skype for Business Server StatsMan Agent\PerfAgent.exe.config
  ```

    "MaxProcessMemoryMB" を検索し、次のように値を "0" に変更します。

  ```xml
  <setting name="MaxProcessMemoryMB" serializeAs="String"> <value>300</value> </setting>
  ```

    > [!NOTE]
    > この変更が行われた場合、エージェントは一般に 100 MB のメモリを消費 \< しますが、既定では強制的に 300 MB に制限されることはありません。 この変更が行われた場合は、エージェントがホスト マシン上で大量のメモリを消費しないように、メモリ使用量を厳密に監視することをお勧めします。

- **2000** — クライアント初期化エラー

- **2001** - ソース IP 上のサービスに接続できませんでした

  エージェントがリスナー コンピューターに接続できない場合は、次を確認します。

  1. リスナー サービスがリスナー コンピューターで実行されていることを確認します。 そうでない場合は、Redis がそのサーバーで実行されていることを確認し、リスナー サービスを再起動します。

     Statistics Manager リスナー サービス自体に問題がないことを確認するには、リスナー コンピューターの Statistics Manager イベント ログを確認します。

  2. Telnet などの接続ツールを使用して、エージェント コンピューターから正しいポート上のリスナーへの接続を確認します。

     そうでない場合は、リスナー コンピューターが接続されているネットワークの種類 (プライベート/パブリック/ドメイン) に対して、リスナー コンピューターで受信ファイアウォール規則が有効になっていることを確認します。 リスナー コンピューターがドメインに参加していない場合、ネットワークはパブリックとして一覧表示され、その場合、Statistics Manager でインストールされたファイアウォール規則は既定では適用されません。

- **4000** — リスナーからサーバー情報をダウンロードできない (原因不明)

  - **4001** — リスナー トポロジでサーバーが見つかりません

    このエラーは、サーバーがリスナーに正常に接続されているが、サーバーがリスナーのキャッシュ内のトポロジに追加されなかった場合に発生します。 解決オプション:

  - トポロジをインポートする手順に従っていることを確認します。 [「トポロジをインポートする」を参照してください](deploy.md#BKMK_ImportTopology)。

  - エージェントがトポロジに一覧表示されていないサーバー上にある場合 (たとえば、SQL AlwaysOn クラスター内のノード)、トポロジのインポートの手順に従ってエージェントを手動で追加[する必要があります](deploy.md#BKMK_ImportTopology)。

  - **4002** — 無効なリスナー パスワード

    エージェントが使用しようとしている暗号化されたパスワードが、リスナー自体のサービス パスワードと一致しません。 エージェントをアンインストールし、正しいサービス パスワードを使用して再インストールします。

  - **4003** — 証明書の拇印の不一致

    インストール時にエージェントに与えられた証明書の拇印が、リスナーが現在使用している証明書の拇印と一致しないため、接続は拒否されます。 エージェントをアンインストールし、正しい証明書の拇印を使用して再インストールします。

  - **4004** — 無効な応答または HttpStatusCode

    リスナーが予期した状態で応答していません。

  - 接続がプロキシされている場合は、プロキシ構成を確認します。

  - リスナー コンピューターの StatsMan ログで、構成に関する問題がないか確認します。

  - **4005** - XML をシリアル化解除できませんでした

    リスナー サーバーのサーバー情報が破損しているか、エージェントコンピューターとリスナー コンピューターの間にバージョンが一致しない可能性があります。 バージョンが一致していることを確認し、リスナー イベント ログで問題がないか確認します。

## <a name="listener-events"></a>リスナー イベント
<a name="BKMK_Listener"> </a>

- **10000** - スタートアップ エラー不明な理由 (これらは回復不可能であり、結果としてサービスが停止/クラッシュします)

  - **10001** — 構成の問題

    通常、これは[listener_install_location]\PerfAgentListener.exe.config ファイルが手動で変更され、アプリケーションで読み取ることができない場合に発生します。

  - **10002** - HTTP リスナー初期化エラー

    このイベントは、通常、インストール中に URL ACL が正しく設定されていない場合、または SSL 証明書が無効な場合にログに記録されます。 構成内の証明書が有効であることを確認します。 この場合は、 [Statistics Manager のデプロイ](deploy.md#BKMK_Deploy)の手順に従ってリスナーを再インストールします。

  - **10003** — Redis エラー

  - **10004** - キャッシュ インフラストラクチャエラー

  - **10007** - 設定 (redis に格納)

    リスナーが Redis に接続できなかったか、キャッシュから整形式のデータを取得できず、開始できませんでした。 Redis サービスが開始され、サーバー上で正しく構成されていることを確認します。

  - **10005** - サーバー情報の取得/解析

    Redis キャッシュ内のトポロジ情報が無効です。 最初に、Redis とリスナーを再起動します。 エラーが解決しない場合は、「 [トポロジをインポートしてトポロジ](deploy.md#BKMK_ImportTopology) データを再作成する」を参照してください。

- **10100** — Redis PING の停止

  - **10101** — Redis PING によって停止が続く (60 秒ごと)

  - **30100** — Redis PING の停止が復元された

    リスナーが Redis に接続できない場合、これらはログに記録されます。 Redis が開始され、リスナーと Redis 間のネットワーク接続が使用可能であることを確認します。

- **10200** — Redis 書き込み停止

  - **10201** - Redis 書き込み停止が継続された (60 秒ごと)

  - **30100** - Redis 書き込み停止が解決済み

    リスナーが Redis キャッシュに書き込めなくなった場合、これらはログに記録されます。 Redis が開始され、リスナーと Redis 間のネットワーク接続が使用可能であることを確認します。

- **30000** — 正常に開始されました

    リスナーが開始されるたびにログに記録されます。

- **22000** - Statistics Manager エージェントの初期化に成功しました。

- **23000** - EventLogQueryManager の初期化が成功しました (初回または失敗後)

- **24000** - serverinfo の初期化が成功しました (初回または失敗後)

- **25000** - リスナーがオンラインに戻った後、投稿に失敗した (または最初に成功した投稿)

- **5000** — データを投稿するためのリスナーオフラインの開始

- **5001** - リスナーは引き続き長期間オフラインです

    これらのイベントは、問題の監視/アラート/クリアに役立ちます。

## <a name="website-issues"></a>Web サイトの問題
<a name="BKMK_Website"> </a>

- Chrome での繰り返しログイン プロンプト - これはバージョン 1.1 で解決されたバグでした。 Chrome ブラウザーでログイン プロンプトが繰り返し表示される場合は、最新バージョンの Statistics Manager にアップグレードしていることを確認してください。 実行している Web サイトのバージョンを確認するには、

  - エクスプローラーで開きます (既定のディレクトリ)

  - StatsManHubWebSite.dllを右クリックし、そのプロパティを表示します。

  - コンピューターが [KHI ランドスケープ] ビューまたは [カウンターの詳細] ビューで見つからない場合は、サイトとプールのメンバーであることを確認します。 表示されない場合は、それらのビューには表示されません。 トポロジ内のサーバーのサイトとプールの定義については、「トポロジのインポート」を参照 [してください](deploy.md#BKMK_ImportTopology)。

  - 製品のバージョンが説明の詳細に表示されます。

## <a name="for-more-information"></a>関連情報
<a name="BKMK_Website"> </a>

詳細については、次のトピックを参照してください。

- [Skype for Business Server の Statistics Manager の計画](plan.md)

- [Skype for Business Server の Statistics Manager の展開](deploy.md)

- [Skype for Business Server の Statistics Manager のアップグレード](upgrade.md)
