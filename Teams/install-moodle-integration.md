---
title: マイクロソフト チームと Moodle の統合をインストールします。
author: MicrosoftHeidi
ms.author: heidip
manager: serdars
ms.date: 05/01/2019
ms.topic: article
ms.service: msteams
ms.reviewer: ''
search.appverid: MET150
description: インストールし、マイクロソフトのチームの Moodle の統合アプリケーションを構成する方法について説明します。
keywords: Moodle アプリケーションの統合プラグインをチームします。
localization_priority: Normal
MS.collection: Teams_ITAdmin_Help
appliesto: Microsoft Teams
ms.openlocfilehash: 92259a9ef01232aaeca67089b5d654fe302f1224
ms.sourcegitcommit: 9a99be1365df439f9443f31240aa5311782458df
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/14/2019
ms.locfileid: "34055367"
---
# <a name="install-moodle-integration-with-microsoft-teams"></a>マイクロソフト チームと Moodle の統合をインストールします。

> [!VIDEO https://www.youtube.com/embed/OHlPt22nKoE]

マイクロソフトのチームとは、 [Moodle](https://moodle.org/)で最も人気のある、オープン ソースの世界では、学習管理システム (LMS) が統合されています。 この統合により、教育者、教師 Moodle のコースの周りの共同作業の成績と、割り当てに関するご質問、最新のチーム内のすべての通知!

IT 管理者がこの統合を容易にセットアップするために、次の機能を備えた、オープン ソースの Office 365 の Moodle プラグインを更新しました。

- Azure AD に、Moodle のサーバーの自動登録
- Azure に、Moodle のアシスタントの bot の展開を 1 回のクリック
- チーム、または Moodle のコースを選択するすべてのチーム登録の自動同期の自動プロビジョニング
- Moodle のタブと各同期のチーム (準備中) に Moodle のアシスタントの bot の自動インストール
- (準備中)、プライベート チーム アプリケーション ストアに Moodle のアプリケーションを公開する 1 回のクリック

## <a name="prerequisites"></a>前提条件

インストールする必要がありますこのアプリケーションを構成します。

- Moodle 管理者の資格情報
- Azure AD 管理者の資格情報
- Azure サブスクリプションで新しいリソースを作成します。

## <a name="step-1-install-the-office-365-moodle-plugin"></a>手順 1: Office 365 の Moodle プラグインをインストールします。

> [!VIDEO https://www.youtube.com/embed/SETEC5nzMgk]

マイクロソフト チームの Moodle の統合は、オープン ソースの[Office 365 の Moodle プラグイン](https://github.com/Microsoft/o365-moodle)によって電源が。 Moodle サーバー上のプラグインをインストールします。

1. [Office 365 のプラグインの設定](https://moodle.org/plugins/pluginversions.php?plugin=local_o365)をダウンロードし、ローカル コンピューターに保存します。 3.5 またはそれ以降のバージョンを使用する必要があります。
2. Moodle 管理者は、サーバーにサインインし、左側のナビゲーション ウィンドウから **[サイトの管理**を選択します。
3. **プラグイン**」タブを選択し、**プラグインをインストール**] をクリックします。
4. **ZIP ファイルからプラグインをインストール**] セクションの [**ファイルの選択]** ボタンをクリックします。
5. 左側のナビゲーション ウィンドウから**ファイルをアップロードする**オプションを選択の上、ダウンロードしたファイルを参照して、**このファイルをアップロード**] をクリックします。
6. 管理ダッシュ ボードに左側のナビゲーション ウィンドウから、[**サイトの管理**] オプションを選択します。 **ローカルのプラグイン**までスクロールし、 **Microsoft Office 365 との統合**] リンクをクリックします。 この構成ページをブラウザーの別タブで開いたままにする: 使用する、このプロセスの残りの部分。

[Moodle マニュアル](https://docs.moodle.org/34/en/Installing_plugins)の Moodle プラグインをインストールする方法の詳細が表示されます。

> [!IMPORTANT]
> Office 365 の Moodle プラグインの設定ページをブラウザーの別タブで開いたままにする: このプロセス全体のページのこのセットに返すことを説明します。

Moodle サイトを既にがないでしょうか。 チェック アウト当社の Moodle の Azure[リポジトリの索引](https://github.com/azure/moodle)簡単に Azure の Moodle のインスタンスを展開し、必要に応じてカスタマイズすることもできます。

## <a name="step-2-configure-the-connection-between-the-office-365-plugin-and-azure-active-directory"></a>手順 2: Office 365 のプラグインと Azure Active Directory との間の接続を構成します。

> [!VIDEO https://www.youtube.com/embed/FpGEezaJ3SA]

次に Moodle を (Azure AD) Azure Active Directory 内のアプリケーションとして登録する必要があります。 このプロセスを完了するための PowerShell スクリプトを提供してきました。 PowerShell スクリプトの準備、新しい Azure AD アプリケーションを Office 365 の Moodle プラグインで使用する、Office 365 テナントにします。 スクリプトは、O365 テナントのアプリケーションのプロビジョニング、必要な応答 Url と、準備されたアプリケーションのアクセス許可を設定し、AppID とキーを取得します。 O365 Moodle プラグインの設定ページで AppID とキーが生成されたを使用するには Azure AD に、Moodle のサーバーを構成します。 PowerShell スクリプトの自動化は、手動の手順の詳細を表示する場合は、完全な[プラグインのドキュメント](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application)で検索できます。

1. プラグインを Microsoft Office 365 との統合] ページで、[**設定**] タブを選択します。
2. **PowerShell スクリプトのダウンロード**] ボタンをクリックし、スクリプトをローカル コンピューター上に保存します。
3. ZIP ファイルからの PowerShell スクリプトを準備する必要があります。 その手順は次のとおりです。
    1. ダウンロードし、Moodle-AzureAD-Powershell.zip のファイルを抽出します。
    2. 抽出したフォルダーを開きます。
    3. Moodle-AzureAD-Script.ps1 ファイルを右クリックし、**プロパティ**を選択します。
    4. [プロパティ] ウィンドウの [**全般**] タブで**ブロックを解除する**] チェック ボックスの下部にある**セキュリティ**属性。
    5. **[OK]** をクリックします。
    6. 抽出したフォルダーのディレクトリ パスをコピーします。
4. 次に管理者として PowerShell を実行します。
    1. [開始] をクリックします。
    2. **PowerShell**をタイプします。
    3. **Windows PowerShell**を右クリックします。
    4. [**管理者として実行**] をクリックします。
5. 入力して、展開したディレクトリに移動`cd ...\...\Moodle-AzureAD-Powershell`、`...\...`ディレクトリへのパスです。
6. PowerShell スクリプトを実行します。
    1. 入力`Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`。
    2. 入力`.\Moodle-AzureAD-Script.ps1`。
    3. O365 ポップアップ ウィンドウに管理者アカウントにサインインします。
    4. AD の Azure アプリケーション (たとえば、 **Moodle と Moodle プラグイン**) の名前を入力します。
    5. Moodle サーバの URL を入力します。
    6. **アプリケーション ID**と**アプリケーション キー** 、スクリプトによって生成されたコピーし、それらを保存します。
7. 次に Office 365 の Moodle プラグイン ID とキーを追加する必要があります。 プラグインの管理] ページに戻ります (**[サイトの管理** > **プラグイン** > **Microsoft Office 365 と統合**)。
8. [**セットアップ**] タブで、**アプリケーション ID**と**アプリケーション キー**が以前は、コピーする追加し、**変更を保存**] をクリックします。
9. 1 回、ページの更新では、**接続方法の選択**と呼ばれる新しいセクションが表示されます。 **[既定**] というラベルの付いたチェック ボックスをクリックし、**変更を保存**] をクリックします。
10. 一度ページの更新、**管理関連の情報を & に同意するもの**と呼ばれる新しいセクションが表示されます。
    1. **管理者の承認を提供する**リンクをクリックして、Office3 365 グローバル管理者の資格情報を入力し、アクセス許可を付与することに**同意**します。
    2. **Azure AD テナント**] フィールドの横にある、[**検出**] ボタンをクリックします。
    3. **ビジネスの URL を OneDrive**、横にある、[**検出**] ボタンをクリックします。
    4. フィールドを作成、**変更を保存**] をクリックします。
11. 、インストールを確認するのには [**更新**] ボタンをクリックし、**変更を保存**] をクリックします。
12. 次に、Moodle サーバと Azure AD の間でユーザーを同期する必要があります。 環境によっては、この段階でさまざまなオプションを選択できます。 ここで設定した構成はすべての同期を維持する (通常 1 日 1 回) を実行する各 Moodle の cron で実行しないことに注意してください。まず最初に
    1. **同期の設定] タブ**に切り替えます。
    2. **Azure AD を持つユーザーの同期**] セクションで、お客様の環境に適用するチェック ボックスを選択します。 通常は選択するには、少なくとも。
        - **Moodle で、Azure AD でのユーザーのアカウントを作成します。**
        - **Azure AD の Moodle 内のすべてのアカウントのユーザーを更新します。**
    3. **ユーザー作成の制限**] セクションでは、Moodle と同期 Azure AD ユーザーを制限するフィルターを設定できます。
    4. **ユーザー フィールドのマッピング**セクションは、Moodle のユーザー プロファイルのフィールド マッピングを Azure AD をカスタマイズできます。
    5. **チームの同期**] セクションで、既存の Moodle のコースの一部またはすべてのグループ (つまり、チーム) が自動的に作成を選択できます。
13. Cron ジョブを検証する (および、手動で実行する最初の実行の場合) には、 **Azure AD を持つユーザーを同期**の**スケジュールされたタスクの管理] ページ**のリンクをクリックします。 これで、**タスクのスケジュール**] ページに移動は。
    1. 下にスクロールし、 **Azure AD を持つユーザーの同期**ジョブを見つけて**を今すぐ実行**] をクリックします。
    2. 既存のコースに基づいてグループを作成する場合は、 **Office 365 のユーザー グループを作成する**ジョブを実行することもできます。
14. プラグインの管理ページに戻る (**サイトの管理** > **プラグイン** > **Microsoft Office 365 との統合**) し、**チームの設定**] ページを選択します。 チームのアプリケーションの統合を有効にするには、いくつかセキュリティ設定を構成する必要があります。
    1. OpenID の接続を有効にするには、**認証の管理**] リンクをクリックし、淡色表示の場合は、 **OpenId の接続**線の目のアイコンをクリックします。
    2. 埋め込みフレームを有効にするには、 **HTTP セキュリティ**のリンクをクリックし、**フレームの埋め込みを許可する**] チェック ボックスを選択し、します。
    3. (これは、Moodle の API の機能を有効にする) web サービスを有効にします。 **高度な機能**のリンクをクリックし、 **web サービスを有効にする**] チェック ボックスが選択されていることを確認します。
    4. Office 365 の外部のサービスを有効にします。 **外部サービス**のリンクをクリックします。
        1. **Moodle の Office 365 の web サービス**の行の [**編集**] をクリックします。
        2. **[有効**] の横にあるチェック ボックスをオンにし、[**変更の保存**] をクリックしてください
    5. 最後に、ユーザーが web サービスのトークンを作成できるようにするのには、認証済みユーザーのアクセス許可を編集する必要があります。 **ロール認証済みユーザーの編集**リンクをクリックします。 スクロールし、検索**web サービスのトークンを作成**する機能、および、[**許可**] チェック ボックスを選択します。

## <a name="step-3-deploy-the-moodle-assistant-bot-to-azure"></a>手順 3: Moodle のアシスタントの Bot を Azure に配置します。

> [!VIDEO https://www.youtube.com/embed/gbkJxf8FlfY]

マイクロソフト チームの無料の Moodle アシスタント ボットは、先生と生徒は、コース、割り当て、等級、および Moodle の他の情報についての質問に答えることができます。 Bot も Moodle に通知を送信生徒と教師のチーム内で右です。 この bot Microsoft が管理しているオープン ソース プロジェクトは、 [GitHub で利用できます](https://github.com/microsoft/Moodle-Teams-Bot)。

> [!NOTE]
. ここで、Azure サブスクリプションのリソースを配置するが、無料の層を使用するすべてのリソースが構成されます。 Bot の使用状況、によっては、これらのリソースを拡大または縮小する必要があります。 Bot なし Moodle] タブを使用して場合は、[手順 4](#step-4-deploy-your-microsoft-teams-app)に進みます。

### <a name="moodle-bot-information-flow"></a>Moodle の bot 情報の流れ

Bot をインストールするには、 [Microsoft Id プラットフォーム](https://identity.microsoft.com/Landing)に登録する必要があります。 これにより、マイクロソフトのエンドポイントを認証するために、ボットです。 Bot を登録します。

1. プラグインの管理] ページに戻ります (**サイトの管理** > **プラグイン** > **Microsoft Office 365 との統合**)**チームの設定**] タブを選択します。
2. **Microsoft アプリケーション登録ポータル**リンクと、マイクロソフトの ID でサインイン] をクリックします。
3. (MoodleBot など) をアプリケーションの名前を入力し、 **[作成**] ボタンをクリックします。
4. **アプリケーション ID**をコピーし、[**チームの設定**] ページで、 **Bot のアプリケーション ID** ] フィールドに貼り付けます。
5. **新しいパスワードを生成**] ボタンをクリックします。 生成されたパスワードをコピーし、[**チームの設定**] ページで、 **Bot のアプリケーションのパスワード**フィールドに貼り付けます。
6. フォームの一番下までスクロールし、[**変更の保存**] をクリックします。

これで、アプリケーションの ID とパスワードを生成したは、ボットを Azure に配置します。 **Azure への展開**] ボタンをクリックし、必要な情報をフォームに入力 ([**チームの設定**] ページでは、bot の ID とパスワードと Azure の情報は、[**セットアップ**] ページで、)。 入力フォームを作成したら、条項および条件に同意し、(Azure のすべてのリソースは、無料の層に配置)**購入**ボタンをクリックする] チェック ボックスをクリックします。

リソースが終了した後を Azure に配置する必要があります、メッセージングのエンドポイントを持つ、Office 365 の Moodle プラグインを構成します。 最初に、Azure で、bot からエンドポイントを取得する必要があります。 その手順は次のとおりです。

1. 既に署名されていない場合は、 [Azure ポータル](https://portal.azure.com)にサインインします。
2. 左側のウィンドウで、**リソース グループ**を選択します。
3. 一覧から、bot の展開中にだけ使用される (または作成) は、リソース グループを選択します。
4. **Bot の web アプリケーション**のリソースをグループ内のリソースの一覧から選択します。
5. 「**概要**」セクションから、**メッセージングのエンドポイント**をコピーします。
6. Moodle で、Office 365 の Moodle プラグインの [**チーム設定**] ページを開きます。
7. **Bot エンドポイント**] フィールドに、コピーした URL を貼り付けるし、 *webhook*を word の*メッセージ*を変更します。 URL に次のようになります: `https://botname.azurewebsites.net/api/webhook`。
8. **変更を保存**] をクリックします。
9. 変更内容が保存されると、**チームの設定**] タブに戻り、**マニフェスト ファイルのダウンロード**] ボタンをクリックし、(後で使用する次の手順)、コンピューター上のパッケージ マニフェストを保存します。

## <a name="step-4-deploy-your-microsoft-teams-app"></a>手順 4: マイクロソフトのチームのアプリを配置します。

> [!VIDEO https://www.youtube.com/embed/2rMb7gtM_ZM]

これで、Azure で、ボットを配置し、Moodle のサーバーと通信するように設定したら、マイクロソフトのチームのアプリの導入に要する時間を勧めします。 これを行うには、前の手順では、Office 365 の Moodle プラグイン**チームの設定**ページからダウンロードしたマニフェスト ファイルをロードするでしょう。

アプリケーションをインストールできますが、外部のアプリケーションとアプリケーションの sideloading が有効であるかどうかを確認する必要があります。 これを行うには、以下の[手順](https://docs.microsoft.com/en-us/MicrosoftTeams/admin-settings)を実行します。 外部アプリケーションが有効になっていることを確保したら、アプリを展開するには、次の手順に従います。

1. マイクロソフトのチームを開きます。
2. ナビゲーション バーの左上の**ストア**アイコンをクリックします。
3. オプションの一覧から **、カスタム アプリケーションのアップロード**のリンクをクリックします。 
   > [!NOTE]
   > 大域管理者としてサインインしている場合、組織のアプリケーション ストアにアプリケーションをアップロードするためのオプションが必要があります。それ以外の場合のみことができます、アプリケーションをロードするのには (*sideloading*) の一部をしているチーム。
4. 以前は、ダウンロードした manifest.zip パッケージを選択し、[**保存**] をクリックします。 マニフェストのパッケージをまだダウンロードしていない、なら、Moodle でプラグインの構成] ページの [**チーム設定**] タブからです。

インストールされているアプリケーションがある場合は、これへのアクセスがあるすべてのチャネルにタブを追加できます。 これを行うには、チャネルに移動] をクリックします**+** 記号、およびアプリケーションを一覧から選択します。 チャネルに、Moodle のコース] タブの追加を完了するのにはプロンプトに従います。

それです！ 、チームを開始できますマイクロソフトのチームから直接、Moodle のコースを使用します。

我々 とすべての機能の要望を共有し、フィードバックを提供したり、当社の[ユーザーの声のページ](https://microsoftteams.uservoice.com/forums/916759-moodle)を参照してください。