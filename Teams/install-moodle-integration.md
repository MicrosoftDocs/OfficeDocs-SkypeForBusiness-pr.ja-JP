---
title: マイクロソフト チームと Moodle の統合をインストールします。
author: MicrosoftHeidi
ms.author: heidip
manager: serdars
ms.date: 05/01/2019
ms.topic: article
ms.service: msteams
ms.reviewer: ''
search.appverid: MET150
description: インストールし、マイクロソフトのチームの Moodle の統合アプリケーションを構成する方法について説明します。
keywords: Moodle アプリケーションの統合プラグインをチームします。
localization_priority: Normal
MS.collection: Teams_ITAdmin_Help
appliesto: Microsoft Teams
ms.openlocfilehash: 92259a9ef01232aaeca67089b5d654fe302f1224
ms.sourcegitcommit: 9a99be1365df439f9443f31240aa5311782458df
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/14/2019
ms.locfileid: "34055367"
---
# <a name="install-moodle-integration-with-microsoft-teams"></a><span data-ttu-id="41c27-104">マイクロソフト チームと Moodle の統合をインストールします。</span><span class="sxs-lookup"><span data-stu-id="41c27-104">Install Moodle integration with Microsoft Teams</span></span>

> [!VIDEO https://www.youtube.com/embed/OHlPt22nKoE]

<span data-ttu-id="41c27-105">マイクロソフトのチームとは、 [Moodle](https://moodle.org/)で最も人気のある、オープン ソースの世界では、学習管理システム (LMS) が統合されています。</span><span class="sxs-lookup"><span data-stu-id="41c27-105">[Moodle](https://moodle.org/), the most popular and open source Learning Management System (LMS) in the world, is now integrated with Microsoft Teams!</span></span> <span data-ttu-id="41c27-106">この統合により、教育者、教師 Moodle のコースの周りの共同作業の成績と、割り当てに関するご質問、最新のチーム内のすべての通知!</span><span class="sxs-lookup"><span data-stu-id="41c27-106">This integration helps educators and teachers collaborate around Moodle courses, ask questions about their grades and assignments, and stay updated with notifications -- all within Teams!</span></span>

<span data-ttu-id="41c27-107">IT 管理者がこの統合を容易にセットアップするために、次の機能を備えた、オープン ソースの Office 365 の Moodle プラグインを更新しました。</span><span class="sxs-lookup"><span data-stu-id="41c27-107">To help IT admins easily set up this integration, we have updated our open source Office 365 Moodle plugin with the following capabilities:</span></span>

- <span data-ttu-id="41c27-108">Azure AD に、Moodle のサーバーの自動登録</span><span class="sxs-lookup"><span data-stu-id="41c27-108">Auto-registration of your Moodle server with Azure AD</span></span>
- <span data-ttu-id="41c27-109">Azure に、Moodle のアシスタントの bot の展開を 1 回のクリック</span><span class="sxs-lookup"><span data-stu-id="41c27-109">One-click deployment of your Moodle Assistant bot to Azure</span></span>
- <span data-ttu-id="41c27-110">チーム、または Moodle のコースを選択するすべてのチーム登録の自動同期の自動プロビジョニング</span><span class="sxs-lookup"><span data-stu-id="41c27-110">Auto-provisioning of teams and auto-synchronization of team enrollments for all or select Moodle courses</span></span>
- <span data-ttu-id="41c27-111">Moodle のタブと各同期のチーム (準備中) に Moodle のアシスタントの bot の自動インストール</span><span class="sxs-lookup"><span data-stu-id="41c27-111">Auto-installation of the Moodle tab and the Moodle Assistant bot into each synchronized team (coming soon)</span></span>
- <span data-ttu-id="41c27-112">(準備中)、プライベート チーム アプリケーション ストアに Moodle のアプリケーションを公開する 1 回のクリック</span><span class="sxs-lookup"><span data-stu-id="41c27-112">One-click publishing of the Moodle app into your private Teams App Store (coming soon)</span></span>

## <a name="prerequisites"></a><span data-ttu-id="41c27-113">前提条件</span><span class="sxs-lookup"><span data-stu-id="41c27-113">Prerequisites</span></span>

<span data-ttu-id="41c27-114">インストールする必要がありますこのアプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="41c27-114">To install and configure this application you'll need:</span></span>

- <span data-ttu-id="41c27-115">Moodle 管理者の資格情報</span><span class="sxs-lookup"><span data-stu-id="41c27-115">Moodle administrator credentials</span></span>
- <span data-ttu-id="41c27-116">Azure AD 管理者の資格情報</span><span class="sxs-lookup"><span data-stu-id="41c27-116">Azure AD administrator credentials</span></span>
- <span data-ttu-id="41c27-117">Azure サブスクリプションで新しいリソースを作成します。</span><span class="sxs-lookup"><span data-stu-id="41c27-117">An Azure subscription that you can create new resources in</span></span>

## <a name="step-1-install-the-office-365-moodle-plugin"></a><span data-ttu-id="41c27-118">手順 1: Office 365 の Moodle プラグインをインストールします。</span><span class="sxs-lookup"><span data-stu-id="41c27-118">Step 1: Install the Office 365 Moodle plugin</span></span>

> [!VIDEO https://www.youtube.com/embed/SETEC5nzMgk]

<span data-ttu-id="41c27-119">マイクロソフト チームの Moodle の統合は、オープン ソースの[Office 365 の Moodle プラグイン](https://github.com/Microsoft/o365-moodle)によって電源が。</span><span class="sxs-lookup"><span data-stu-id="41c27-119">The Moodle integration in Microsoft Teams is powered by the open source [Office 365 Moodle plugin](https://github.com/Microsoft/o365-moodle).</span></span> <span data-ttu-id="41c27-120">Moodle サーバー上のプラグインをインストールします。</span><span class="sxs-lookup"><span data-stu-id="41c27-120">To install the plugin on your Moodle server:</span></span>

1. <span data-ttu-id="41c27-121">[Office 365 のプラグインの設定](https://moodle.org/plugins/pluginversions.php?plugin=local_o365)をダウンロードし、ローカル コンピューターに保存します。</span><span class="sxs-lookup"><span data-stu-id="41c27-121">Download the [Office 365 plugin set](https://moodle.org/plugins/pluginversions.php?plugin=local_o365) and save it on your local computer.</span></span> <span data-ttu-id="41c27-122">3.5 またはそれ以降のバージョンを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-122">You'll need to use version 3.5 or newer.</span></span>
2. <span data-ttu-id="41c27-123">Moodle 管理者は、サーバーにサインインし、左側のナビゲーション ウィンドウから **[サイトの管理**を選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-123">Sign in to your Moodle server as an administrator, and select **Site administration** from the left navigation pane.</span></span>
3. <span data-ttu-id="41c27-124">**プラグイン**」タブを選択し、**プラグインをインストール**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-124">Select the **Plugins** tab, and then click **Install plugins**.</span></span>
4. <span data-ttu-id="41c27-125">**ZIP ファイルからプラグインをインストール**] セクションの [**ファイルの選択]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-125">Under the **Install plugin from ZIP file** section click the **Choose a file** button.</span></span>
5. <span data-ttu-id="41c27-126">左側のナビゲーション ウィンドウから**ファイルをアップロードする**オプションを選択の上、ダウンロードしたファイルを参照して、**このファイルをアップロード**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-126">Select the **Upload a file** options from the left navigation pane, browse to the file you downloaded above, and click **Upload this file**.</span></span>
6. <span data-ttu-id="41c27-127">管理ダッシュ ボードに左側のナビゲーション ウィンドウから、[**サイトの管理**] オプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-127">Select the **Site administration** option from the left navigation pane again to return to your admin dashboard.</span></span> <span data-ttu-id="41c27-128">**ローカルのプラグイン**までスクロールし、 **Microsoft Office 365 との統合**] リンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-128">Scroll down to the **Local plugins** and click the **Microsoft Office 365 Integration** link.</span></span> <span data-ttu-id="41c27-129">この構成ページをブラウザーの別タブで開いたままにする: 使用する、このプロセスの残りの部分。</span><span class="sxs-lookup"><span data-stu-id="41c27-129">Keep this configuration page open in a separate browser tab: you'll be using it throughout the rest of this process.</span></span>

<span data-ttu-id="41c27-130">[Moodle マニュアル](https://docs.moodle.org/34/en/Installing_plugins)の Moodle プラグインをインストールする方法の詳細が表示されます。</span><span class="sxs-lookup"><span data-stu-id="41c27-130">You can find more information on how to install Moodle plugins in the [Moodle documentation](https://docs.moodle.org/34/en/Installing_plugins).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="41c27-131">Office 365 の Moodle プラグインの設定ページをブラウザーの別タブで開いたままにする: このプロセス全体のページのこのセットに返すことを説明します。</span><span class="sxs-lookup"><span data-stu-id="41c27-131">Keep your Office 365 Moodle plugin configuration page open in a separate browser tab: you'll be returning to this set of pages throughout this process.</span></span>

<span data-ttu-id="41c27-132">Moodle サイトを既にがないでしょうか。</span><span class="sxs-lookup"><span data-stu-id="41c27-132">Don't have a Moodle site already?</span></span> <span data-ttu-id="41c27-133">チェック アウト当社の Moodle の Azure[リポジトリの索引](https://github.com/azure/moodle)簡単に Azure の Moodle のインスタンスを展開し、必要に応じてカスタマイズすることもできます。</span><span class="sxs-lookup"><span data-stu-id="41c27-133">You might want to check out our Moodle on Azure [repo](https://github.com/azure/moodle) where you can quickly deploy a Moodle instance on Azure and customize it to your needs.</span></span>

## <a name="step-2-configure-the-connection-between-the-office-365-plugin-and-azure-active-directory"></a><span data-ttu-id="41c27-134">手順 2: Office 365 のプラグインと Azure Active Directory との間の接続を構成します。</span><span class="sxs-lookup"><span data-stu-id="41c27-134">Step 2: Configure the connection between the Office 365 plugin and Azure Active Directory</span></span>

> [!VIDEO https://www.youtube.com/embed/FpGEezaJ3SA]

<span data-ttu-id="41c27-135">次に Moodle を (Azure AD) Azure Active Directory 内のアプリケーションとして登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-135">Next you'll need to register Moodle as an application in your Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="41c27-136">このプロセスを完了するための PowerShell スクリプトを提供してきました。</span><span class="sxs-lookup"><span data-stu-id="41c27-136">We've provided a PowerShell script to help you complete this process.</span></span> <span data-ttu-id="41c27-137">PowerShell スクリプトの準備、新しい Azure AD アプリケーションを Office 365 の Moodle プラグインで使用する、Office 365 テナントにします。</span><span class="sxs-lookup"><span data-stu-id="41c27-137">The PowerShell script provisions a new Azure AD application for your Office 365 tenant, which will be used by the Office 365 Moodle plugin.</span></span> <span data-ttu-id="41c27-138">スクリプトは、O365 テナントのアプリケーションのプロビジョニング、必要な応答 Url と、準備されたアプリケーションのアクセス許可を設定し、AppID とキーを取得します。</span><span class="sxs-lookup"><span data-stu-id="41c27-138">The script will provision the app for your O365 tenant, set up all the required Reply URLs and permissions for the provisioned app, and return the AppID and Key.</span></span> <span data-ttu-id="41c27-139">O365 Moodle プラグインの設定ページで AppID とキーが生成されたを使用するには Azure AD に、Moodle のサーバーを構成します。</span><span class="sxs-lookup"><span data-stu-id="41c27-139">You can use the generated AppID and Key in your O365 Moodle plugin setup page to configure your Moodle server with Azure AD.</span></span> <span data-ttu-id="41c27-140">PowerShell スクリプトの自動化は、手動の手順の詳細を表示する場合は、完全な[プラグインのドキュメント](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application)で検索できます。</span><span class="sxs-lookup"><span data-stu-id="41c27-140">If you want to see the detailed manual steps that the PowerShell script is automating, you can find them in the full [documentation for the plugin](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application).</span></span>

1. <span data-ttu-id="41c27-141">プラグインを Microsoft Office 365 との統合] ページで、[**設定**] タブを選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-141">On the Microsoft Office 365 Integration plugin page, select the **Setup** tab.</span></span>
2. <span data-ttu-id="41c27-142">**PowerShell スクリプトのダウンロード**] ボタンをクリックし、スクリプトをローカル コンピューター上に保存します。</span><span class="sxs-lookup"><span data-stu-id="41c27-142">Click the **Download PowerShell Script** button, and save the script on your local computer.</span></span>
3. <span data-ttu-id="41c27-143">ZIP ファイルからの PowerShell スクリプトを準備する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-143">You'll need to prepare the PowerShell script from the ZIP file.</span></span> <span data-ttu-id="41c27-144">その手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="41c27-144">To do this:</span></span>
    1. <span data-ttu-id="41c27-145">ダウンロードし、Moodle-AzureAD-Powershell.zip のファイルを抽出します。</span><span class="sxs-lookup"><span data-stu-id="41c27-145">Download and extract the Moodle-AzureAD-Powershell.zip file.</span></span>
    2. <span data-ttu-id="41c27-146">抽出したフォルダーを開きます。</span><span class="sxs-lookup"><span data-stu-id="41c27-146">Open the extracted folder.</span></span>
    3. <span data-ttu-id="41c27-147">Moodle-AzureAD-Script.ps1 ファイルを右クリックし、**プロパティ**を選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-147">Right-click the Moodle-AzureAD-Script.ps1 file, and select **Properties**.</span></span>
    4. <span data-ttu-id="41c27-148">[プロパティ] ウィンドウの [**全般**] タブで**ブロックを解除する**] チェック ボックスの下部にある**セキュリティ**属性。</span><span class="sxs-lookup"><span data-stu-id="41c27-148">On the **General** tab of the Properties window, check the **Unblock** box next to the **Security** attribute at the bottom.</span></span>
    5. <span data-ttu-id="41c27-149">**[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-149">Click **OK**.</span></span>
    6. <span data-ttu-id="41c27-150">抽出したフォルダーのディレクトリ パスをコピーします。</span><span class="sxs-lookup"><span data-stu-id="41c27-150">Copy the directory path of the extracted folder.</span></span>
4. <span data-ttu-id="41c27-151">次に管理者として PowerShell を実行します。</span><span class="sxs-lookup"><span data-stu-id="41c27-151">Next you'll run PowerShell as an administrator:</span></span>
    1. <span data-ttu-id="41c27-152">[開始] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-152">Click Start.</span></span>
    2. <span data-ttu-id="41c27-153">**PowerShell**をタイプします。</span><span class="sxs-lookup"><span data-stu-id="41c27-153">Type **PowerShell**.</span></span>
    3. <span data-ttu-id="41c27-154">**Windows PowerShell**を右クリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-154">Right-click **Windows PowerShell**.</span></span>
    4. <span data-ttu-id="41c27-155">[**管理者として実行**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-155">Click **Run as Administrator**.</span></span>
5. <span data-ttu-id="41c27-156">入力して、展開したディレクトリに移動`cd ...\...\Moodle-AzureAD-Powershell`、`...\...`ディレクトリへのパスです。</span><span class="sxs-lookup"><span data-stu-id="41c27-156">Navigate to the unzipped directory by typing `cd ...\...\Moodle-AzureAD-Powershell` where `...\...` is the path to the directory.</span></span>
6. <span data-ttu-id="41c27-157">PowerShell スクリプトを実行します。</span><span class="sxs-lookup"><span data-stu-id="41c27-157">Execute the PowerShell script:</span></span>
    1. <span data-ttu-id="41c27-158">入力`Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`。</span><span class="sxs-lookup"><span data-stu-id="41c27-158">Enter `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`.</span></span>
    2. <span data-ttu-id="41c27-159">入力`.\Moodle-AzureAD-Script.ps1`。</span><span class="sxs-lookup"><span data-stu-id="41c27-159">Enter `.\Moodle-AzureAD-Script.ps1`.</span></span>
    3. <span data-ttu-id="41c27-160">O365 ポップアップ ウィンドウに管理者アカウントにサインインします。</span><span class="sxs-lookup"><span data-stu-id="41c27-160">Sign in to your O365 administrator account in the pop-up window.</span></span>
    4. <span data-ttu-id="41c27-161">AD の Azure アプリケーション (たとえば、 **Moodle と Moodle プラグイン**) の名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="41c27-161">Enter the name of the Azure AD application (for example, **Moodle/Moodle plugin**).</span></span>
    5. <span data-ttu-id="41c27-162">Moodle サーバの URL を入力します。</span><span class="sxs-lookup"><span data-stu-id="41c27-162">Enter the URL of your Moodle server.</span></span>
    6. <span data-ttu-id="41c27-163">**アプリケーション ID**と**アプリケーション キー** 、スクリプトによって生成されたコピーし、それらを保存します。</span><span class="sxs-lookup"><span data-stu-id="41c27-163">Copy the **Application ID** and **Application Key** generated by the script, and save them.</span></span>
7. <span data-ttu-id="41c27-164">次に Office 365 の Moodle プラグイン ID とキーを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-164">Next you'll need to add the ID and key to the Office 365 Moodle plugin.</span></span> <span data-ttu-id="41c27-165">プラグインの管理] ページに戻ります (**[サイトの管理** > **プラグイン** > **Microsoft Office 365 と統合**)。</span><span class="sxs-lookup"><span data-stu-id="41c27-165">Return to the plugin administration page (**Site administration** > **Plugins** > **Microsoft Office 365 Integration**).</span></span>
8. <span data-ttu-id="41c27-166">[**セットアップ**] タブで、**アプリケーション ID**と**アプリケーション キー**が以前は、コピーする追加し、**変更を保存**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-166">On the **Setup** tab, add the **Application ID** and **Application Key** you copied previously, and then click **Save changes**.</span></span>
9. <span data-ttu-id="41c27-167">1 回、ページの更新では、**接続方法の選択**と呼ばれる新しいセクションが表示されます。</span><span class="sxs-lookup"><span data-stu-id="41c27-167">Once the page refreshes, you should see a new section called **Choose connection method**.</span></span> <span data-ttu-id="41c27-168">**[既定**] というラベルの付いたチェック ボックスをクリックし、**変更を保存**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-168">Click the check box labeled **Default**, and then click **Save changes**.</span></span>
10. <span data-ttu-id="41c27-169">一度ページの更新、**管理関連の情報を & に同意するもの**と呼ばれる新しいセクションが表示されます。</span><span class="sxs-lookup"><span data-stu-id="41c27-169">Once the page refreshes, you'll see a new section called **Admin consent & additional information**.</span></span>
    1. <span data-ttu-id="41c27-170">**管理者の承認を提供する**リンクをクリックして、Office3 365 グローバル管理者の資格情報を入力し、アクセス許可を付与することに**同意**します。</span><span class="sxs-lookup"><span data-stu-id="41c27-170">Click the **Provide Admin Consent** link, enter your Office3 365 Global Administrator credentials, and then click **Accept** to grant the permissions.</span></span>
    2. <span data-ttu-id="41c27-171">**Azure AD テナント**] フィールドの横にある、[**検出**] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-171">Next to the **Azure AD Tenant** field, click the **Detect** button.</span></span>
    3. <span data-ttu-id="41c27-172">**ビジネスの URL を OneDrive**、横にある、[**検出**] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-172">Next to **OneDrive for Business URL**, click the **Detect** button.</span></span>
    4. <span data-ttu-id="41c27-173">フィールドを作成、**変更を保存**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-173">Once the fields populate, click the **Save changes** button.</span></span>
11. <span data-ttu-id="41c27-174">、インストールを確認するのには [**更新**] ボタンをクリックし、**変更を保存**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-174">Click the **Update** button to verify the installation, and then click **Save changes**.</span></span>
12. <span data-ttu-id="41c27-175">次に、Moodle サーバと Azure AD の間でユーザーを同期する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-175">Next you'll need to synchronize users between your Moodle server and Azure AD.</span></span> <span data-ttu-id="41c27-176">環境によっては、この段階でさまざまなオプションを選択できます。</span><span class="sxs-lookup"><span data-stu-id="41c27-176">Depending on your environment, you may select different options during this stage.</span></span> <span data-ttu-id="41c27-177">ここで設定した構成はすべての同期を維持する (通常 1 日 1 回) を実行する各 Moodle の cron で実行しないことに注意してください。まず最初に</span><span class="sxs-lookup"><span data-stu-id="41c27-177">Note that the configuration you set here will run with each Moodle cron run (typically once a day) to keep everything in sync. To get started:</span></span>
    1. <span data-ttu-id="41c27-178">**同期の設定] タブ**に切り替えます。</span><span class="sxs-lookup"><span data-stu-id="41c27-178">Switch to the **Sync Settings tab**.</span></span>
    2. <span data-ttu-id="41c27-179">**Azure AD を持つユーザーの同期**] セクションで、お客様の環境に適用するチェック ボックスを選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-179">In the **Sync users with Azure AD** section, select the check boxes that apply to your environment.</span></span> <span data-ttu-id="41c27-180">通常は選択するには、少なくとも。</span><span class="sxs-lookup"><span data-stu-id="41c27-180">Typically you would select at least:</span></span>
        - <span data-ttu-id="41c27-181">**Moodle で、Azure AD でのユーザーのアカウントを作成します。**</span><span class="sxs-lookup"><span data-stu-id="41c27-181">**Create accounts in Moodle for users in Azure AD**</span></span>
        - <span data-ttu-id="41c27-182">**Azure AD の Moodle 内のすべてのアカウントのユーザーを更新します。**</span><span class="sxs-lookup"><span data-stu-id="41c27-182">**Update all accounts in Moodle for users in Azure AD**</span></span>
    3. <span data-ttu-id="41c27-183">**ユーザー作成の制限**] セクションでは、Moodle と同期 Azure AD ユーザーを制限するフィルターを設定できます。</span><span class="sxs-lookup"><span data-stu-id="41c27-183">In the **User Creation Restriction** section, you can set up a filter to limit the Azure AD users that will be synced to Moodle.</span></span>
    4. <span data-ttu-id="41c27-184">**ユーザー フィールドのマッピング**セクションは、Moodle のユーザー プロファイルのフィールド マッピングを Azure AD をカスタマイズできます。</span><span class="sxs-lookup"><span data-stu-id="41c27-184">The **User Field Mapping** section will allow you to customize the Azure AD to Moodle User Profile field mapping.</span></span>
    5. <span data-ttu-id="41c27-185">**チームの同期**] セクションで、既存の Moodle のコースの一部またはすべてのグループ (つまり、チーム) が自動的に作成を選択できます。</span><span class="sxs-lookup"><span data-stu-id="41c27-185">In the **Teams Sync** section you can choose to automatically create groups (that is, teams) for some or all of your existing Moodle courses.</span></span>
13. <span data-ttu-id="41c27-186">Cron ジョブを検証する (および、手動で実行する最初の実行の場合) には、 **Azure AD を持つユーザーを同期**の**スケジュールされたタスクの管理] ページ**のリンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-186">To validate the cron jobs (and run them manually if you wish to for the first run), click the **Scheduled tasks management page** link in the **Sync users with Azure AD** section.</span></span> <span data-ttu-id="41c27-187">これで、**タスクのスケジュール**] ページに移動は。</span><span class="sxs-lookup"><span data-stu-id="41c27-187">This will take you to the **Scheduled Tasks** page.</span></span>
    1. <span data-ttu-id="41c27-188">下にスクロールし、 **Azure AD を持つユーザーの同期**ジョブを見つけて**を今すぐ実行**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-188">Scroll down and find the job **Sync users with Azure AD** job, and click **Run now**.</span></span>
    2. <span data-ttu-id="41c27-189">既存のコースに基づいてグループを作成する場合は、 **Office 365 のユーザー グループを作成する**ジョブを実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="41c27-189">If you chose to create groups based on existing courses, you can also run the **Create user groups in Office 365** job.</span></span>
14. <span data-ttu-id="41c27-190">プラグインの管理ページに戻る (**サイトの管理** > **プラグイン** > **Microsoft Office 365 との統合**) し、**チームの設定**] ページを選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-190">Return to the plugin administration page (**Site administration** > **Plugins** > **Microsoft Office 365 Integration**) and select the **Teams Settings** page.</span></span> <span data-ttu-id="41c27-191">チームのアプリケーションの統合を有効にするには、いくつかセキュリティ設定を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-191">You'll need to configure some security settings to enable the Teams app integration.</span></span>
    1. <span data-ttu-id="41c27-192">OpenID の接続を有効にするには、**認証の管理**] リンクをクリックし、淡色表示の場合は、 **OpenId の接続**線の目のアイコンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-192">To enable OpenID Connect, click the **Manage Authentication** link, and click the eye icon on the **OpenId Connect** line if it is dimmed.</span></span>
    2. <span data-ttu-id="41c27-193">埋め込みフレームを有効にするには、 **HTTP セキュリティ**のリンクをクリックし、**フレームの埋め込みを許可する**] チェック ボックスを選択し、します。</span><span class="sxs-lookup"><span data-stu-id="41c27-193">To enable frame embedding, click the **HTTP Security** link, and then select the check box next to **Allow frame embedding**.</span></span>
    3. <span data-ttu-id="41c27-194">(これは、Moodle の API の機能を有効にする) web サービスを有効にします。</span><span class="sxs-lookup"><span data-stu-id="41c27-194">Enable web services (which will enable the Moodle API features).</span></span> <span data-ttu-id="41c27-195">**高度な機能**のリンクをクリックし、 **web サービスを有効にする**] チェック ボックスが選択されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="41c27-195">Click the **Advanced Features** link, and then make sure the check box next to **Enable web services** is selected.</span></span>
    4. <span data-ttu-id="41c27-196">Office 365 の外部のサービスを有効にします。</span><span class="sxs-lookup"><span data-stu-id="41c27-196">Enable the external services for Office 365.</span></span> <span data-ttu-id="41c27-197">**外部サービス**のリンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-197">Click the **External services** link, and then:</span></span>
        1. <span data-ttu-id="41c27-198">**Moodle の Office 365 の web サービス**の行の [**編集**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-198">Click **Edit** on the **Moodle Office 365 Webservices** row.</span></span>
        2. <span data-ttu-id="41c27-199">**[有効**] の横にあるチェック ボックスをオンにし、[**変更の保存**] をクリックしてください</span><span class="sxs-lookup"><span data-stu-id="41c27-199">Select the check box next to **Enabled**, and then click **Save Changes**</span></span>
    5. <span data-ttu-id="41c27-200">最後に、ユーザーが web サービスのトークンを作成できるようにするのには、認証済みユーザーのアクセス許可を編集する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-200">Finally, you need to edit your authenticated user permissions to allow users to create web service tokens.</span></span> <span data-ttu-id="41c27-201">**ロール認証済みユーザーの編集**リンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-201">Click the **Editing role Authenticated user** link.</span></span> <span data-ttu-id="41c27-202">スクロールし、検索**web サービスのトークンを作成**する機能、および、[**許可**] チェック ボックスを選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-202">Scroll down and find the **Create a web service token** capability, and select the **Allow** check box.</span></span>

## <a name="step-3-deploy-the-moodle-assistant-bot-to-azure"></a><span data-ttu-id="41c27-203">手順 3: Moodle のアシスタントの Bot を Azure に配置します。</span><span class="sxs-lookup"><span data-stu-id="41c27-203">Step 3: Deploy the Moodle Assistant Bot to Azure</span></span>

> [!VIDEO https://www.youtube.com/embed/gbkJxf8FlfY]

<span data-ttu-id="41c27-204">マイクロソフト チームの無料の Moodle アシスタント ボットは、先生と生徒は、コース、割り当て、等級、および Moodle の他の情報についての質問に答えることができます。</span><span class="sxs-lookup"><span data-stu-id="41c27-204">The free Moodle Assistant Bot for Microsoft Teams helps teachers and students answer questions about their courses, assignments, grades, and other information in Moodle.</span></span> <span data-ttu-id="41c27-205">Bot も Moodle に通知を送信生徒と教師のチーム内で右です。</span><span class="sxs-lookup"><span data-stu-id="41c27-205">The bot also sends Moodle notifications to students and teachers right within Teams.</span></span> <span data-ttu-id="41c27-206">この bot Microsoft が管理しているオープン ソース プロジェクトは、 [GitHub で利用できます](https://github.com/microsoft/Moodle-Teams-Bot)。</span><span class="sxs-lookup"><span data-stu-id="41c27-206">This bot is an open source project maintained by Microsoft and is [available on GitHub](https://github.com/microsoft/Moodle-Teams-Bot).</span></span>

> [!NOTE]
<span data-ttu-id="41c27-207">.</span><span class="sxs-lookup"><span data-stu-id="41c27-207"></span></span> <span data-ttu-id="41c27-208">ここで、Azure サブスクリプションのリソースを配置するが、無料の層を使用するすべてのリソースが構成されます。</span><span class="sxs-lookup"><span data-stu-id="41c27-208">In this section you will deploy resources to your Azure subscription, and all resources will be configured using the free tier.</span></span> <span data-ttu-id="41c27-209">Bot の使用状況、によっては、これらのリソースを拡大または縮小する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-209">Depending on the usage of your bot, you may need to scale these resources.</span></span> <span data-ttu-id="41c27-210">Bot なし Moodle] タブを使用して場合は、[手順 4](#step-4-deploy-your-microsoft-teams-app)に進みます。</span><span class="sxs-lookup"><span data-stu-id="41c27-210">If you want to just use the Moodle tab without the bot, skip to [step 4](#step-4-deploy-your-microsoft-teams-app).</span></span>

### <a name="moodle-bot-information-flow"></a><span data-ttu-id="41c27-211">Moodle の bot 情報の流れ</span><span class="sxs-lookup"><span data-stu-id="41c27-211">Moodle bot information flow</span></span>

<span data-ttu-id="41c27-212">Bot をインストールするには、 [Microsoft Id プラットフォーム](https://identity.microsoft.com/Landing)に登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-212">To install the bot, you'll need to register it on the [Microsoft Identity Platform](https://identity.microsoft.com/Landing).</span></span> <span data-ttu-id="41c27-213">これにより、マイクロソフトのエンドポイントを認証するために、ボットです。</span><span class="sxs-lookup"><span data-stu-id="41c27-213">This allows your bot to authenticate with your Microsoft endpoints.</span></span> <span data-ttu-id="41c27-214">Bot を登録します。</span><span class="sxs-lookup"><span data-stu-id="41c27-214">To register your bot:</span></span>

1. <span data-ttu-id="41c27-215">プラグインの管理] ページに戻ります (**サイトの管理** > **プラグイン** > **Microsoft Office 365 との統合**)**チームの設定**] タブを選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-215">Return to the plugin administration page (**Site administration** > **Plugins** > **Microsoft Office 365 Integration**) and select the **Teams Settings** tab.</span></span>
2. <span data-ttu-id="41c27-216">**Microsoft アプリケーション登録ポータル**リンクと、マイクロソフトの ID でサインイン] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-216">Click the **Microsoft Application Registration Portal** link and sign in with your Microsoft ID.</span></span>
3. <span data-ttu-id="41c27-217">(MoodleBot など) をアプリケーションの名前を入力し、 **[作成**] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-217">Enter a name for you app (for example, MoodleBot) and click the **Create** button.</span></span>
4. <span data-ttu-id="41c27-218">**アプリケーション ID**をコピーし、[**チームの設定**] ページで、 **Bot のアプリケーション ID** ] フィールドに貼り付けます。</span><span class="sxs-lookup"><span data-stu-id="41c27-218">Copy the **Application ID** and paste it into the **Bot Application ID** field on the **Team Settings** page.</span></span>
5. <span data-ttu-id="41c27-219">**新しいパスワードを生成**] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-219">Click the **Generate New Password** button.</span></span> <span data-ttu-id="41c27-220">生成されたパスワードをコピーし、[**チームの設定**] ページで、 **Bot のアプリケーションのパスワード**フィールドに貼り付けます。</span><span class="sxs-lookup"><span data-stu-id="41c27-220">Copy the generated password and paste it into the **Bot Application Password** field on the **Team Settings** page.</span></span>
6. <span data-ttu-id="41c27-221">フォームの一番下までスクロールし、[**変更の保存**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-221">Scroll to the bottom of the form and click **Save Changes**.</span></span>

<span data-ttu-id="41c27-222">これで、アプリケーションの ID とパスワードを生成したは、ボットを Azure に配置します。</span><span class="sxs-lookup"><span data-stu-id="41c27-222">Now that you've generated your application ID and password, it's time to deploy your bot to Azure.</span></span> <span data-ttu-id="41c27-223">**Azure への展開**] ボタンをクリックし、必要な情報をフォームに入力 ([**チームの設定**] ページでは、bot の ID とパスワードと Azure の情報は、[**セットアップ**] ページで、)。</span><span class="sxs-lookup"><span data-stu-id="41c27-223">Click the **Deploy to Azure** button and complete the form with the necessary information (the bot ID and password are on the **Team Settings** page, and the Azure information is on the **Setup** page).</span></span> <span data-ttu-id="41c27-224">入力フォームを作成したら、条項および条件に同意し、(Azure のすべてのリソースは、無料の層に配置)**購入**ボタンをクリックする] チェック ボックスをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-224">Once you have the form filled out, click the check box to agree to the terms and conditions, and then click the **Purchase** button (all Azure resources are deployed to the free tier).</span></span>

<span data-ttu-id="41c27-225">リソースが終了した後を Azure に配置する必要があります、メッセージングのエンドポイントを持つ、Office 365 の Moodle プラグインを構成します。</span><span class="sxs-lookup"><span data-stu-id="41c27-225">After the resources are finished deploying to Azure, you'll need to configure the Office 365 Moodle plugin with its messaging endpoint.</span></span> <span data-ttu-id="41c27-226">最初に、Azure で、bot からエンドポイントを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-226">First, you'll need to get the endpoint from your bot in Azure.</span></span> <span data-ttu-id="41c27-227">その手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="41c27-227">To do this:</span></span>

1. <span data-ttu-id="41c27-228">既に署名されていない場合は、 [Azure ポータル](https://portal.azure.com)にサインインします。</span><span class="sxs-lookup"><span data-stu-id="41c27-228">If you aren't signed in already, sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="41c27-229">左側のウィンドウで、**リソース グループ**を選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-229">In the left pane, select **Resource groups**.</span></span>
3. <span data-ttu-id="41c27-230">一覧から、bot の展開中にだけ使用される (または作成) は、リソース グループを選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-230">From the list, select the resource group you just used (or created) while deploying your bot.</span></span>
4. <span data-ttu-id="41c27-231">**Bot の web アプリケーション**のリソースをグループ内のリソースの一覧から選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-231">Select the **WebApp Bot** resource from the list of resources in the group.</span></span>
5. <span data-ttu-id="41c27-232">「**概要**」セクションから、**メッセージングのエンドポイント**をコピーします。</span><span class="sxs-lookup"><span data-stu-id="41c27-232">Copy the **Messaging Endpoint** from the **Overview** section.</span></span>
6. <span data-ttu-id="41c27-233">Moodle で、Office 365 の Moodle プラグインの [**チーム設定**] ページを開きます。</span><span class="sxs-lookup"><span data-stu-id="41c27-233">In Moodle, open the **Team Settings** page of your Office 365 Moodle plugin.</span></span>
7. <span data-ttu-id="41c27-234">**Bot エンドポイント**] フィールドに、コピーした URL を貼り付けるし、 *webhook*を word の*メッセージ*を変更します。</span><span class="sxs-lookup"><span data-stu-id="41c27-234">In the **Bot Endpoint** field, paste the URL you just copied, and change the word *messages* to *webhook*.</span></span> <span data-ttu-id="41c27-235">URL に次のようになります: `https://botname.azurewebsites.net/api/webhook`。</span><span class="sxs-lookup"><span data-stu-id="41c27-235">The URL should now look like this: `https://botname.azurewebsites.net/api/webhook`.</span></span>
8. <span data-ttu-id="41c27-236">**変更を保存**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-236">Click **Save Changes**.</span></span>
9. <span data-ttu-id="41c27-237">変更内容が保存されると、**チームの設定**] タブに戻り、**マニフェスト ファイルのダウンロード**] ボタンをクリックし、(後で使用する次の手順)、コンピューター上のパッケージ マニフェストを保存します。</span><span class="sxs-lookup"><span data-stu-id="41c27-237">Once your changes are saved, go back to the **Team Settings** tab, click the **Download manifest file** button, and save the manifest package on your computer (you'll use it in the next step).</span></span>

## <a name="step-4-deploy-your-microsoft-teams-app"></a><span data-ttu-id="41c27-238">手順 4: マイクロソフトのチームのアプリを配置します。</span><span class="sxs-lookup"><span data-stu-id="41c27-238">Step 4: Deploy your Microsoft Teams app</span></span>

> [!VIDEO https://www.youtube.com/embed/2rMb7gtM_ZM]

<span data-ttu-id="41c27-239">これで、Azure で、ボットを配置し、Moodle のサーバーと通信するように設定したら、マイクロソフトのチームのアプリの導入に要する時間を勧めします。</span><span class="sxs-lookup"><span data-stu-id="41c27-239">Now that you have deployed your bot in Azure and configured it to talk to your Moodle server, it's time to deploy your Microsoft Teams app.</span></span> <span data-ttu-id="41c27-240">これを行うには、前の手順では、Office 365 の Moodle プラグイン**チームの設定**ページからダウンロードしたマニフェスト ファイルをロードするでしょう。</span><span class="sxs-lookup"><span data-stu-id="41c27-240">To do this you'll load the manifest file you downloaded from the Office 365 Moodle plugin **Team Settings** page in the previous step.</span></span>

<span data-ttu-id="41c27-241">アプリケーションをインストールできますが、外部のアプリケーションとアプリケーションの sideloading が有効であるかどうかを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41c27-241">Before you can install the app, you'll need to make sure that external apps and sideloading of apps is enabled.</span></span> <span data-ttu-id="41c27-242">これを行うには、以下の[手順](https://docs.microsoft.com/en-us/MicrosoftTeams/admin-settings)を実行します。</span><span class="sxs-lookup"><span data-stu-id="41c27-242">To do this, follow [these steps](https://docs.microsoft.com/en-us/MicrosoftTeams/admin-settings).</span></span> <span data-ttu-id="41c27-243">外部アプリケーションが有効になっていることを確保したら、アプリを展開するには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="41c27-243">Once you've ensured that external apps are enabled, follow the steps below to deploy your app.</span></span>

1. <span data-ttu-id="41c27-244">マイクロソフトのチームを開きます。</span><span class="sxs-lookup"><span data-stu-id="41c27-244">Open Microsoft Teams.</span></span>
2. <span data-ttu-id="41c27-245">ナビゲーション バーの左上の**ストア**アイコンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-245">Click the **Store** icon on the lower-left of the navigation bar.</span></span>
3. <span data-ttu-id="41c27-246">オプションの一覧から **、カスタム アプリケーションのアップロード**のリンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-246">Click the **Upload a custom app** link from the list of options.</span></span> 
   > [!NOTE]
   > <span data-ttu-id="41c27-247">大域管理者としてサインインしている場合、組織のアプリケーション ストアにアプリケーションをアップロードするためのオプションが必要があります。それ以外の場合のみことができます、アプリケーションをロードするのには (*sideloading*) の一部をしているチーム。</span><span class="sxs-lookup"><span data-stu-id="41c27-247">If you're signed in as a global administrator, you'll have the option of uploading the app to your organization's app store; otherwise you'll only be able to load the app for the teams you're a part of (*sideloading*).</span></span>
4. <span data-ttu-id="41c27-248">以前は、ダウンロードした manifest.zip パッケージを選択し、[**保存**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="41c27-248">Select the manifest.zip package you downloaded previously, and click **Save**.</span></span> <span data-ttu-id="41c27-249">マニフェストのパッケージをまだダウンロードしていない、なら、Moodle でプラグインの構成] ページの [**チーム設定**] タブからです。</span><span class="sxs-lookup"><span data-stu-id="41c27-249">If you haven't yet downloaded the manifest package, you can do so from the **Team Settings** tab of the plugin configuration page in Moodle.</span></span>

<span data-ttu-id="41c27-250">インストールされているアプリケーションがある場合は、これへのアクセスがあるすべてのチャネルにタブを追加できます。</span><span class="sxs-lookup"><span data-stu-id="41c27-250">Now that you have the app installed, you can add the tab to any channel that you have access to.</span></span> <span data-ttu-id="41c27-251">これを行うには、チャネルに移動] をクリックします**+** 記号、およびアプリケーションを一覧から選択します。</span><span class="sxs-lookup"><span data-stu-id="41c27-251">To do this, navigate to the channel, click the **+** symbol, and select your app from the list.</span></span> <span data-ttu-id="41c27-252">チャネルに、Moodle のコース] タブの追加を完了するのにはプロンプトに従います。</span><span class="sxs-lookup"><span data-stu-id="41c27-252">Follow the prompts to finish adding your Moodle course tab to a channel.</span></span>

<span data-ttu-id="41c27-253">それです！</span><span class="sxs-lookup"><span data-stu-id="41c27-253">That's it!</span></span> <span data-ttu-id="41c27-254">、チームを開始できますマイクロソフトのチームから直接、Moodle のコースを使用します。</span><span class="sxs-lookup"><span data-stu-id="41c27-254">You and your team, can now start working with your Moodle courses directly from Microsoft Teams.</span></span>

<span data-ttu-id="41c27-255">我々 とすべての機能の要望を共有し、フィードバックを提供したり、当社の[ユーザーの声のページ](https://microsoftteams.uservoice.com/forums/916759-moodle)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="41c27-255">To share any feature requests with us or provide feedback, please visit our [User Voice page](https://microsoftteams.uservoice.com/forums/916759-moodle).</span></span>