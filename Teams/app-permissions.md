---
title: Microsoft Teams アプリのアクセス許可と考慮事項
author: Lester-Hewett
ms.author: lehewe
manager: serdars
ms.date: 08/20/2018
ms.topic: article
ms.service: msteams
search.appverid: MET150
ms.reviewer: lehewe
description: 組織に対してアプリが要求しているデータアクセス許可について説明します。
localization_priority: Normal
appliesto:
- Microsoft Teams
ms.openlocfilehash: eb8a6b6785e3cc4bcbf65bceeb51bf650b63a830
ms.sourcegitcommit: 940cb253923e3537cb7fb4d7ce875ed9bfbb72db
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/07/2018
ms.locfileid: "23883067"
---
# <a name="microsoft-teams-apps-permissions-and-considerations"></a>Microsoft Teams アプリのアクセス許可と考慮事項

Microsoft Teams アプリは、1 つまたは複数の機能がまとめられた、インストール、アップグレード、アンインストールすることができる_アプリ パッケージ_として提供されます。 次の機能が含まれます。

-   ボット
-   メッセージングの拡張機能
-   タブ
-   コネクタ

ポリシーの観点では、アプリはユーザーによって承諾され、IT 担当によって管理されます。 しかしながら、大部分において、アプリのアクセス許可とリスク プロファイルは、アプリに含まれる機能のアクセス許可とリスク プロファイルによって定義されます。 このため、この記事では、機能レベルでのアクセス許可と考慮事項について、焦点をあてます。

RECEIVE_MESSAGE や REPLYTO_MESSAGE のように、以下に大文字で一覧表示されたアクセス許可は、[Microsoft Teams 開発者向けドキュメント](https://aka.ms/teamsdevdocs)や [Microsoft Graph のアクセス許可](https://developer.microsoft.com/graph/docs/concepts/permissions_reference)にはまったく表示されません。 これらは、この記事で説明上の目的のために使われる省略表記です。


|    |     |
|-----------|------------|
| ![](media/audio_conferencing_image7.png) <br/>判断ポイント|<ul><li>下記の表は、調べているアプリが要求しているアクセス許可を知るためのガイドとして使用します。</li></ul> |
| ![](media/audio_conferencing_image9.png)<br/>次のステップ|<ul><li>アプリまたはサービス自体を調査して、自分の組織内でそのアプリやサービスへのアクセスを許可するかどうかを決めます。 たとえば、ボットがユーザーからのメッセージを送受信するが、それらのボットは、エンタープライズ向けの基幹業務ボットではない限り、コンプライアンスの範囲外の領域に配置されている場合です。 このため、ボットを含んでいるアプリは、これらのアクセス許可を必要とし、少なくともリスク プロファイルを持つことになります。 </li></ul>|

## <a name="global-app-permissions-and-considerations"></a>グローバル アプリのアクセス許可と考慮事項

<table>
  <tr>
    <th width="25%">必要なアクセス許可</th>
    <th width="25%">オプションのアクセス許可</th>
    <th width="50%">考慮事項</th>
  </tr>
  <tr>
    <td valign="top">なし</td>
    <td valign="top">なし</td>
    <td valign="top">アプリはどのデータを使用し、データが何のために使用されるかを、その使用規約およびプライバシー ポリシーのリンクで公開する必要があります。</td>
  </tr>
</table>

## <a name="bots-and-messaging-extensions"></a>ボットとメッセージングの拡張機能

<table>
 <thead>
  <tr>
    <th width="0.5%"></th>
    <th width="24.5%">必要なアクセス許可</th>
    <th width="25%">オプションのアクセス許可</th>
    <th width="50%">考慮事項</th>
  </tr>
</thead>
<tbody>
   <tr>
    <td valign="top" colspan="2"><ul><li>   RECEIVE_MESSAGE、REPLYTO_MESSAGE。 ボットはユーザーからメッセージを受信して、ユーザーに返信することができます。<sup>1</sup></li><li>POST_MESSAGE_USER。 ユーザーがメッセージをボットに送信した後、ボットはユーザーにダイレクト メッセージ (_プロアクティブ メッセージ_とも言います) をいつでも送信することができます。</li><li>GET_CHANNEL_LIST。 チームに追加されたボットは、チーム内のチャネルの名前と ID のリストを取得できます。</li></ul></td>
    <td valign="top"><ul><li>IDENTITY。 チャネル内で使用されると、アプリのボットはチーム メンバーの基本的な識別情報 (姓、名、ユーザー プリンシパル名 (UPN)、メール アドレス) にアクセスすることができます。個人またはグループ チャットで使用されると、ボットはそれらのユーザーの基本的な識別情報にアクセスすることができます。</li><li> POST_MESSAGE_TEAM。 アプリのボットがダイレクト (プロアクティブ) メッセージをいつでも任意のチーム メンバーに送信することができるようにします。これまでにボットと話したことがないユーザーに対してもメッセージは送信されます。</li><li>以下は明示的なアクセス許可ではありませんが、RECEIVE_MESSAGE と REPLYTO_MESSAGE によって暗黙で示され、ボットを使用することができる範囲が明示的に宣言されています。 <ul><li>RECEIVE_MESSAGE_PERSONAL、REPLYTO_MESSAGE_PERSONAL。</li><li>RECEIVE_MESSAGE_GROUPCHAT、 REPLYTO_MESSAGE_GROUPCHAT<sup>2</sup> </li><li>RECEIVE_MESSAGE_TEAM、REPLYTO_MESSAGE_TEAM</li></ul><li>SEND_FILES、RECEIVE_FILES。<sup>3</sup> パーソナル チャットでファイルを送受信できるかどうかを制御します (グループ チャットやチャネルではサポートされていません)。</li></ul></td>
    <td valign="top"><ul><li>ボットは、ボットが追加済みのチームまたはボットをインストールしたユーザーに対してのみアクセスすることができます。</li><li>ボットは、自身がユーザーによって明示的にメンションされたメッセージのみを受信します。 このデータは、企業ネットワークから出ることになります。</li><li>    ボットは、自身がメンションされた会話に対してのみ、返信することができます。</li><li>ユーザーがボットと会話した後にボットがユーザーの ID を保存すると、ボットはそのユーザーにいつでもダイレクト メッセージを送信することができます。 </li><li>ボットのメッセージにフィッシングのリンクやマルウェアのサイトを含めるようにすることは理論的には可能ですが、ボットはユーザーやテナント管理者によって、またはマイクロソフトによってグローバルにブロックすることができます。 </li><li>ボットは、アプリが追加済みのチーム メンバーや、パーソナル チャットやグループ チャットの個別のユーザーについて、基本的な識別情報を取得 (および保存) することができます。 これらのユーザーについてより詳細な情報を取得するには、ボットがユーザーに対して Azure Active Directory (Azure AD) にサインインするよう要求する必要があります。 </li><li>ボットはチーム内のチャネルのリストを取得 (および保存) することができます。このデータは、企業ネットワークから出ることになります。 </li><li>ファイルがボットに送信されると、ファイルは企業ネットワークから出ることになります。 ファイルの送受信では、ファイルごとにユーザーの承認が必要です。 </li><li>既定では、ボットにはユーザーの代わりに行動する機能はありませんが、ボットはユーザーにサインインするよう求めることはできます。ユーザーがサインインすると、ボットはアクセス トークンを持つことになり、それを使用して追加の操作を実行できるようになります。 追加の操作が具体的に何であるかは、ボットによって、およびユーザーがどこでサインインしたかによって異なります。ボットは <a href="https://apps.dev.microsoft.com/">https://apps.dev.microsoft.com/</a> で登録済みの Azure AD アプリで、独自のアクセス許可のセットを持っています。</li><li>ボットには、ユーザーが追加されたとき、およびチームから削除されたときに、必ず通知が入ります。</li><li>ボットには、ユーザーの IP アドレスやその他の参照元の情報は表示されません。 すべての情報はマイクロソフトから提供されます。 (唯一の例外として、ボットが独自のサインイン エクスペリエンスを実装している場合は、サインイン UI にユーザーの IP アドレスおよび参照元の情報が表示されます。)</li><li>一方、メッセージングの拡張機能では、ユーザーの IP アドレスおよび参照元の情報を表示します。</li><li>アプリのガイドライン (および AppSource のレビュー プロセス) では、パーソナル チャットのメッセージを正当な目的で (POST_MESSAGE_TEAM のアクセス許可を介して) ユーザーに投稿することについての裁量権が要求されます。 迷惑行為が発生した場合、ユーザーがボットをブロックしたり、テナント管理者がアプリをブロックしたり、必要な場合はマイクロソフトがボットを一元的にブロックしたりすることができます。</li></ul></td>
</tr>
</tbody>
<tfoot>
<tr><td align="right"><sup>1</sup></td><td colspan="3">一部のボットは、メッセージの送信のみを行います (POST_MESSAGE_USER)。 これらのボットは、「通知専用」ボットと呼ばれますが、その表現はボットが許可されている操作や許可されていない操作を示しているのではなく、ボットが会話に関するエクスぺリエンスを公表しないということを意味するものです。 Teams では、通常では有効になっている UI の機能を無効にするために、このフィールドを使用します。会話に関するエクスペリエンスを公開するボットと比べて、実行することが許可されている操作については制限されません。</td></tr>
<tr><td align="right"><sup>2</sup></td><td colspan="3">現在、開発者プレビューです。</td></tr>
<tr><td align="right"><sup>3</sup></td><td colspan="3">現在、開発者プレビューです。 アプリ用の manifest.json ファイル内のボット オブジェクトでの <code>supportsFiles</code> ブール値プロパティによって制御されます。</td>
</tr>
</tfoot>
</table>

> [!Note]
> <ul><li>ボットに独自のサインイン方法がある場合は、ユーザーの初回サインイン時に使用される 2 つ目の別の同意エクスペリエンスがあります。</li><li>現在、Teams アプリ内のいずれかの機能 (ボット、タブ、コネクタ、またはメッセージングの拡張機能) に関連付けられている Azure AD のアクセス許可は、ここにリストされている Teams のアクセス許可とは完全に別のものです。</li></ul>


## <a name="tabs"></a>タブ

タブは、Teams 内部で実行される Web サイトです。

<table>
  <tr>
    <th width="25%">必要なアクセス許可</th>
    <th width="25%">オプションのアクセス許可</th>
    <th width="50%">考慮事項</th>
  </tr>
  <tr>
    <td valign="top">SEND_AND_RECEIVE_WEB_DATA</td>
    <td valign="top">なし (現在)。</td>
    <td valign="top"><ul><li>タブのリスク プロファイルは、ブラウザーのタブで実行される同じ Web サイトとほぼ同一です。 </li><li>タブは実行中に、現在のユーザーのサインイン名と UPN、現在のユーザーの Azure AD Object ID、常駐している Office 365 Group (チーム) の ID、テナント ID、およびユーザーの現在のロケールなどを含むコンテキストも取得します。 ただし、これらの ID をユーザーの情報にマップするには、タブによりユーザーが Azure AD にサインインするようになる必要があります。</li></ul></td>
  </tr>
  </table>

## <a name="connectors"></a>コネクタ

コネクタは、外部システムでイベントが発生したときに、チャネルにメッセージを投稿します。

  <table>
  <tr>
    <th width="25%">必要なアクセス許可</th>
    <th width="25%">オプションのアクセス許可</th>
    <th width="50%">考慮事項</th>
  </tr>
  <tr>
    <td valign="top">POST_MESSAGE_CHANNEL</td>
    <td valign="top">REPLYTO_CONNECTOR_MESSAGE。 特定のコネクタは_アクション可能メッセージ_をサポートしており、ユーザーはたとえば、GitHub の問題に対する回答を追加したり、Trello カードに日付を追加したりすることによって、コネクタ メッセージに対象を絞った返信を投稿することができます。</td>
    <td valign="top"><ul><li>コネクタ メッセージを投稿するシステムは、誰が投稿しているか、誰がメッセージを受け取るか、などについては把握していません。受信者に関する情報は公開されません。 (テナントではなく、Microsoft が実際の受信者です。Microsoft は、チャネルに対する実際の投稿を行います。)</li><li>コネクタ メッセージがチャネルに投稿されるときに、企業ネットワークから出てくるデータはありません。</li><li>アクション可能なメッセージをサポートするコネクタ (REPLYTO_CONNECTOR_MESSAGE アクセス許可) も、IP アドレスや参照元の情報を表示しません。この情報は、マイクロソフトに送信され、コネクタ ポータルで以前に Microsoft で登録された HTTP エンドポイントにルーティングされます。</li><li>コネクタがチャネルに対して構成されるたびに、そのコネクタ インスタンスの一意の URL が作成されます。 そのコネクタ インスタンスが削除されると、URL は使用することができなくなります。</li><li>コネクタのメッセージに、添付ファイルを含めることはできません。</li><li>コネクタ インスタンス URL は秘密/機密として取り扱われる必要があります。その URL を知っている人はすべて、メール アドレスのように、そこに投稿することができます。 このため、スパムや、フィッシングのリンクやマルウェアのサイトのようなリスクがあります。 そのような状況が起こる場合は、チーム所有者がコネクタ インスタンスを削除することができます。</li><li>コネクタ メッセージを送信するサービスが危殆化し、スパムやフィッシングやマルウェアのリンクを送信し始めた場合は、テナント管理者が新しいコネクタ インスタンスが作成されるのを防止したり、マイクロソフトがそれらを一元的にブロックしたりすることができます。</li></ul></td>
  </tr>
</table>

> [!Note]
> 現時点では、どのコネクタがアクション可能なメッセージ (REPLYTO_CONNECTOR_MESSAGE アクセス許可) をサポートしているかを判別することはできません。


## <a name="outgoing-webhooks"></a>発信 Webhook

_発信 Webhook_ は、テナントでサイドローディングが有効になっている場合に、その場でチーム所有者やチーム メンバーによって作成されます。 これらの機能は Teams アプリのものではありませんが、完全な情報を提供するためにここに記載されています。

<table>
  <tr>
    <th width="25%">必要なアクセス許可</th>
    <th width="25%">オプションのアクセス許可</th>
    <th width="50%">考慮事項</th>
  </tr>
    <tr>
    <td valign="top">RECEIVE_MESSAGE、REPLYTO_MESSAGE。 ユーザーからメッセージを受信して、ユーザーに返信することができます。</td>
    <td valign="top">なし</td>
    <td valign="top"><ul><li>発信 Webhook はボットに似ていますが、利用できる特権はより少ないです。 ボットと同様に、明示的にメンションされる必要があります。</li><li>発信 Webhook が登録されると、_secret_ が生成され、これにより発信 Webhook は、送信者が Microsoft Teams であることを、悪意のある攻撃者と対比して、確認することができます。 この secret は、秘密のまま保持されます。これにアクセスできるユーザーはすべて、Microsoft Teams に成りすますことができます。 この secret が危殆化すると発信 Webhook は削除され再作成されて、新しい secret が生成されます。</li><li>secret を確認しない発信 Webhook を作成することは可能ですが、お勧めできません。</li><li>メッセージを受信したり返信したりすること以外に、発信 Webhook ができることはありません。事前のメッセージの送信や、ファイルの送受信などのボットができる操作は、メッセージの送受信を除いて行うことができません。</li></ul></td>
  </tr>
</table>