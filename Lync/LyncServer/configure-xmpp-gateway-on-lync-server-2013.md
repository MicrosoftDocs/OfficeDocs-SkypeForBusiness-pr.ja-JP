---
title: Lync Server 2013 での XMPP ゲートウェイの構成
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
TOCTitle: Configure XMPP gateway on Lync Server 2013
ms:assetid: c70282e0-b502-47e2-a0be-a32eb1faf99d
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ721881(v=OCS.15)
ms:contentKeyID: 49733816
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 5609ecc72e43c28c87f9cdab1a4a7be93b89bf8f
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/11/2019
ms.locfileid: "34840843"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="configure-xmpp-gateway-on-lync-server-2013"></a>Lync Server 2013 での XMPP ゲートウェイの構成

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**最終更新日:** 2013-10-28_

XMPP ゲートウェイを移行するための最終的な手順は、Lync Server 2013 Edge サーバー用の証明書を構成し、Lync Server 2013 XMPP ゲートウェイを展開して、XMPP ゲートウェイの DNS レコードを更新することです。 XMPP ゲートウェイのダウンタイムを最小限に抑えるために、これらの手順は並列で実行する必要があります。 これらの手順を実行する前に、すべてのユーザーを Microsoft Lync Server 2013 の展開に移動する必要があります。

<div class=" ">


> [!IMPORTANT]  
> XMPP フェデレーションは、survivable branch アプライアンスをホームにしているユーザーに対してはサポートされません。 これは、プレゼンス情報の表示と IM メッセージの交換の両方に適用されます。



</div>

<div>

## <a name="configure-xmpp-gateway-certificates-on-the-lync-server-2013-edge-server"></a>Lync Server 2013 Edge サーバーで XMPP ゲートウェイ証明書を構成する

1.  エッジサーバーの展開ウィザードで、[**手順 3: 証明書の要求、インストール、または割り当て**] の横にある [実行] を**もう一度**クリックします。
    
    <div class=" ">
    

    > [!TIP]  
    > 初めてエッジサーバーを展開する場合は、[実行] ではなく、[実行] と表示されます。

    
    </div>

2.  [**利用可能な証明書タスク**] ページで、[**新しい証明書要求を作成する**] をクリックします。

3.  [**証明書の要求**] ページで、[**外部境界の証明書**] をクリックします。

4.  [**遅延または即時要求**] ページで、[**今すぐ要求を準備するが、後で送信**する] チェックボックスをオンにします。

5.  [**証明書要求ファイル**] ページで、要求を保存するファイルの完全パスとファイル名を入力します (たとえば、c:\\cert\_外部\_edge)。

6.  [**代替証明書テンプレートの指定**] ページで、既定の web サーバテンプレート以外のテンプレートを使用するには、[**選択された証明機関に別の証明書テンプレートを使用**する] チェックボックスをオンにします。

7.  [**名前とセキュリティの設定**] ページで、次の操作を行います。
    
    1.  [**フレンドリ名**] に、証明書の表示名を入力します。
    
    2.  **ビット長**では、ビット長 (通常は2048の既定値) を指定します。
    
    3.  [**証明書の秘密キーをエクスポート可能としてマーク**する] チェックボックスがオンになっていることを確認します。

8.  [**組織の情報**] ページで、組織の名前と組織単位 (たとえば、部門や部署) を入力します。

9.  [**地理情報**] ページで、場所情報を指定します。

10. [ **Subject Name/Subject name** ] ページには、ウィザードによって自動的に入力される情報が表示されます。 追加の件名の代替名が必要な場合は、次の2つの手順で指定します。

11. [**サブジェクト代替名 (san)] ページの Sip ドメイン設定**で、[Domain] チェックボックスをオンにして sip を追加します。\<[\>件名の代替名] ボックスの一覧に sipdomain エントリを入力します。

12. [**追加のサブジェクト代替名の構成**] ページで、必要なその他のサブジェクトの代替名を指定します。
    
    <div class=" ">
    

    > [!TIP]  
    > XMPP プロキシがインストールされている場合、既定では、ドメイン名 (contoso.com など) が SAN エントリに設定されます。 他のエントリが必要な場合は、この手順で追加します。

    
    </div>

13. [**要求の概要**] ページで、要求の生成に使用する証明書情報を確認します。

14. コマンドの実行が完了したら、**ログを表示**するか、[次へ] をクリックして続行します。

15. [**証明書要求ファイル**] ページで、[**完了**] をクリックして、証明書ウィザードの [**表示**] または [終了] をクリックし、生成された証明書署名要求 (CSR) ファイルを表示できます。

16. 要求ファイルをコピーして、公開証明機関に提出します。

17. 公開証明書の受信、インポート、割り当てが完了したら、Edge Server サービスを停止して再起動する必要があります。 これを行うには、Lync Server 管理コンソールで次のように入力します。
    
        Stop-CsWindowsService

      &nbsp;
    
        Start-CsWindowsService

</div>

<div>

## <a name="configure-a-new-lync-server-2013-xmpp-gateway"></a>新しい Lync Server 2013 XMPP ゲートウェイを構成する

1.  [Lync Server コントロール パネル] を開きます。

2.  左側のナビゲーションバーで、[**フェデレーションと外部アクセス**] をクリックし、[ **Xmpp フェデレーションパートナー**] をクリックします。

3.  新しい構成を作成するには、[**新規**] をクリックします。

4.  次の設定を定義します。

5.  **プライマリドメイン**    (必須)。 プライマリドメインは、XMPP パートナーのベースドメインです。 たとえば、XMPP パートナードメイン名の**fabrikam.com**を入力します。 このエントリは必須です。

6.  **説明**   説明は、この特定の構成のメモやその他の識別情報の説明です。 このエントリは省略可能です。

7.  **追加ドメイン**   追加ドメインは、xmpp パートナーのドメインの一部であり、許可されている xmpp 通信の一部として含めることができるドメインです。 たとえば、プライマリドメインが**fabrikam.com**の場合は、fabrikam.com の下にある他のすべてのドメインを一覧表示します。これにより、xmpp で通信することができます。

8.  **パートナー**   の種類**パートナーの種類**は必須の設定です。 追加できる連絡先を説明して適用するには、次のいずれかを選択する必要があります。 次のいずれかを選択できます。
    
      - ****   フェデレーションパートナー **** の種類は、Lync Server の展開と xmpp パートナーとの間の高レベルの信頼を表します。同じエンタープライズ内または確立されたビジネス関係がある場合は、このパートナーの種類を使用することをお勧めします。フェデレーションパートナーの XMPP 連絡先は、次のことができます。
        
        1.  Lync ユーザーからの明示的な承認なしに、Lync の連絡先を追加して、自分のプレゼンスを表示します。
        
        2.  Lync ユーザーが連絡先リストに追加したかどうかにかかわらず、Lync の連絡先にインスタントメッセージを送信できます。
        
        3.  Lync ユーザーの状態メモを表示します。
    
      - **公開**確認済みパートナーとは、ユーザーの身元を確認するために信頼されているパブリックの xmpp プロバイダーです。 ****    パブリック検証ネットワークの XMPP の連絡先は、lync ユーザーのエクスプレス認証を使わずに、Lync の連絡先を追加して、そのプレゼンスを表示し、インスタントメッセージを送信できます。パブリック確認ネットワークの XMPP の連絡先には、Lync ユーザーの状態メモが表示されません。この設定はお勧めできません。
    
      - **公開**されていない公開されていないパートナーは、そのユーザーの id を確認するために信頼されていないパブリックの xmpp プロバイダーです。 ****    公開されていないパブリックネットワーク上の XMPP ユーザーは、連絡先リストに追加して、lync ユーザーに対して明示的に許可されていない限り、Lync ユーザーと通信することはできません。公開されていないパブリックネットワーク上の XMPP ユーザーは、Lync ユーザーの状態メモを見ることはできません。この設定は、Google Talk などのパブリック XMPP プロバイダーとのフェデレーションの場合にお勧めします。

9.  **接続の種類:** さまざまなルールとダイヤルバック設定を定義します。
    
      - **Tls ネゴシエーション**   は、tls ネゴシエーションルールを定義します。 XMPP サービスでは TLS が必要になる場合があります。 TLS をオプションにすることも、TLS がサポートされないことを定義することもできます。 [オプションを選択すると、必須のネゴシエーションの意思決定を行うための XMPP サービスの要件が残ります。 使用可能な SASL、TLS、およびダイヤルバックのネゴシエーションに関するすべての設定と詳細を表示するには、「有効なエラーと既知のエラー構成」を参照してください。詳しくは、「 [Lync Server 2013 での XMPP フェデレーションパートナーのネゴシエーション設定](lync-server-2013-negotiation-settings-for-xmpp-federated-partners.md)」をご覧ください。
        
          - <span></span>  
            **必須**   : xmpp サービスには TLS ネゴシエーションが必要です。
        
          - <span></span>  
            **オプション**   : xmpp サービスは、TLS が必須からネゴシエートされていることを示します。
        
          - <span></span>  
            **サポート**   されていない xmpp サービスは、TLS をサポートしていません。
    
      - **Sasl ネゴシエーション**   は、sasl ネゴシエーション規則を定義しています。 XMPP サービスでは、SASL を要求できるほか、SASL をオプションとして使うこともできます。また、SASL がサポートされていないことを定義することもできます。 [オプションを選択すると、必須のネゴシエーションの意思決定を行うために、パートナーの XMPP サービスまでの要件が残ります。
        
          - <span></span>  
            **必須**   xmpp サービスには、SASL ネゴシエーションが必要です。
        
          - <span></span>  
            **オプション**   : xmpp サービスは、SASL のネゴシエーションが必須であることを示します。
        
          - <span></span>  
            **サポート**   されていない xmpp サービスは SASL をサポートしていません。
    
      - **サポートサーバーのダイヤルバックのネゴシエーション**サポートサーバーのダイヤルバックネゴシエーションプロセスでは、ドメインネームシステム (DNS) と権限を持つサーバーを使用して、要求が有効な XMPP パートナーから送信されたことを確認します。 これを行うために、発信元のサーバーは、生成されたダイヤルバックキーを使用して、特定の種類のメッセージを作成し、DNS で受信側サーバーを検索します。 送信元のサーバーは、受信側サーバーであると思われるように、XML ストリームのキーを結果の DNS 参照に送信します。 XML ストリームを介してキーを受け取ると、受信側サーバーは元のサーバーには応答しませんが、既知の権限を持つサーバーにキーを送信します。 権限を持つサーバーは、キーが有効であるか無効であるかを確認します。 有効でない場合、受信側サーバーは元のサーバーには応答しません。 キーが有効である場合、受信側のサーバーは、id とキーが有効であり、会話を開始できます。
        
        **ダイヤルバックのネゴシエーション**には、次の2つの有効な状態があります。
        
          - <span></span>  
            **True**   xmpp サーバーは、発信元のサーバーから要求を受信するときに、ダイヤルバックのネゴシエーションを使うように構成されています。
        
          - <span></span>  
            **False**   xmpp サーバーは、ダイヤルバックのネゴシエーションを使用するように構成されていません。また、発信元のサーバーから要求を受信する場合は、無視されます。

10. [**コミット**] をクリックして、サイトまたはユーザーポリシーの変更を保存します。

</div>

<div>

## <a name="update-dns-records-for-lync-server-2013-xmpp-gateway"></a>Lync Server 2013 XMPP ゲートウェイの DNS レコードを更新する

1.  XMPP フェデレーション用の DNS を構成するには、次の SRV レコードを外部 DNS\_: xmpp サーバーに追加します。\_tcp。\<ドメイン名\> SRV レコードはエッジサーバーのアクセスエッジ FQDN に解決され、ポート値は5269になります。

</div>

</div>

<span> </span>

</div>

</div>

</div>

