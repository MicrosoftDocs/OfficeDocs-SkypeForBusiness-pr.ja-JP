---
title: リバース HTTP プロキシの証明書を要求および構成する
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Request and configure a certificate for your reverse HTTP proxy
ms:assetid: 4b70991e-5f10-40a3-b069-0b227c3a3a0a
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Gg429704(v=OCS.15)
ms:contentKeyID: 48184085
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 9c380cb67e1e156bef616f81ce0c42f699b472d8
ms.sourcegitcommit: 33db8c7febd4cf1591e8dcbbdfd6fc8e8925896e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/19/2020
ms.locfileid: "42144944"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">

# <a name="request-and-configure-a-certificate-for-your-reverse-http-proxy-in-lync-server-2013"></a>Lync Server 2013 でのリバース HTTP プロキシの証明書の要求と構成

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**トピックの最終更新日:** 2014-02-14_

Microsoft Lync を実行している内部サーバーにサーバー証明書を発行した CA インフラストラクチャの、Microsoft Forefront Threat Management Gateway 2010 または IIS ARR を実行しているサーバーに、ルート証明機関 (CA) 証明書をインストールする必要があります。サーバー2013。

また、リバースプロキシサーバーには、パブリック web サーバー証明書をインストールする必要があります。 この証明書のサブジェクトの別名には、リモートアクセスが有効になっているユーザーのホームになっている各プールの公開された外部完全修飾ドメイン名 (Fqdn) と、その中で使用されるすべてのディレクターまたはディレクタープールの外部 Fqdn が含まれている必要があります。そのエッジインフラストラクチャ。 サブジェクトの別名には、次の表に示すように、会議の簡易 URL、ダイヤルインの簡易 URL、および自動検出の使用を計画している場合は、外部自動検出サービスの URL も含める必要があります。


<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>値</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>サブジェクト名</p></td>
<td><p>プールの FQDN</p></td>
<td><p>webext.contoso.com</p></td>
</tr>
<tr class="even">
<td><p>サブジェクト名の別名</p></td>
<td><p>プールの FQDN</p></td>
<td><p>webext.contoso.com</p>



> [!IMPORTANT]
> サブジェクト名は、サブジェクトの別名にも存在する必要があります。

</td>
</tr>
<tr class="odd">
<td><p>サブジェクト名の別名</p></td>
<td><p>オプションのディレクター Web サービス (ディレクターが展開されている場合)</p></td>
<td><p>webdirext.contoso.com</p></td>
</tr>
<tr class="even">
<td><p>サブジェクト名の別名</p></td>
<td><p>会議の簡易 URL</p>



> [!NOTE]
> すべての会議の簡易 Url は、サブジェクトの別名にする必要があります。 各 SIP ドメインには、少なくとも1つのアクティブな会議の簡易 URL が必要です。

</td>
<td><p>meet.contoso.com</p></td>
</tr>
<tr class="odd">
<td><p>サブジェクト名の別名</p></td>
<td><p>簡単なダイヤルイン URL</p></td>
<td><p>dialin.contoso.com</p></td>
</tr>
<tr class="even">
<td><p>サブジェクト名の別名</p></td>
<td><p>Office Web Apps サーバー</p></td>
<td><p>officewebapps01.contoso.com</p></td>
</tr>
<tr class="odd">
<td><p>サブジェクト名の別名</p></td>
<td><p>外部自動検出サービス URL</p></td>
<td><p>lyncdiscover.contoso.com</p>



> [!NOTE]
> Microsoft Exchange Server も使用している場合は、Exchange の自動検出と web サービスの Url に対してリバースプロキシルールを構成する必要もあります。

</td>
</tr>
</tbody>
</table>


<div>


> [!NOTE]
> 内部展開が複数の Standard Edition サーバーまたはフロントエンドプールで構成されている場合は、各外部 web ファームの FQDN に対して web 公開ルールを構成する必要があります。また、それぞれに対して証明書と web リスナーが必要になるか、証明書を取得する必要があります。サブジェクトの別名には、すべてのプールで使用される名前が含まれており、それを web リスナーに割り当てて、複数の web 公開ルール間で共有します。



</div>

<div>

## <a name="create-a-certificate-request"></a>証明書要求を作成する

リバースプロキシで証明書要求を作成します。 別のコンピューターに対して要求を作成したが、公開証明機関から証明書を受信したら、署名された証明書を秘密キーを使用してエクスポートして、リバースプロキシにインポートする必要があります。

<div>


> [!NOTE]
> 証明書の要求または証明書の署名要求 (CSR) は、信頼できるパブリック証明機関 (CA) に対する要求であり、要求元のコンピューターの公開キーを検証して署名します。 証明書が生成されると、公開キーと秘密キーが作成されます。 公開キーのみが共有および署名されています。 その名前が示すとおり、公開キーは任意のパブリック要求に対して使用可能になります。 公開キーは、クライアント、サーバー、および情報を安全に交換し、コンピューターの id を検証する必要があるその他の要求者によって使用されます。 秘密キーはセキュリティ保護されたままで、キーペアを作成したコンピューターによってのみ使用され、公開キーで暗号化されたメッセージを解読します。 秘密キーは他の目的に使用できます。 リバースプロキシを使用する場合、データ暗号化が主な用途となります。 Secondarily は、証明書キーレベルでの証明書認証は別の使用方法であり、要求者がコンピューターの公開キーを持っているか、または公開キーを持っているコンピューターが実際に要求するコンピューターであることを示す検証にのみ制限されます。



</div>

<div>


> [!TIP]
> エッジサーバー証明書とリバースプロキシ証明書を同時に計画する場合は、2つの証明書要件の間に大きな類似性があることに注意してください。 エッジサーバーの証明書を構成して要求するときに、エッジサーバーとリバースプロキシのサブジェクトの別名を結合します。 証明書と秘密キーをエクスポートし、エクスポートしたファイルをリバースプロキシにコピーしてから、証明書とキーの組をインポートして、それを今後の手順で必要に応じて割り当てる場合は、リバースプロキシに対して同じ証明書を使用できます。 「Lync server&nbsp;<A href="lync-server-2013-plan-for-edge-server-certificates.md">2013 でエッジサーバー証明書を計画</A>する」および「リバースプロキシ<A href="lync-server-2013-certificate-summary-reverse-proxy.md">証明書の概要-lync server 2013 のリバースプロキシ</A>」の「エッジサーバーの証明書の要件」を参照してください。 必ず、エクスポート可能な秘密キーを使用して証明書を作成してください。 プールされたエッジサーバーには、エクスポート可能な秘密キーを使用して証明書と証明書の要求を作成する必要があるため、これは通常の方法であり、エッジサーバーの Lync Server 展開ウィザードの証明書ウィザードを使用して、<STRONG>秘密キーをエクスポート</STRONG>可能なフラグを設定することができます。 公開証明機関から証明書の要求を受信すると、証明書と秘密キーがエクスポートされます。 秘密キーを使用して証明書を作成およびエクスポートする方法については、トピック「 <A href="lync-server-2013-set-up-certificates-for-the-external-edge-interface.md">Lync Server 2013 の外部エッジインターフェイス</A>の証明書のセットアップ」の「プール内のエッジサーバーの秘密キーを使用して証明書をエクスポートするには」のセクションを参照してください。 証明書の拡張子の種類は<STRONG>.pfx</STRONG>である必要があります。



</div>

証明書と秘密キーが割り当てられるコンピューターで証明書の署名要求を生成するには、次の操作を行います。

**証明書署名要求の作成**

1.  Microsoft 管理コンソール (MMC) を開き、証明書スナップインを追加して、[**コンピューター**]、[**個人**] の順に展開します。 Microsoft 管理コンソール (MMC) で証明書コンソールを作成する方法の詳細について[https://go.microsoft.com/fwlink/?LinkId=282616](https://go.microsoft.com/fwlink/?linkid=282616)は、「」を参照してください。

2.  [**証明書**] を右クリックし、[**すべてのタスク**]、[**詳細な操作**]、[**カスタム要求の作成**] の順にクリックします。

3.  [**証明書の登録**] ページで、[**次へ**] をクリックします。

4.  [**カスタム要求**] の [**証明書登録ポリシーの選択**] ページで、[**登録ポリシーなしで続行**する] を選択します。 **[次へ]** をクリックします。

5.  [**カスタム要求**] ページの [**テンプレート**] の [ **(テンプレートなし)] レガシキー**。 証明書プロバイダーから特に指定されていない限り、 ** \#PKCS 10**で [**既定の拡張子**を表示しない] チェックをオフにし、**要求形式**を選択したままにします。 **[次へ]** をクリックします。

6.  [**証明書情報**] ページで、[**詳細**]、[**プロパティ**] の順にクリックします。

7.  [**証明書のプロパティ**] ページの [**フレンドリ名**] フィールドにある [**全般**] タブで、この証明書の名前を入力します。 必要に応じて、[**説明**] フィールドに説明を入力します。 フレンドリ名と説明は、通常、管理者が、証明書の目的を識別するために使用します (**たとえば、Lync Server のリバースプロキシリスナー**など)。

8.  [**件名**] タブを選択します。[**種類**] の [**サブジェクト名**] で、サブジェクト名の種類として [**共通名**] を選択します。 **値**には、リバースプロキシに使用するサブジェクト名を入力し、[**追加**] をクリックします。 このトピックの表に示されている例では、サブジェクト名は webext.contoso.com で、サブジェクト名の値フィールドに入力されます。

9.  [**代替名**] の [**件名**] タブで、[**種類**] ドロップダウンから [ **DNS** ] を選択します。 証明書に必要な定義済みサブジェクトの別名ごとに、完全修飾ドメイン名を入力し、[**追加**] をクリックします。 たとえば、表には、3つのサブジェクトの別名、meet.contoso.com、dialin.contoso.com、および lyncdiscover.contoso.com があります。 [**値**] フィールドに「meet.contoso.com」と入力し、[**追加**] をクリックします。 定義する必要があるサブジェクトの別名ごとに、この手順を繰り返します。

10. [**証明書のプロパティ**] ページで、[**拡張機能**] タブをクリックします。このページでは、キー**使用**法と拡張キー使用法 **(アプリケーションポリシー)** での暗号化キーの目的を定義します。

11. [**キー使用法**] 矢印をクリックして、**使用可能なオプション**を表示します。 [選択可能なオプション] で、[**デジタル署名**] をクリックし、[**追加**] をクリックします。 [**キーの暗号化**] をクリックし、[**追加**] をクリックします。 [**次のキー使用法を重要**にする] チェックボックスがオフになっている場合は、チェックボックスをオンにします。

12. [**拡張キー使用法 (アプリケーションポリシー)** ] 矢印をクリックして、**使用可能なオプション**を表示します。 [利用可能なオプション] で、[**サーバー認証**] をクリックし、[**追加**] をクリックします。 [**クライアント認証**] をクリックし、[**追加**] をクリックします。 [**拡張キー使用法を重要**にする] チェックボックスがオンになっている場合は、このチェックボックスをオフにします。 [キー使用法] チェックボックス (オンにする必要があります) に反して、[拡張キー使用法] チェックボックスがオフになっていることを確認する必要があります。

13. **証明書のプロパティ**ページで、[**秘密キー** ] タブをクリックします。 [**キーオプション**] 矢印をクリックします。 [**キーサイズ**] で、ドロップダウンから [ **2048** ] を選択します。 この証明書の対象となるリバースプロキシ以外のコンピューターでこのキーペアと CSR を生成する場合は、[**秘密キーをエクスポート**可能にする] を選択します。
    
    <div>
    
    <table>
    <thead>
    <tr class="header">
    <th><img src="images/Gg398321.security(OCS.15).gif" title="security" alt="security" />セキュリティに関する注意事項:</th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td>ファーム内の各コンピューターに証明書と秘密キーをコピーするため、ファーム内に複数のリバースプロキシがある場合は、通常、[<strong>エクスポート可能な秘密キーを作成</strong>する] を選択することをお勧めします。 エクスポート可能な秘密キーを許可する場合は、証明書とそれが生成されるコンピューターに特に注意を払う必要があります。 秘密キーが侵害された場合、その証明書は無意味なだけでなく、コンピューターが外部アクセスやその他のセキュリティ上の脆弱性にさらされる可能性があります。</td>
    </tr>
    </tbody>
    </table>
    
    </div>

14. [**秘密キー** ] タブで、[**キーの種類**] 矢印をクリックします。 [ **Exchange** ] オプションを選択します。

15. [ **OK]** をクリックして、設定した**証明書のプロパティ**を保存します。

16. [**証明書の登録**] ページで、[**次へ**] をクリックします。

17. [**オフライン要求を保存する場所**] ページで、証明書の署名要求を保存するための**ファイル名**と**ファイル形式**の入力を求められます。

18. [**ファイル名**のエントリ] フィールドに、要求のパスとファイル名を入力するか、[**参照**] をクリックしてファイルの場所を選択し、要求のファイル名を入力します。

19. [**ファイル形式**] で、[**基本 64**または**バイナリ**] のどちらかをクリックします。 証明書のベンダーによる指示がない限り、[**ベース 64** ] を選択します。

20. 前の手順で保存した要求ファイルを見つけます。 公開証明機関に提出します。
    
    <div>
    

    > [!IMPORTANT]
    > Microsoft は、ユニファイドコミュニケーションの目的の要件を満たすパブリック Ca を識別しています。 リストは、次のサポート技術情報の記事で管理されています。 <A href="https://go.microsoft.com/fwlink/?linkid=282625">https://go.microsoft.com/fwlink/?LinkId=282625</A>

    
    </div>

</div>

</div>

<span> </span>

</div>

</div>

</div>

