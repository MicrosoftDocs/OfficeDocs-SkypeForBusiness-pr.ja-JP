---
title: リバース HTTP プロキシ用の証明書の要求と構成
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
TOCTitle: Request and configure a certificate for your reverse HTTP proxy
ms:assetid: 4b70991e-5f10-40a3-b069-0b227c3a3a0a
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Gg429704(v=OCS.15)
ms:contentKeyID: 48184085
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: ffe1ce6a4b206b927b2fcdec4c02b905e01d5bd1
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/11/2019
ms.locfileid: "34823309"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="request-and-configure-a-certificate-for-your-reverse-http-proxy-in-lync-server-2013"></a>Lync Server 2013 でのリバース HTTP プロキシ用の証明書の要求と構成

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**最終更新日:** 2014-02-14_

Microsoft Lync を実行している内部サーバーにサーバー証明書を発行した CA インフラストラクチャの、Microsoft Forefront Threat Management ゲートウェイ2010または IIS ARR を実行しているサーバーに、ルート証明機関 (CA) 証明書をインストールする必要があります。サーバー2013。

また、リバースプロキシサーバーに公開 web サーバー証明書をインストールする必要があります。 この証明書のサブジェクトの名前には、リモートアクセスが有効になっている各プールの公開された外部完全修飾ドメイン名 (Fqdn) と、その中で使用されるすべてのディレクターまたはディレクタープールの外部 Fqdn が含まれている必要があります。このエッジインフラストラクチャ。 [件名の代替名] には、会議の単純な URL、ダイヤルインの単純な URL、および次の表に示すように、自動検出サービスの URL が含まれている場合もあります。


<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>値</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>サブジェクト名</p></td>
<td><p>プールの FQDN</p></td>
<td><p>webext.contoso.com</p></td>
</tr>
<tr class="even">
<td><p>サブジェクトの別名</p></td>
<td><p>プールの FQDN</p></td>
<td><p>webext.contoso.com</p>



> [!IMPORTANT]
> サブジェクト名は、サブジェクトの代替名にも含まれている必要があります。

</td>
</tr>
<tr class="odd">
<td><p>サブジェクトの別名</p></td>
<td><p>オプションのディレクター Web サービス (ディレクターが展開されている場合)</p></td>
<td><p>webdirext.contoso.com</p></td>
</tr>
<tr class="even">
<td><p>サブジェクトの別名</p></td>
<td><p>会議の単純な URL</p>



> [!NOTE]
> すべての会議の単純な Url は、件名の代替名に含まれている必要があります。 各 SIP ドメインには、少なくとも1つのアクティブな会議の単純な URL が必要です。

</td>
<td><p>meet.contoso.com</p></td>
</tr>
<tr class="odd">
<td><p>サブジェクトの別名</p></td>
<td><p>ダイヤルインの簡易 URL</p></td>
<td><p>dialin.contoso.com</p></td>
</tr>
<tr class="even">
<td><p>サブジェクトの別名</p></td>
<td><p>Office Web Apps サーバー</p></td>
<td><p>officewebapps01.contoso.com</p></td>
</tr>
<tr class="odd">
<td><p>サブジェクトの別名</p></td>
<td><p>外部自動検出サービスの URL</p></td>
<td><p>lyncdiscover.contoso.com</p>



> [!NOTE]
> Microsoft Exchange Server も使用している場合は、Exchange の自動検出と web サービスの Url に対してリバースプロキシルールを構成する必要もあります。

</td>
</tr>
</tbody>
</table>


<div>


> [!NOTE]
> 内部展開が複数の Standard Edition サーバーまたはフロントエンドプールで構成されている場合は、外部 web ファームの各 FQDN に対して web 公開ルールを構成する必要があります。また、それぞれに対して証明書と web リスナーが必要です。または、証明書を取得する必要があります。サブジェクトの別名には、すべてのプールで使用される名前が含まれているため、web リスナーに割り当て、複数の web 公開ルールで共有することができます。



</div>

<div>

## <a name="create-a-certificate-request"></a>証明書の要求を作成する

リバースプロキシで証明書要求を作成します。 別のコンピューターで要求を作成した場合、公開された証明機関から署名された証明書を取得したら、秘密キーを使って署名された証明書をエクスポートして、リバースプロキシにインポートする必要があります。

<div>


> [!NOTE]
> 証明書の要求または証明書署名要求 (CSR) は、要求するコンピューターの公開キーを確認して署名するための、信頼できる公開証明機関 (CA) への要求です。 証明書が生成されると、公開キーと秘密キーが作成されます。 公開キーのみが共有され、署名されます。 名前が示すように、公開キーはどのパブリック要求でも利用可能になります。 公開キーは、クライアント、サーバー、および情報を安全に交換し、コンピューターの id を検証する必要があるその他の要求者によって使用されます。 秘密キーはセキュリティで保護された状態であり、公開キーで暗号化されたメッセージの暗号化を解除するキーペアを作成したコンピューターによってのみ使用されます。 秘密キーを他の目的で使うことができます。 リバースプロキシを目的として、データの暗号化は主要な用途です。 Secondarily は、証明書のキーレベルでの証明書の認証は別の用途であり、要求者にコンピューターの公開キーが設定されていること、または公開キーを持っているコンピューターが実際に要求するコンピューターとして使用されることが制限されます。



</div>

<div>


> [!TIP]
> エッジサーバー証明書とリバースプロキシ証明書を同時に計画している場合は、2つの証明書要件の間に大きな類似性があることに注意してください。 エッジサーバーの証明書を構成して要求するときは、Edge サーバーと逆プロキシのサブジェクトの代替名を結合します。 証明書と秘密キーをエクスポートし、エクスポートされたファイルをリバースプロキシにコピーしてから、証明書とキーのペアをインポートして、今後の手順で必要に応じて割り当てることができる場合は、リバースプロキシに対して同じ証明書を使用できます。 「Lync server&nbsp;<A href="lync-server-2013-plan-for-edge-server-certificates.md">2013 のエッジサーバーの証明</A>書」および「リバースプロキシ<A href="lync-server-2013-certificate-summary-reverse-proxy.md">証明書の概要-lync server 2013 のリバースプロキシ</A>」の「エッジサーバーの証明書の要件」を参照してください。 エクスポート可能な秘密キーを使用して証明書を作成していることを確認してください。 プールされたエッジサーバーには、エクスポート可能な秘密キーを使用して証明書と証明書の要求を作成する必要があるため、これは通常の方法であり、エッジサーバーの Lync Server 展開ウィザードの証明書ウィザードでは、このように設定することができます。 <STRONG>エクスポート可能な秘密キー</STRONG>フラグ。 公開証明機関から証明書の要求を受信すると、証明書と秘密キーがエクスポートされます。 秘密キーを使って証明書を作成してエクスポートする方法について詳しくは、「 <A href="lync-server-2013-set-up-certificates-for-the-external-edge-interface.md">Lync Server 2013 の外部エッジインターフェイスの</A>証明書を設定する」の「プール内のエッジサーバーの秘密キーを使って証明書をエクスポートする」を参照してください。 証明書の拡張子は<STRONG>.pfx</STRONG>である必要があります。



</div>

証明書と秘密キーが割り当てられているコンピューター上で証明書署名要求を生成するには、次の操作を行います。

**証明書署名要求の作成**

1.  Microsoft 管理コンソール (MMC) を開き、証明書スナップインを追加して、[**コンピューター**]、[**個人**] の順に展開します。 Microsoft 管理コンソール (MMC) で証明書コンソールを作成する方法について詳しくは[http://go.microsoft.com/fwlink/?LinkId=282616](http://go.microsoft.com/fwlink/?linkid=282616)、「」をご覧ください。

2.  [**証明書**] を右クリックし、[**すべてのタスク**]、[**詳細操作**]、[**カスタム要求の作成**] の順序でクリックします。

3.  [**証明書の登録**] ページで、[**次へ**] をクリックします。

4.  [**カスタム要求**] の [**証明書の登録ポリシーの選択**] ページで、[**登録ポリシーなしで続行**する] を選択します。 [ **次へ**] をクリックします。

5.  [**カスタム要求**] ページの [**テンプレート**] で、[**レガシキーの選択 (テンプレートなし)**] を選びます。 証明書プロバイダーによって指示されていない限り、[**既定の拡張子**を表示しない] をオフのままにし、 **PKCS \#10**で**要求形式**を選択します。 [ **次へ**] をクリックします。

6.  [**証明書情報**] ページで、[**詳細**] をクリックし、[**プロパティ**] をクリックします。

7.  [**証明書のプロパティ**] ページ**** の [**フレンドリ名**] フィールドに、この証明書の名前を入力します。 必要に応じて、[**説明**] フィールドに説明を入力します。 フレンドリ名と説明は、通常、管理者が証明書の目的 ( **Lync Server のリバースプロキシリスナー**など) を識別するために使用されます。

8.  [**件名**] タブを選択します。[**種類**] の [**サブジェクト名**] で、[サブジェクト名] の [**共通名**] を選択します。 この**値**には、リバースプロキシに使用するサブジェクト名を入力し、[**追加**] をクリックします。 このトピックの表に示した例では、サブジェクト名は webext.contoso.com であり、サブジェクト名の値フィールドに入力します。

9.  [**件名**] タブの [**代替名**] で、[**種類**] のドロップダウンから [ **DNS** ] を選びます。 証明書に必要な定義されたサブジェクトの代替名ごとに、完全修飾ドメイン名を入力し、[**追加**] をクリックします。 たとえば、表に、meet.contoso.com、dialin.contoso.com、lyncdiscover.contoso.com という3つのサブジェクトの代替名があります。 [**値**] フィールドに「meet.contoso.com」と入力して、[**追加**] をクリックします。 定義する必要があるサブジェクト別の名前ごとに、この手順を繰り返します。

10. [**証明書のプロパティ**] ページで、[**拡張機能**] タブをクリックします。このページでは、**キー使用**時に暗号化キーの目的を定義し、**拡張キー使用法 (アプリケーションポリシー)** で拡張キー使用法を使用します。

11. **使用可能なオプション**を表示するには、**キー使用**の矢印をクリックします。 [使用できるオプション] で [**デジタル署名**] をクリックし、[**追加**] をクリックします。 [**キーの暗号化**] をクリックし、[**追加**] をクリックします。 [**次のキーの使用を必須**にする] チェックボックスがオフになっている場合は、チェックボックスをオンにします。

12. [**拡張キー使用法 (アプリケーションポリシー)** ] の矢印をクリックして、**利用可能なオプション**を表示します。 [使用可能なオプション] で [**サーバー認証**] をクリックし、[**追加**] をクリックします。 [**クライアント認証**] をクリックし、[**追加**] をクリックします。 [**拡張キーの使用を確認**する] チェックボックスがオンになっている場合は、チェックボックスをオフにします。 [キーの使用方法] チェックボックス (オンにする必要があります) とは異なり、[拡張キー使用] チェックボックスがオフになっていることを確認する必要があります。

13. [**証明書のプロパティ**] ページで、[**秘密キー** ] タブをクリックします。 [**キーオプション**] の矢印をクリックします。 [**キーサイズ**] で、ドロップダウンから [ **2048** ] を選びます。 この証明書の目的であるリバースプロキシ以外のコンピューターでこのキーペアと CSR を作成する場合は、[**秘密キーをエクスポート**可能にする] を選びます。
    
    <div>
    
    <table>
    <thead>
    <tr class="header">
    <th><img src="images/Gg398321.security(OCS.15).gif" title="証券" alt="security" />セキュリティメモ:</th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td>ファーム内の各コンピューターに証明書と秘密キーをコピーするので、通常は、ファーム内に複数の逆プロキシがある場合に、[<strong>エクスポート可能な秘密キーを作成</strong>する] を選択します。 エクスポート可能な秘密キーの使用を許可する場合は、証明書とそれが生成されるコンピューターについて特別な注意を払う必要があります。 秘密キーが侵害されると、その証明書は無意味になり、コンピューターやコンピューターが外部アクセスやその他のセキュリティの脆弱性にさらされる可能性があります。</td>
    </tr>
    </tbody>
    </table>
    
    </div>

14. [**秘密キー** ] タブで、[**キーの種類**] の矢印をクリックします。 [ **Exchange** ] オプションを選びます。

15. [ **OK** ] をクリックして、設定した**証明書のプロパティ**を保存します。

16. [**証明書の登録**] ページで、[**次へ**] をクリックします。

17. [**オフライン要求を保存しますか?** ] ページで、証明書署名要求を保存するための**ファイル名**と**ファイル形式を指定**するように求められます。

18. [**ファイル名**エントリ] フィールドに要求のパスとファイル名を入力するか、[**参照**] をクリックしてファイルの場所を選択し、要求のファイル名を入力します。

19. **ファイル形式**については、**ベース 64**または**バイナリ**のいずれかをクリックします。 証明書のベンダーによって指示されている場合を除き、[**ベース 64** ] を選びます。

20. 前の手順で保存した要求ファイルを見つけます。 公開証明機関に提出します。
    
    <div>
    

    > [!IMPORTANT]
    > Microsoft は、統合された通信目的の要件を満たすパブリック Ca を特定しました。 リストは、次のサポート技術情報の記事に記載されています。 <A href="http://go.microsoft.com/fwlink/?linkid=282625">http://go.microsoft.com/fwlink/?LinkId=282625</A>

    
    </div>

</div>

</div>

<span> </span>

</div>

</div>

</div>

