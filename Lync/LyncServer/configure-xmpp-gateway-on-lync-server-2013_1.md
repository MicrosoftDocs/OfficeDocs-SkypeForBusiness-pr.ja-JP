---
title: Lync Server 2013 で XMPP ゲートウェイを構成する
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
audience: Admin
f1.keywords:
- NOCSH
TOCTitle: Configure XMPP gateway on Lync Server 2013
ms:assetid: 00777a34-cc36-4992-9459-08c14543ef6b
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ687953(v=OCS.15)
ms:contentKeyID: 49733538
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 5735c9e4786548ce7b12ab82327ffc72c27873bb
ms.sourcegitcommit: 88a16c09dd91229e1a8c156445eb3c360c942978
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/14/2020
ms.locfileid: "42006553"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="configure-xmpp-gateway-on-lync-server-2013"></a>Lync Server 2013 で XMPP ゲートウェイを構成する

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**トピックの最終更新日:** 2012-10-19_

XMPP (eXtensible Messaging and Presence Protocol) フェデレーション パートナーをサポートするポリシーを構成すると、そのポリシーは XMPP フェデレーション ドメインのユーザーには適用されますが、SIP (セッション開始プロトコル) インスタント メッセージング (IM) サービス プロバイダー (Windows Live など) のユーザーや、SIP フェデレーション ドメインのユーザーには適用されません。 ユーザーによる連絡先の追加や通信を許可する XMPP フェデレーション ドメインごとに XMPP フェデレーション パートナーを構成します。 ポリシーが適用されると、追加のタスクには XMPP ゲートウェイ証明書の構成、Lync Server 2013 XMPP ゲートウェイの展開、および XMPP ゲートウェイの DNS レコードの更新が含まれます。

<div>

## <a name="configure-xmpp-gateway-certificates-on-the-lync-server-2013-edge-server"></a>Lync Server 2013 エッジ サーバーで XMPP ゲートウェイの証明書を構成する

1.  エッジ サーバーで、展開ウィザードの [**手順 3: 証明書の要求、インストール、または割り当て**] の横にある [**再実行**] をクリックします。
    
    <div class=" ">
    

    > [!TIP]  
    > 初めてエッジ サーバーを展開する場合は、[再実行] ではなく [実行] が表示されます。

    
    </div>

2.  [**利用可能な証明書タスク**] ページで、[**新しい証明書要求を作成する**] をクリックします。

3.  [**証明書の要求**] ページで、[**外部エッジの証明書**] をクリックします。

4.  [**要求を後で送信または今すぐ送信**] ページで、[**要求を準備して後で送信する**] チェック ボックスをオンにします。

5.  [**証明書要求ファイル**] ページで、要求を保存するファイルの完全なパスとファイル名を入力します (たとえば、c:\\cert\_外部\_edge. .cer)。

6.  [**代替証明書テンプレートの指定**] ページで、既定の WebServer テンプレート以外のテンプレートを使用するには、[**選択した証明機関に別の証明書テンプレートを使用する**] チェック ボックスをオンにします。

7.  [**名前およびセキュリティの設定**] ページで、次の操作を行います。
    
    1.  [**フレンドリ名**] に、証明書の表示名を入力します。
    
    2.  [**ビット長**] で、ビット長を指定します (通常は既定値の 2048)。
    
    3.  [**証明書の秘密キーをエクスポート可能としてマークする**] チェック ボックスがオンになっていることを確認します。

8.  [**組織情報**] ページで、組織の名前と組織単位 (部や課など) を入力します。

9.  [**地理情報**] ページで、場所情報を指定します。

10. [**サブジェクト名/サブジェクト代替名**] ページに、ウィザードによって自動的に設定される情報が表示されます。追加のサブジェクトの別名が必要な場合、次の 2 つの手順で指定します。

11. [**サブジェクト代替名 (san) の Sip ドメイン設定**] ページで、[ドメイン] チェックボックスをオンにして sip を追加します。\<microsoft.rtc.management.xds.sipdomain\>エントリをサブジェクトの別名一覧に入力します。

12. [**追加のサブジェクト代替名の構成**] ページで、必要な追加のサブジェクトの別名を指定します。
    
    <div class=" ">
    

    > [!TIP]  
    > XMPP プロキシがインストールされている場合は、既定でドメイン名 (contoso.com など) が SAN エントリに設定されています。別のエントリが必要な場合は、この手順で追加します。

    
    </div>

13. [**要求の概要**] ページで、要求を生成するために使用する証明書情報を確認します。

14. コマンドの実行が完了したら、[**ログの表示**] をクリックするか、または [**次へ**] をクリックして続行します。

15. [**証明書要求ファイル**] ページで、[表示] をクリックして生成済みの証明書の署名要求 (CSR) ファイルを表示するか、または [**完了**] をクリックして証明書ウィザードを終了します。

16. 要求ファイルをコピーして、公的証明機関に送信します。

17. パブリック証明書の受信、インポート、および割り当てを行った後、エッジ サーバー サービスを停止して再起動する必要があります。これは、Lync Server 管理コンソールで次のコマンドを入力して行います。
    
       ```console
        Stop-CsWindowsService
       ```
    
       ```console
        Start-CsWindowsService
       ```

</div>

<div>

## <a name="configure-a-new-lync-server-2013-xmpp-gateway"></a>新しい Lync Server 2013 XMPP ゲートウェイを構成する

1.  [Lync Server コントロール パネル] を開きます。

2.  左側のナビゲーション バーで [**フェデレーションと外部アクセス**]、[**XMPP フェデレーション パートナー**] の順にクリックします。

3.  新しい構成を作成するには、[**新規**] をクリックします。

4.  以下の設定を定義します。

5.  **プライマリドメイン**    (必須)。 プライマリ ドメインは、XMPP パートナーの基本ドメインです。 たとえば、XMPP パートナーのドメイン名として **fabrikam.com** と入力します。 これは必須のエントリです。

6.  **説明**   この特定の構成についての説明は、メモまたはその他の識別情報を対象としています。 このエントリは省略可能です。

7.  **その他のドメイン**   追加のドメインは、許可された xmpp 通信の一部として含める必要がある、xmpp パートナーのドメインの一部であるドメインです。 たとえば、プライマリドメインが**fabrikam.com**の場合は、xmpp を使用して通信する fabrikam.com の下にある他のすべてのドメインを一覧表示します。

8.  **パートナー**   の種類**パートナーの種類**は必要な設定です。 連絡先を追加できるようにするには、次のいずれかを選択する必要があります。 次の中から選択できます。
    
      - **フェデレーション****フェデレーション**パートナーの種類は、Lync Server の展開と xmpp パートナーとの間の高レベルの信頼を表します。このパートナーの種類は、同じエンタープライズ内で XMPP サーバーとのフェデレーションを行う場合や、ビジネス上の関係が確立されている場合にお勧めします。フェデレーションパートナーの XMPP 連絡先は次のことができます。
        
        1.  Lync ユーザーからの明示的な承認なしで Lync の連絡先を追加し、そのプレゼンスを表示する。
        
        2.  Lync ユーザーが連絡先リストに追加しているかどうかに関係なく、Lync の連絡先にインスタント メッセージを送信する。
        
        3.  Lync ユーザーの状態メモを表示する。
    
      - **公開**されていることが確認済みの公開パートナーは、ユーザーの id を確認するために信頼されているパブリック xmpp プロバイダーです。 ****  パブリック検証されたネットワークの XMPP 連絡先は、Lync の連絡先を追加し、そのプレゼンスを表示して、Lync ユーザーからの明示的な承認なしにインスタントメッセージを送信できます。パブリックに確認されたネットワークの XMPP 連絡先には、Lync ユーザーの状態メモは表示されません。この設定は推奨されていません。
    
      - [**公開未確認**] **公開未確認**のパートナーは、自らのユーザーの身元の確認に関して信頼されていないパブリック XMPP プロバイダーです。公開未確認ネットワーク上の XMPP ユーザーは、連絡先リストへの追加によって Lync ユーザーから明示的に承認されていない限り、Lync ユーザーと通信できません。公開未確認ネットワーク上の XMPP ユーザーに Lync ユーザーの状態メモが表示されることは決してありません。この設定は、Google Talk のようなパブリック XMPP プロバイダーとのあらゆるフェデレーションで推奨されます。

9.  **接続の種類:** さまざまなルールとダイヤルバック設定を定義します。
    
      - **Tls ネゴシエーション**   は tls ネゴシエーションルールを定義します。 また、TLS がサポートされないように定義することもできます。 [任意] を選択すると、ネゴシエーションが必須であるかどうかの決定は XMPP サービスに委ねられます。 使用可能なすべての設定と詳細を表示するには、有効でなく既知のエラーの構成を含む、SASL、TLS、およびダイヤルバックのネゴシエーションに関する設定を参照してください。「 [Lync Server 2013 の XMPP フェデレーションパートナーのネゴシエーション設定](lync-server-2013-negotiation-settings-for-xmpp-federated-partners.md)」を参照してください。
        
           - **必須**   xmpp サービスは TLS ネゴシエーションを必要とします。
        
           - **オプション**   xmpp サービスは、TLS がネゴシエーションに必須であることを示します。
        
           - **[サポート**   なし xmpp サービスは TLS をサポートしていません。
    
      - **Sasl ネゴシエーション**   は、sasl ネゴシエーションルールを定義します。 また、SASL がサポートされないように定義することもできます。 [任意] を選択すると、ネゴシエーションが必須であるかどうかの決定は XMPP サービスに委ねられます。
        
           - **必須**   xmpp サービスは SASL ネゴシエーションを必要とします。
        
           - **省略可能**   xmpp サービスは、SASL がネゴシエーションに必須であることを示します。
        
           - **[サポート**   なし xmpp サービスは SASL をサポートしません。
    
      - **サーバーダイヤルバックネゴシエーションのサポート**サポートサーバーのダイヤルバックネゴシエーション処理では、ドメインネームシステム (DNS) と権限のあるサーバーを使用して、要求が有効な XMPP パートナーから来たものであることを確認します。 これを行うために、送信元サーバーは、生成されたダイヤルバックキーを使用して特定の種類のメッセージを作成し、DNS で受信側サーバーを検索します。 送信元サーバーは、生成された DNS 参照 (受信側サーバーなど) に、XML ストリームでキーを送信します。 XML ストリームの上でキーを受け取ると、受信側サーバーは送信元のサーバーに応答しませんが、既知の権限のあるサーバーにキーを送信します。 権限のあるサーバーは、キーが有効であるか無効であるかを確認します。 有効でない場合、受信側のサーバーは送信元のサーバーに応答しません。 キーが有効である場合、受信側のサーバーは、送信元のサーバーに id とキーが有効であることを通知し、会話を開始できます。
        
        **ダイヤルバック ネゴシエーション**には、2 つの状態があります。
        
           - **True**   は、発信元サーバーから要求を受信した場合に、ダイヤルバックネゴシエーションを使用するように xmpp サーバーを構成します。
        
           - **False**   xmpp サーバーはダイヤルバックネゴシエーションを使用するように構成されておらず、発信元サーバーから要求を受信した場合は無視されます。

10. [**確定**] をクリックして、サイトまたはユーザー ポリシーへの変更を保存します。


</div>

<div>

## <a name="update-dns-records-for-lync-server-2013-xmpp-gateway"></a>Lync Server 2013 XMPP ゲートウェイの DNS レコードを更新する

1.  XMPP フェデレーションの DNS を構成するには、外部 DNS:\_xmpp サーバーに次の SRV レコードを追加します。\_tcp。\<ドメイン名\> SRV レコードは、エッジサーバーのアクセスエッジ FQDN に解決され、ポート値は5269になります。

</div>

</div>

<span> </span>

</div>

</div>

</div>

