---
title: 'Lync Server 2013: モビリティの技術要件'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Technical requirements for mobility
ms:assetid: 831be681-4de0-4e42-b04f-8879ca4dcd23
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Hh690030(v=OCS.15)
ms:contentKeyID: 48184679
ms.date: 07/24/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: a4eef2cb185653446627fe6ccec2d49538e1162b
ms.sourcegitcommit: b693d5923d6240cbb865241a5750963423a4b33e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/04/2020
ms.locfileid: "41746487"
---
<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="http://msdn.microsoft.com/en-us/">

<div data-asp="http://msdn2.microsoft.com/asp">

# <a name="technical-requirements-for-mobility-in-lync-server-2013"></a>Lync Server 2013 でのモビリティの技術要件

</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**最終更新日:** 2014-07-24_

    Some information in this topic pertains to Cumulative Updates for Lync Server 2013: February 2013.

モバイルユーザーは、特別な計画が必要なさまざまなモバイルアプリケーションシナリオを経験しています。 たとえば、他のユーザーが、3G ネットワーク経由で接続しているときに、職場から離れてモバイルアプリケーションの使用を開始する可能性がある場合は、職場に到着したときに企業の Wi-fi ネットワークに切り替え、建物を離れるときに3G に切り替えることができます。 環境を計画して、このようなネットワークの移行をサポートし、一貫したユーザーエクスペリエンスを保証する必要があります。 このセクションでは、モバイルアプリケーションをサポートし、モビリティリソースを自動検出するために必要なインフラストラクチャの要件について説明します。

<div>


> [!NOTE]  
> モバイルアプリケーションは、他の Lync Server 2013 サービスに接続することもできますが、すべてのモバイルアプリケーション web 要求を同じ外部 web 完全修飾ドメイン名 (FQDN) に送信するための要件は、Lync Server 2013 Mobility Service にのみ適用されます。 その他のモバイルサービスでは、この構成は必要ありません。



</div>

ハードウェアロードバランサーでの cookie の類似性の要件は大幅に削減されます。 lync 2013 Mobile を使用している場合は、[伝送制御プロトコル (TCP)] のアフィニティに置き換えます。 Cookie の類似性は引き続き使用できますが、web サービスでは不要になりました。

<div>


> [!IMPORTANT]  
> すべてのモビリティーサービストラフィックは、発信元ポイントがどこにあるかにかかわらず、リバースプロキシを通過します。 1つの逆プロキシまたはリバースプロキシのファームの場合、またはリバースプロキシ機能を提供するデバイスの場合、内部トラフィックがインターフェイスを使って egressing、同じインターフェイスですぐに入力を試みると、問題が発生する可能性があります。 これにより、多くの場合、TCP パケットスプーフィングまたはスプーフィングのみと呼ばれるセキュリティルール違反が発生します。 ポインターを機能させるには、<EM>髪のピン留め</EM>(パケットまたは一連のパケットの出口と即時受信) が許可されている必要があります。 この問題を解決する1つの方法は、ファイアウォールから分離された逆プロキシを使用することです (スプーフィング防止ルールは、セキュリティのため、常にファイアウォールで適用する必要があります)。 転送は、ファイアウォールの外部インターフェイスではなく、リバースプロキシの外部インターフェイスで発生する可能性があります。 ファイアウォールでスプーフィングを検出し、リバースプロキシでルールを緩和して、四肢に必要な転送を許可します。<BR>可能な限り、ドメインネームシステム (DNS) のホストまたは CNAME レコードを使用して、転送の動作 (ファイアウォールではなく) のリバースプロキシを定義します。



</div>

Lync Server 2013 は、Lync 2010 Mobile および Lync 2013 モバイルクライアント用のモビリティサービスをサポートしています。 両方のクライアントは、モバイルのエントリポイントを見つけるために Lync Server 2013 自動検出サービスを使用しますが、どのモバイルサービスを使うかは異なります。 Lync 2010 Mobile では、" *Mcx*" と呼ばれるモバイルサービスが使用されます。これは、lync Server 2010 の累積的な更新プログラム (2011 年11月) で導入されました。 Lync 2013 モバイルクライアントは、モバイルサービスプロバイダーとしてユニファイドコミュニケーション Web API または*Ucwa*を使用します。

<div>

## <a name="internal-and-external-dns-configuration"></a>内部と外部の DNS 構成

モビリティーサービス Mcx (Lync Server 2010: 2011 年11月の累積更新プログラムで導入されました) と UCWA (Lync Server 2013 2013 の累積更新プログラムで導入されました) と、同じ方法で DNS を使用します。

自動検出を使う場合、モバイルデバイスは DNS を使ってリソースを探します。 DNS 参照時に、内部 DNS レコード (lyncdiscoverinternal) に関連付けられている FQDN への接続が最初\<に試行されます。内部ドメイン名\>)。 内部 DNS レコードを使用して接続を確立できない場合は、外部 DNS レコード (lyncdiscover を使用して接続が\<試行されます。sipdomain\>)。 ネットワーク内部のモバイルデバイスが内部自動検出サービス URL に接続し、ネットワーク外部のモバイルデバイスが外部自動検出サービス URL に接続します。 外部の自動検出要求は、リバースプロキシを通じて送信されます。 Lync Server 2013 自動検出サービスは、モビリティサービス (Mcx および UCWA) Url を含む、ユーザーのホームプールのすべての Web サービスの Url を返します。 ただし、内部のモビリティーサービス URL と外部モビリティーサービスの URL の両方が、外部 Web サービスの FQDN と関連付けられています。 そのため、モバイルデバイスがネットワークの内部と外部のどちらであるかに関係なく、デバイスは常にリバースプロキシ経由で外部の Lync Server 2013 モビリティサービスに接続します。

<div>


> [!NOTE]  
> 展開は、内部および外部使用のために複数の異なる名前空間で構成できることを理解しておくことが重要です。 SIP ドメイン名は、内部展開ドメイン名とは異なる場合があります。 たとえば、お客様の SIP ドメインは<STRONG>contoso.com</STRONG>の場合もありますが、内部展開は<STRONG>contoso.net</STRONG>になることがあります。 Lync Server にログインしているユーザーは、 <STRONG>john@contoso.com</STRONG>などの SIP ドメイン名を使用します。 外部 web サービス (Topology Builder で<STRONG>外部 web サービス</STRONG>として定義される) に対応する場合、ドメイン名と SIP ドメイン名は、DNS で定義されているように一貫性が保たれます。 内部 web サービス (Topology Builder で<STRONG>内部 web サービス</STRONG>として定義されます) に対応する場合、内部 web サービスの既定の名前は、フロントエンドサーバー、フロントエンドプール、ディレクター、またはディレクタープールの FQDN になります。 内部 web サービス名を上書きするオプションがあります。 内部 web サービスの場合は、SIP ドメイン名ではなく内部ドメイン名を使用し、上書きされた名前を反映する DNS host A (IPv6、AAAA) レコードを定義する必要があります。 たとえば、既定の内部 web サービス FQDN は<STRONG>pool01.contoso.net</STRONG>である場合があります。 上書きされた内部 web サービス FQDN が<STRONG>webpool.contoso.net</STRONG>である可能性があります。 この方法で web サービスを定義することで、サービスの内部および外部の地域において、それらを使用しているユーザーの局所性ではなく、サービスの内部および外部の地域を確実に確認することができます。<BR>ただし、web サービスはトポロジビルダーで定義されており、結果の web サービス名、検証する証明書、および定義されている DNS レコードが一貫している限り、その web サービスの名前を上書きすることができます。必要なすべてのドメイン名 (SIP ドメイン名を含む) での内部 web サービス。 最終的に、IP アドレスに対する名前の解決は DNS ホストレコードと一貫性のある名前空間によって決定されます。<BR>このトピックと例のために、内部ドメイン名を使ってトポロジと DNS 定義を示します。



</div>

次の図は、内部と外部の DNS 構成を使用している場合のモビリティサービスと自動検出サービスに対するモバイルアプリケーション web 要求のフローを示しています。

**自動検出を使用したモビリティのサービスフロー**

![cdb96424-96f2-4abf-88d7-1d32d1010ffd](images/Hh690030.cdb96424-96f2-4abf-88d7-1d32d1010ffd(OCS.15).jpg "cdb96424-96f2-4abf-88d7-1d32d1010ffd")

<div>


> [!NOTE]  
> この図は、一般的な web サービスを示しています。 Mobility という名前の仮想ディレクトリは、モビリティーサービス Mcx および UCWA を示しています。 Lync Server 2013 の累積更新プログラムを適用していない場合: 2013 年2月、内部と外部の Web サービスで仮想ディレクトリ Ucwa が定義されていない可能性があります。 仮想ディレクトリの自動検出が行われ、仮想ディレクトリの Mcx が存在する可能性があります。<BR>展開したモビリティサービステクノロジに関係なく、自動検出とサービスの検出は同じように機能します。



</div>

企業ネットワーク内外のモバイルユーザーをサポートするには、内部と外部の web Fqdn がいくつかの前提条件を満たしている必要があります。 さらに、実装することを選んだ機能に応じて、その他の要件を満たしている必要があります。

  - 自動検出のための新しい DNS、CNAME または (host、IPv6、AAAA) レコード

  - 新しいファイアウォール ルール - Wi-Fi ネットワーク経由でプッシュ通知をサポートする場合。

  - 自動検出のために、内部サーバー証明書と逆プロキシ証明書のサブジェクト別の名前。

  - フロントエンドサーバーのハードウェアロードバランサー構成がソースの類似性を変更します。

モビリティサービスと自動検出サービスをサポートするには、トポロジが次の要件を満たしている必要があります。

  - フロントエンドプールの内部 web FQDN は、フロントエンドプールの外部 web FQDN とは別のものにする必要があります。

  - 内部 web FQDN は、企業ネットワーク内からのみ解決され、アクセス可能である必要があります。

  - 外部 web FQDN は、インターネット経由でのみ解決され、アクセスできる必要があります。

  - 企業ネットワーク内のユーザーの場合は、モビリティサービスの URL が外部 web FQDN に対応している必要があります。 この要件は、モバイルサービス用で、この URL にのみ適用されます。

  - 企業ネットワークの外部にいるユーザーの場合、要求はフロントエンドプールまたはディレクターの外部 web FQDN にアクセスする必要があります。

自動検出をサポートしている場合は、SIP ドメインごとに次の DNS レコードを作成する必要があります。

  - 組織のネットワーク内から接続するモバイルユーザーをサポートする内部 DNS レコード。

  - インターネットから接続するモバイルユーザーをサポートするための、外部またはパブリックの DNS レコード。

内部の自動検出 URL は、ネットワークの外部からのアドレス指定を行うことはできません。 外部の自動検出 URL は、ネットワーク内からアドレス指定できません。 ただし、外部 URL に対してこの要件を満たしていない場合は、内部 URL が常に最初に試行されるため、モバイルクライアントの機能が影響を受ける可能性は高くなります。

DNS レコードは、CNAME レコードまたは (IPv6、AAAA の場合は host) レコードのいずれかにすることができます。

<div>


> [!NOTE]  
> モバイルデバイスクライアントは、異なるドメインからの複数の Secure Sockets Layer (SSL) 証明書をサポートしていません。 したがって、異なるドメインへの CNAME リダイレクションは HTTPS 経由ではサポートされません。 たとえば、director.contoso.net のアドレスにリダイレクトされる lyncdiscover.contoso.com の DNS CNAME レコードは HTTPS ではサポートされません。 このようなトポロジでは、モバイルデバイスクライアントは、最初の要求に対して HTTP を使う必要があるため、CNAME リダイレクションが HTTP で解決されます。 それ以降の要求では HTTPS を使用します。 このシナリオをサポートするには、ポート 80 (HTTP) 用の web 公開ルールを使用してリバースプロキシを構成する必要があります。 詳細については、「 <A href="lync-server-2013-configuring-the-reverse-proxy-for-mobility.md">Lync Server 2013 でモビリティのリバースプロキシを構成</A>する」の「ポート80用の web 公開ルールを作成するには」を参照してください。<BR>同じドメインへの CNAME リダイレクションは HTTPS 経由でサポートされています。 この場合、宛先ドメインの証明書は元のドメインを対象としています。



</div>

シナリオに必要な DNS レコードの詳細については、「 [dns の概要-Lync Server 2013 での自動検出](lync-server-2013-dns-summary-autodiscover.md)」を参照してください。

</div>

<div>

## <a name="port-and-firewall-requirements"></a>ポートとファイアウォールの要件

プッシュ通知をサポートしていて、Apple モバイルデバイスで Wi-fi ネットワーク経由でプッシュ通知を受信できるようにする場合は、エンタープライズ Wi-fi ネットワークでポート5223を開く必要があります。 ポート5223は、Apple Push Notification Service (APNS) で使用される送信 TCP ポートです。 モバイルデバイスから接続が開始されます。 詳細について[http://support.apple.com/kb/TS1629](http://support.apple.com/kb/ts1629)は、を参照してください。

<div>


> [!WARNING]  
> Lync 2013 モバイルクライアントを使っている Apple デバイスでは、プッシュ通知は必要ありません。



</div>

ユーザーが Survivable Branch Appliance (SBA) をホームにしている場合は、次のポートが必要になることに注意してください。

  - Ucの Ipexternallisteningport には、ポート5088が必要です

  - Ucの Ipprimarylisteningport にはポート5089が必要です

自動検出のポートとプロトコルの要件の詳細とガイダンスについては、「[ポートの概要-Lync Server 2013 での自動検出](lync-server-2013-port-summary-autodiscover.md)」を参照してください。

</div>

<div>

## <a name="certificate-requirements"></a>証明書の要件

Lync モバイルクライアントの自動検出をサポートしている場合は、モバイルクライアントからのセキュリティで保護された接続をサポートするために、証明書のサブジェクトの代替名の一覧を変更する必要があります。 自動検出サービスを実行する各フロントエンドサーバーとディレクターについて、このセクションで説明されているサブジェクト代替名のエントリを追加して、新しい証明書を要求して割り当てる必要があります。 推奨される方法は、リバースプロキシの証明書のサブジェクト代替名の一覧も変更することです。 組織内のすべての SIP ドメインに対してサブジェクト代替名のエントリを追加する必要があります。

内部証明機関を使った証明書の再発行は、通常は単純なプロセスですが、複数のサブジェクト代替名エントリをリバースプロキシによって使用されるパブリック証明書に追加するのはコストがかかることがあります。 多数の SIP ドメインがあり、サブジェクトの代替名を追加した場合は、HTTPS (既定の構成) を使ったポート443ではなく、HTTP を使用して、ポート80で最初の自動検出サービス要求を行うようにリバースプロキシを構成できます。 要求は、ディレクターまたはフロントエンドプールの [ポート 8080] にリダイレクトされます。 ポート80で最初の自動検出サービス要求を発行する場合、要求では HTTPS ではなく HTTP が使用されるため、リバースプロキシの証明書を変更する必要はありません。 この方法はサポートされていますが、お勧めしません。

</div>

<div>

## <a name="internet-information-services-iis-requirements"></a>インターネットインフォメーションサービス (IIS) の要件

モバイルでは、IIS 7.5、IIS 8.0、または IIS 8.5 を使用することをお勧めします。 Mobility Service installer は、パフォーマンスを向上させるために、ASP.NET にフラグを設定します。 IIS 7.5 は、Windows Server 2008 R2 の既定でインストールされます。 windows Server 2012 には IIS 8.0 がインストールされており、IIS 8.5 は Windows Server 2012 R2 にインストールされています。 モビリティサービスのインストーラーによって、ASP.NET の設定が自動的に変更されます。

</div>

<div>

## <a name="hardware-load-balancer-requirements"></a>ロード バランサー機器の要件

フロントエンドプールをサポートしているハードウェアロードバランサーでは、Web サービストラフィックの外部 Web サービス仮想 Ip (Vip) をソース用に構成する必要があります。 ソースのアフィニティは、1つのクライアントからの複数の接続を1つのサーバーに送信してセッション状態を維持するのに役立ちます。 アフィニティ要件の詳細については、「 [Lync Server 2013 の負荷分散の要件](lync-server-2013-load-balancing-requirements.md)」を参照してください。

内部の Wi-fi ネットワーク経由でのみ Lync モバイルクライアントをサポートする予定の場合は、「外部 Web サービス Vip の説明に従って、ソース用の内部 Web サービスの VIP を構成する」を参照してください。 この場合は、ハードウェアロードバランサー上\_の内部 Web サービス vip に対して、source addr (または TCP) アフィニティを使用する必要があります。 詳細については、「 [Lync Server 2013 の負荷分散の要件](lync-server-2013-load-balancing-requirements.md)」を参照してください。

</div>

<div>

## <a name="reverse-proxy-requirements"></a>プロキシのリバース要件

Lync モバイルクライアントの自動検出をサポートしている場合は、次のように現在の公開ルールを更新する必要があります。

  - リバースプロキシ証明書のサブジェクト代替名の一覧を更新して、最初の自動検出サービス要求に HTTPS を使用する場合は、lyncdiscover の web 公開ルールを更新する必要があります。\<sipdomain\>。 通常、これは、フロントエンドプールの外部 Web サービス URL の公開ルールと組み合わせて使用されます。

  - 最初の自動検出サービス要求に対して HTTP を使用して、リバースプロキシ証明書のサブジェクト代替名の一覧を更新する必要がない場合は、ポート HTTP/TCP 80 に新しい web 公開ルールを作成する必要があります (まだ存在していない場合)。 HTTP/TCP 80 のルールが既に存在する場合は、そのルールを更新して、lyncdiscover を含めることができます。\<sipdomain\>エントリ。

</div>

</div>

<span> </span>

</div>

</div>

</div>

