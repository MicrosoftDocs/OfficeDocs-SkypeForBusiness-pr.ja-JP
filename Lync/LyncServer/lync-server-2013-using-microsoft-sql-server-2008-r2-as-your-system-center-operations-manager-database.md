---
title: Microsoft SQL Server 2008 R2 を System Center Operations Manager データベースとして使用する
TOCTitle: Microsoft SQL Server 2008 R2 を System Center Operations Manager データベースとして使用する
ms:assetid: 0efe76da-8854-499e-bdc7-3623244a8e85
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/JJ687969(v=OCS.15)
ms:contentKeyID: 49886843
ms.date: 05/19/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Microsoft SQL Server 2008 R2 を System Center Operations Manager データベースとして使用する

 

_**トピックの最終更新日:** 2013-07-29_

SQL Server 2008 R2 をバックエンド データベースとして使用する場合は、このトピックで詳しく説明する手順を実行してください。

## SQL Server 2008 R2 と SQL Server Reporting Services の構成

System Center Operations Manager のインストールを開始する前に、SQL Server 2008 R2 と SQL Server Reporting Services の構成に 2 つの変更を加える必要があります (これらの変更が必要となるのは、SQL Server 2008 R2 を Operations Manager データベースとして使用する場合のみです)。まず、Operations Manager データベースをホストするコンピューター上で、次の操作を行います。

1.  \[**スタート**\] ボタンをクリックし、\[**ファイル名を指定して実行**\] をクリックします。

2.  \[**ファイル名を指定して実行**\] ダイアログ ボックスで、「**C:\\Program Files\\Microsoft SQL Server\\ MSRS10\_50.ARCHINST\\Reporting Services\\ReportServer**」と入力し、Enter キーを押します。

3.  **ReportServer** フォルダーで、メモ帳などのテキスト エディターで **rsreportserver.config** ファイルを開きます。

4.  ファイルの先頭付近に "Add Key" ノードがいくつかあります。**\<Add Key="SecureConnectionLevel"** で始まるエントリの Value を **0** に設定します。
    
        <Add Key="SecureConnectionLevel" Value="0"/>

5.  **rsreportserver.config** ファイルを保存し、テキスト エディターを閉じます。

レポート サーバーの構成ファイルを更新したら、次は、SQL Server Reporting Services に適切な証明書を割り当てる必要があります。そのためには、次の操作を行います。

1.  \[**スタート**\] ボタンをクリックし、\[**すべてのプログラム**\]、\[**Microsoft SQL Server 2008 R2**\]、\[**構成ツール**\]、\[**Reporting Services 構成マネージャー**\] の順にクリックします。

2.  \[**Reporting Services 構成の接続**\] ダイアログ ボックスの \[**サーバー名**\] ボックスに、サーバーの名前が表示されていることを確認します。Operations Manager データベースをホストする SQL Server インスタンス (**ARCHINST** など) を \[**レポート サーバー インスタンス**\] ドロップダウン リストから選択し、\[**接続**\] をクリックします。

3.  Reporting Services 構成マネージャーで、\[**Web サービスの URL**\] をクリックします。

4.  \[**Web サービスの URL**\] ページで、Reporting Services に使用する証明書を \[**SSL 証明書**\] ドロップダウン リストから選択し、\[**適用**\] をクリックします。2 ～ 3 秒後、\[**レポート サーバー Web サービスの URL**\] の下に URL のペアが表示されます。

5.  両方の URL をクリックして、SQL Server Reporting Services にアクセスできることを確認します。

6.  Reporting Services 構成マネージャーを閉じます。

## SQL Server 2008 R2 で使用する System Center Operations Manager データベースの作成

SQL Server 2008 R2 データベースを使用するように System Center Operations Manager を構成する場合は、SQL Server 2008 R2 を実行するコンピューターに Operations Manager データベースを "手動" で作成する必要があります (前述のとおり、SQL Server 2005 または SQL Server 2008 をバックエンド データベースとして使用する場合は、これらの手順を実行する必要はありません)。

Operations Manager データベースを手動で作成するには、次の操作を行います。

1.  System Center Operations Manager 2007 R2 セットアップ メディアの SupportTools\\AMD64 フォルダーで、**DBCreateWizard.exe** をダブルクリックします。

2.  データベース構成ウィザードの \[**データベース構成ウィザードの開始**\] ページで、\[**次へ**\] をクリックします。

3.  \[**データベース情報**\] ページで、すべての設定をそのまま使用し (一切変更しないで)、\[**次へ**\] をクリックします。

4.  \[**管理グループの構成**\] ページで、\[**管理グループ名**\] ボックスに、管理グループの名前 (**Lync Server の監視**など) を入力し、\[**次へ**\] をクリックします。

5.  \[**Operations Manager エラー レポート**\] ページで、\[**次へ**\] をクリックします。

6.  \[**概要**\] ページで、\[**完了**\] をクリックします。

## SQL Server 2008 R2 で使用する System Center Operations Manager データ ウェアハウスの作成

Microsoft Lync Server 2013 には、次の 3 つの新しい System Center Operations Manager レポートが付属しています。

  - **エンドツーエンド シナリオ使用状況レポート**   このレポートは、登録やプレゼンスなど、Lync Server の主なサービスの使用状況/稼働時間を詳細に示します。

  - **キャパシティ レポート**   このレポートは、パフォーマンス カウンターの情報を基に、使用できるメモリやプロセッサ使用率など、システム コンポーネントの傾向を示します。

  - **コンポーネント レポート**   このレポートは、トップ アラート ジェネレーターを Lync Server コンポーネント別に分類して示します。

これらの新しいレポートを使用するには、System Center Operations Manager データ ウェアハウスをインストールする必要があります (データ ウェアハウスは、運用データの長期間保存用ストレージです)。SQL Server 2008 R2 でデータ ウェアハウスを使用するには、SQL Server データベースをホストするコンピューター上で、次の操作を行う必要があります。

1.  System Center Operations Manager セットアップ メディアの Setup\\SupportTools\\AMD64 フォルダーで、**DBCreateWizard.exe** をダブルクリックします。

2.  データベース構成ウィザードの \[**データベース構成ウィザードの開始**\] ページで、\[**次へ**\] をクリックします。

3.  \[**データベース情報**\] ページで、\[**データベースのタイプ**\] ドロップダウン リストから \[**Operations Manager データ ウェアハウス データベース**\] を選択し、\[**次へ**\] をクリックします。

4.  \[**概要**\] ページで、\[**完了**\] をクリックします。

## System Center Operations Manager コンソールのインストール

Operations Manager コンソールは、System Center Operations Manager の管理に使用する主要なツールです。Operations Manager コンソールをインストールする前に、SQL Server と SQL Server Reporting Service のサポートされているバージョンがインストールされていることを確認します。また、SQL Server の Reporting Services 構成マネージャーを実行して、Reporting Service が正しくインストールおよび構成されていることを確認することもお勧めします。

System Center Operations Manager コンソールをインストールするには

1.  System Center Operations Manager セットアップ メディアで、**SetupOM.exe** をダブルクリックします。

2.  System Center Operations Manager 2007 R2 のセットアップで、\[**前提条件の確認**\] をクリックします。

3.  System Center Operations Manager 前提条件ビューアーで、インストールする System Center コンポーネント (**サーバー**、**コンソール**、および **PowerShell**) を選択し、\[**確認**\] をクリックします。ブロックに関する問題が報告されていないことを確認したら、\[**閉じる**\] をクリックします。ブロックに関する問題が報告されている場合は、問題を修正します。問題を修正したら、\[**確認**\] をクリックして前提条件を再度確認します。

4.  System Center Operations Manager のセットアップで、\[**Operations Manager のインストール**\] をクリックします。

5.  System Center Operations Manager セットアップ ウィザードの \[**System Center Operations Manager セットアップ ウィザードの開始**\] ページで、\[**次へ**\] をクリックします。

6.  \[**使用許諾契約書**\] ページで、\[**使用許諾契約書に同意します**\] を選択し、\[**次へ**\] をクリックします。

7.  \[**製品登録**\] ページで、\[**ユーザー名**\] ボックスに自分の名前を、\[**組織**\] ボックスに組織の名前を入力します。\[**25 桁の CD キーを入力してください**\] ボックスに System Center Operations Manager のプロダクト キーを入力し、\[**次へ**\] をクリックします。

8.  \[**カスタム セットアップ**\] ページで、インストールする System Center オプションを選択し、\[**次へ**\] をクリックします。インストールする**管理サーバー**、**ユーザー インターフェイス**、および **Web コンソール**を選択する必要があります。**データベース**はインストールしないので選択しないでください。

9.  \[**SC データベース サーバー インスタンス**\] ページで、\[**SC データベース サーバー**\] ボックスに、Operations Manager データベースのインストール先コンピューターの名前が表示されていることを確認します。\[**次へ**\] をクリックします。

10. \[**管理サーバー アクション アカウント**\] ページで、\[**ドメインまたはローカル コンピューターのアカウント**\] を選択し、\[**ユーザー アカウント**\]、\[**パスワード**\]、および \[**ドメインまたはローカル コンピューター**\] ボックスにそれぞれ適切な値を入力します。\[**次へ**\] をクリックします。

11. \[**SDK と Config サービス アカウント**\] ページで、\[**ドメインまたはローカル コンピューターのアカウント**\] を選択し、\[**ユーザー アカウント**\]、\[**パスワード**\]、および \[**ドメインまたはローカル コンピューター**\] ボックスにそれぞれ適切な値を入力します。\[**次へ**\] をクリックします。

12. \[**Operations Manager エラー レポート**\] ページで、\[**次へ**\] をクリックします。

13. \[**カスタマー エクスペリエンス向上プログラム**\] ページで、\[**次へ**\] をクリックします。

14. \[**プログラムのインストールの準備完了**\] ページで、\[**インストール**\] をクリックします。

15. \[**System Center Operations Manager セットアップ ウィザードを完了しています**\] ページで、\[**暗号化キーのバックアップ**\] および \[**コンソールの開始**\] チェック ボックスをオフにし、\[**完了**\] をクリックします。

16. System Center Operations Manager のセットアップで、\[**終了**\] をクリックします。

## System Center レポート サービスのインストール

System Center Operations Manager コンソールのインストールと構成が終了したら、次は、System Center レポート サービスをインストールする必要があります。SQL Server 2008 R2 を Operations Manager バックエンド データベースとして使用する場合は、最初に、SQL Server Reporting Services に関連付けられているセキュリティ グループに一時的な変更を加える必要があります。SQL Server 2008 R2 を使用する場合は、次の操作を行う必要があります。

1.  \[**スタート**\] ボタンをクリックし、\[**管理ツール**\] をポイントします。次に \[**サーバー マネージャー**\] をクリックします。

2.  サーバー マネージャーで、\[**構成**\]、\[**ローカル ユーザーとグループ**\] の順に展開し、\[**グループ**\] をクリックします。

3.  グループ **SQLServerReportServerUser$atl-sc-001$MSRS10\_50.ARCHINST** を見つけます。ここで、atl-sc-001 はコンピューターの名前を表し、ARCHINST は System Center データベースの SQL Server インスタンスを表します。

4.  このグループを右クリックし、\[**名前の変更**\] をクリックします。グループ名から **\_50** を削除して名前を変更します。たとえば、グループ名を **SQLServerReportServerUser$atl-sc-001$MSRS10.ARCHINST** に変更します。

5.  サーバー マネージャーを閉じます。

この時点で、System Center レポート サービスをインストールできます。そのためには、次の操作を行います。

1.  System Center Operations Manager 2007 R2 セットアップ メディアで、**SetupOM.exe** をダブルクリックします。

2.  System Center Operations Manager 2007 R2 のセットアップで、\[**Operations Manager レポートのインストール**\] をクリックします。

3.  System Center Operations Manager 2007 R2 レポート セットアップ ウィザードの \[**Operations Manager レポートのセットアップの開始**\] ページで、\[**次へ**\] をクリックします。

4.  \[**使用許諾契約書**\] ページで、\[**使用許諾契約書に同意します**\] を選択し、\[**次へ**\] をクリックします。

5.  \[**製品登録**\] ページで、\[**ユーザー名**\] ボックスに自分の名前が、\[**組織**\] ボックスに組織の名前が表示されていることを確認し、\[**次へ**\] をクリックします。

6.  \[**カスタム セットアップ**\] ページで、\[**レポート サーバー**\] をクリックし、\[**このコンポーネントおよびすべての従属コンポーネントは、ローカル ディスク ドライブにインストールされます。**\] を選択します。\[**データ ウェアハウス**\] をクリックし、\[**インストールしない**\] を選択して、\[**次へ**\] をクリックします。

7.  \[**ルート管理サーバーに接続**\] ページで、\[**ルート管理サーバー**\] ボックスに、Operations Manager のルート管理サーバーの名前を入力し、\[**次へ**\] をクリックします。

8.  \[**Operations Manager のデータ ウェアハウスに接続**\] ページで、\[**SQL Server インスタンス**\] ボックスに、データ ウェアハウスが配置される SQL Server インスタンスを入力します (データ ウェアハウスが既定のインスタンスに配置される場合は、atl-sql-001 など、サーバー名のみを入力します)。\[**名前**\] ボックスにデータベース名 "**OperationsManagerDW**" が表示され、\[**SQL Server ポート**\] ボックスに "**1433**" と表示されることを確認します。\[**次へ**\] をクリックします。

9.  \[**SQL Server Reporting Services インスタンス**\] ページで、\[**SQL Server Reporting Services のサーバーを入力してください**\] ドロップダウン リストから SQL Server レポート サーバーを選択し、\[**次へ**\] をクリックします。

10. \[**データ ウェアハウス書き込みアカウント**\] ページで、\[**ユーザー アカウント**\] および \[**パスワード**\] ボックスに、データ ウェアハウスに対する書き込みアクセス許可を最初に割り当てるユーザーの名前とパスワードを入力します。\[**ドメイン**\] ドロップダウン リストからユーザーのドメインを選択し、\[**次へ**\] をクリックします。

11. \[**データ リーダー アカウント**\] ページで、\[**ユーザー アカウント**\] および \[**パスワード**\] ボックスに、SQL Reporting Services がデータ ウェアハウスをクエリするときに使用するユーザー アカウントの名前とパスワードを入力します。\[**ドメイン**\] ドロップダウン リストからアカウントのドメインを選択し、\[**次へ**\] をクリックします。

12. \[**オペレーション データ レポート**\] ページで、\[**次へ**\] をクリックします。

13. \[**Microsoft Update**\] ページで、\[**次へ**\] をクリックします。

14. \[**プログラムのインストールの準備完了**\] ページで、\[**インストール**\] をクリックします。

15. \[**Operations Manager Reporting コンポーネント セットアップ ウィザードを完了しています**\] ページで、\[**完了**\] をクリックします。

16. System Center Operations Manager 2007 R2 のセットアップで、\[**終了**\] をクリックします。

System Center レポートがインストールされたら、次は、SQL Server レポートに関連付けられているセキュリティ グループの名前を元の名前に戻します。そのためには、次の操作を行います。前述のとおり、この手順は、SQL Server を使用する場合にのみ実行する必要があります。

1.  \[**スタート**\] ボタンをクリックし、\[**管理ツール**\] をポイントします。次に \[**サーバー マネージャー**\] をクリックします。

2.  サーバー マネージャーで、\[**構成**\]、\[**ローカル ユーザーとグループ**\] の順に展開し、\[**グループ**\] をクリックします。

3.  グループ **SQLServerReportServerUser$atl-sc-001$MSRS10.ARCHINST** を見つけます。ここで、atl-sc-001 はコンピューターの名前を表し、ARCHINST はアーカイブおよび監視データベースの SQL Server インスタンスを表します。

4.  このグループを右クリックし、\[**名前の変更**\] をクリックします。グループ名の末尾 (SQL Server インスタンス名の直前) に **\_50** を追加して名前を変更します。たとえば、グループ名を **SQLServerReportServerUser$atl-sc-001$MSRS10\_50.ARCHINST** に変更します。

5.  サーバー マネージャーを閉じます。

System Center Operations コンソールが開いている場合は、アプリケーションをいったん閉じて再起動してください。再起動しないと、Operations コンソール ユーザー インターフェイスに \[**レポート**\] タブが表示されません。Operations コンソールを初めて再起動したときは、\[**レポート**\] タブにすべての監視レポートが表示されるまでに数分間かかることがあります。

