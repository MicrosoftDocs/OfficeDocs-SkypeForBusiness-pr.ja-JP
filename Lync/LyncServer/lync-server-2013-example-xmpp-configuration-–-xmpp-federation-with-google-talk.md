---
title: 'Lync Server 2013: XMPP 構成の例 - Google Talk との XMPP フェデレーション'
TOCTitle: XMPP 構成の例  - Google Talk との XMPP フェデレーション
ms:assetid: 360a2f7b-015b-4e93-ac67-0f609c21f1a2
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/JJ204807(v=OCS.15)
ms:contentKeyID: 48271740
ms.date: 12/10/2016
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Lync Server 2013 での XMPP 構成の例 - Google Talk との XMPP フェデレーション

 

_**トピックの最終更新日:** 2016-12-08_

XMPP プロキシを展開する構成の例で、Google Talk とのフェデレーションを定義します。

## XMPP 構成の例 - Google Talk との XMPP フェデレーション

1.  フロント エンド サーバーで、Lync Server 展開ウィザードを開きます。\[**Lync Server システムのインストールまたは更新** \] をクリックして、\[**Lync Server コンポーネントのセットアップまたは削除** \] をクリックします。\[**再実行** \] をクリックします。

2.  \[**Lync Server コンポーネントのセットアップ**\] で、\[**次へ**\] をクリックします。概要画面に、実行された処理が表示されます。展開の完了後に、\[**ログの表示**\] をクリックして、利用可能なログ ファイルを表示します。\[**完了**\] をクリックして、展開を完了します。

3.  エッジ サーバーで、Lync Server 展開ウィザードを開きます。\[**Lync Server システムのインストールまたは更新**\] をクリックして、\[**Lync Server コンポーネントのセットアップまたは削除**\] をクリックします。\[**再実行** \] をクリックします。

4.  Google Talk を XMPP 対応パートナーとして追加します。Google Talk は、サーバー間の XMPP フェデレーションでは暗号化されていない TCP 接続のみをサポートし、ID の確認では Server Dialback のみをサポートします (<http://xmpp.org/extensions/xep-0220.html> を参照)。
    
        New-CsXmppAllowedPartner gmail.com -TlsNegotiation NotSupported -SaslNegotiation NotSupported -EnableKeepAlive $false -SupportDialbackNegotiation $true

5.  エッジ フェデレーションを有効にするには、次のコマンドを入力します。
    
        Set-CsAccessEdgeConfiguration -AllowFederatedUsers $true

6.  \[**Lync Server コンポーネントのセットアップ**\] で、\[**次へ**\] をクリックします。概要画面に、実行された処理が表示されます。展開が完了したら、\[**ログの表示**\] をクリックして、利用可能なログ ファイルを表示します。\[**完了**\] をクリックして、展開を完了します。

7.  エッジ サーバーの Lync Server 展開ウィザードで、\[**ステップ 3: 証明書の要求、インストール、または割り当て**\] の横にある \[**再実行**\] をクリックします。
    

    > [!TIP]
    > エッジ サーバーを初めて展開する場合は、[再実行] ではなく [実行] と表示されます。



8.  \[**利用可能な証明書タスク**\] ページで、\[**新しい証明書要求を作成する**\] をクリックします。

9.  \[**証明書の要求**\] ページで、\[**外部エッジ証明書**\] をクリックします。

10. \[**証明書要求の送信方法**\] ページで、\[**要求を準備して後で送信する**\] チェック ボックスをオンにします。

11. \[**証明書要求ファイル**\] ページで、要求を保存するファイルの完全なパスと名前を入力します (c:\\cert\_exernal\_edge.cer など)。

12. \[**別の証明書テンプレートの指定**\] ページで、既定の WebServer テンプレート以外のテンプレートを使用するには、\[**選択した証明機関に別の証明書テンプレートを使用する**\] チェック ボックスをオンにします。

13. \[**名前およびセキュリティの設定**\] ページで、次の操作を行います。
    
    1.  \[**フレンドリ名**\] に、証明書の表示名を入力します。
    
    2.  \[**ビット長**\] で、ビット長を指定します (通常は既定値の **2048**)。
    
    3.  \[**証明書の秘密キーをエクスポート可能としてマークする**\] チェック ボックスがオンになっていることを確認します。

14. \[**組織情報**\] ページで、組織の名前と組織単位 (部、課など) を入力します。

15. \[**地理情報**\] ページで、場所情報を指定します。

16. \[**サブジェクト名/サブジェクト代替名**\] ページに、ウィザードによって自動的に設定される情報が表示されます。追加のサブジェクト代替名が必要な場合は、次の 2 つの手順でこれを指定します。

17. \[**サブジェクト代替名 (SAN) の SIP ドメイン設定** \] ページで、ドメインのチェック ボックスをオンにして、サブジェクトの別名の一覧に sip. *SIP ドメイン* エントリを追加します。

18. \[**追加のサブジェクト代替名の構成**\] ページで、必要な追加のサブジェクトの別名を指定します。
    

    > [!TIP]
    > XMPP プロキシがインストールされている場合は、既定でドメイン名 (contoso.com など) が SAN エントリに設定されています。別のエントリが必要な場合は、この手順で追加します。



19. \[**要求の概要**\] ページで、要求を生成するために使用する証明書情報を確認します。

20. コマンドの実行が完了したら、\[**ログの表示**\] をクリックするか、または \[**次へ**\] をクリックして続行します。

21. \[**証明書要求ファイル**\] ページで、\[**表示**\] をクリックして生成済みの証明書の署名要求 (CSR) ファイルを表示するか、または \[**完了**\] をクリックして証明書ウィザードを終了します。

22. 要求ファイルをコピーして、公的証明機関に送信します。

23. パブリック証明書の受信、インポート、および割り当てを行った後、エッジ サーバー サービスを停止して再起動する必要があります。Lync Server 管理シェルを以下の手順で起動します。\[**スタート**\]、\[**すべてのプログラム**\]、\[**Microsoft Lync Server 2013**\]、\[**Lync Server 管理シェル**\] の順にクリックします。これは、Lync Server 管理シェルで次のコマンドを入力して行います。
    
    ```
    Stop-CsWindowsService
    ```
    ```
    Start-CsWindowsService
    ```

24. XMPP フェデレーションの DNS を構成するには、SRV レコード (\_xmpp-server.\_tcp.*ドメイン名*) を外部 DNS に追加します。SRV レコードは、ポート値 5269 で、エッジ サーバーのアクセス エッジ FQDN に解決されます。

25. フロント エンド サーバーで Lync Server 管理シェルを開き、次のコマンドを入力することによって、すべてのユーザーを有効にする新しい外部アクセス ポリシーを構成します。
    
        New-CsExternalAccessPolicy -Identity FedPic -EnableFederationAccess $true -EnablePublicCloudAccess $true
        Get-CsUser | Grant-CsExternalAccessPolicy -PolicyName FedPic

