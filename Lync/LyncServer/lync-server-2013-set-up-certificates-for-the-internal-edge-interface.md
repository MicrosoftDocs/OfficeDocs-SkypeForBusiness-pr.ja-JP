---
title: 'Lync Server 2013: 内部エッジインターフェイス用の証明書の設定'
description: 'Lync Server 2013: 内部エッジインターフェイス用の証明書を設定します。'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Set up certificates for the internal edge interface
ms:assetid: a1963cc9-87c5-4935-86c0-6bedc6afd0ac
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Gg412750(v=OCS.15)
ms:contentKeyID: 48184949
ms.date: 07/23/2014
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 52473069735d4f48c247367194139c479e71293f
ms.sourcegitcommit: d42a21b194f4a45e828188e04b25c1ce28a5d1ae
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/17/2020
ms.locfileid: "48575403"
---
# <a name="set-up-certificates-for-the-internal-edge-interface-in-lync-server-2013"></a>Lync Server 2013 での内部エッジインターフェイス用の証明書の設定

<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">



</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**トピックの最終更新日:** 2013-11-07_

<div>


> [!IMPORTANT]  
> 証明書ウィザードを実行する場合、使用する証明書テンプレートの種類に対して適切なアクセス許可が割り当てられたグループのメンバーであるアカウントを使用してログインしていることを確認してください。 既定では、Lync Server 2013 証明書要求は Web サーバー証明書テンプレートを使用します。 RTCUniversalServerAdmins グループのメンバーであるアカウントおよびこのテンプレートを使用して証明書を要求する場合、そのテンプレートを使用するために必要な登録アクセス許可がそのグループに割り当てられていることを確認してください。



</div>

各エッジサーバーの内部インターフェイスに1つの証明書が必要です。 内部インターフェイスの証明書は、内部のエンタープライズ証明機関 (CA) またはパブリック CA によって発行できます。 組織で内部 CA が展開されている場合は、内部 CA を使用して内部インターフェイス用の証明書を発行することによって、公開証明書を使用する費用を節約できます。 内部 Windows Server 2008 CA または Windows Server 2008 R2 CA を使用して、これらの証明書を作成できます。

この他の証明書の要件の詳細については、「 [Lync Server 2013 の外部ユーザーアクセスの証明書要件](lync-server-2013-certificate-requirements-for-external-user-access.md)」を参照してください。

サイトの内部エッジインターフェイスで証明書を設定するには、このセクションの手順を使用して、次の操作を行います。

1.  内部インターフェイス用の CA 証明書チェーンを各エッジサーバーにダウンロードします。

2.  各エッジサーバーに、内部インターフェイス用の CA 証明書チェーンをインポートします。

3.  1台のエッジサーバー (最初のエッジサーバー) で、内部インターフェイス用の証明書要求を作成します。

4.  最初のエッジサーバーの内部インターフェイスの証明書をインポートします。

5.  このサイトの他のエッジサーバー (またはこのロードバランサーの背後に展開されている) で証明書をインポートします。

6.  各エッジサーバーの内部インターフェイスの証明書を割り当てます。

エッジサーバー (複数サイトエッジトポロジ) を持つ複数のサイトが存在する場合、または別のロードバランサーの背後に展開されたエッジサーバーの別個のセットを使用している場合は、エッジサーバーがあり、別のロードバランサーの背後に展開されたエッジサーバーのセットごとに、次の手順を実行する必要があります。

<div>


> [!NOTE]  
> このセクションの手順の手順は、Windows Server &nbsp; 2008 CA、Windows server &nbsp; 2008 &nbsp; R2 Ca、WINDOWS server 2012 CA、または Windows SERVER 2012 R2 ca を使用して、各エッジサーバーの証明書を作成する方法に基づいています。 その他の CA の詳細な手順については、その CA のマニュアルを参照してください。 既定では、認証されたすべてのユーザーが、証明書を要求するための適切なユーザー権限を持っています。<BR>このセクションの手順は、エッジサーバーの展開プロセスの一環として、エッジサーバー上に証明書要求を作成することに基づいています。 フロントエンドサーバーを使用して証明書要求を作成することができます。 この操作は、エッジサーバーの展開を開始する前に、計画と展開のプロセスの早い段階で証明書要求を完了するために行うことができます。 これを行うには、要求する証明書が、エクスポート可能な秘密キーで定義されていることを確認する必要があります。<BR>このセクションの手順では、証明書の .cer ファイルと. p7b ファイルを使用する方法について説明します。 別の種類のファイルを使用する場合は、必要に応じてこれらの手順を変更します。



</div>

<div>

## <a name="to-download-the-ca-certification-chain-for-the-internal-interface-using-certsrv-web-site"></a>Certsrv Web サイトを使用して内部インターフェイス用の CA 証明書チェーンをダウンロードするには

1.  内部ネットワーク (エッジサーバーではない) の Lync Server 2013 サーバーに **Administrators** グループのメンバーとしてログオンします。

2.  [ **スタート**]、[ **実行**] の順にクリックし、次のコマンドを入力して、コマンドプロンプトで次のコマンドを実行します。
    
        https://<name of your Issuing CA Server>/certsrv
    
    以下に例を示します。
    
        https://ca01.contoso.net/certsrv
    
    <div>
    

    > [!NOTE]  
    > Windows Server 2008 または Windows Server 2008 R2 エンタープライズ CA を使用している場合は、http ではなく https を使用する必要があります。

    
    </div>

3.  発行元の CA の certsrv web ページで、[ **タスクの選択**] の [ **CA 証明書、証明書チェーン、または CRL のダウンロード**] をクリックします。

4.  [ **Ca 証明書、証明書チェーン、または CRL のダウンロード**] の [ **ca 証明書チェーンのダウンロード**] をクリックします。

5.  **[ファイルのダウンロード]** ダイアログ ボックスで **[保存]** をクリックします。

6.  . P7b ファイルをサーバーのハードディスクドライブに保存し、各エッジサーバーのフォルダーにコピーします。
    
    <div>
    

    > [!NOTE]  
    > . P7b ファイルには、証明のパスにあるすべての証明書が含まれています。 証明のパスを表示するには、サーバー証明書を開き、証明のパスをクリックします。

    
    </div>

</div>

<div>

## <a name="to-export-the-ca-certification-chain-for-the-internal-interface-using-mmc"></a>MMC を使用して内部インターフェイス用の CA 証明書チェーンをエクスポートするには

1.  Microsoft 管理コンソール (MMC) を使用して、任意のドメインに参加しているコンピューターから CA ルート証明書をエクスポートできます。 [ **スタート**] をクリックし、[ **実行**] をクリックして、「 **MMC**」と入力します。

2.  MMC コンソールで、[ **ファイル**] をクリックし、[ **追加/削除**] をクリックします。

3.  [ **スナップインの追加と削除** ] ダイアログボックスの一覧で、[ **証明書**] を選択し、[ **追加**] をクリックします。 メッセージが表示されたら、[ **コンピューターアカウント**] を選択します。 [ **コンピューターの選択** ] ダイアログボックスで、[ **ローカルコンピューター**] を選択します。 **[完了]** をクリックします。 **[OK]** をクリックします。

4.  [ **証明書 (ローカルコンピューター)**] を展開します。 [ **信頼されたルート証明機関**] を展開し、[ **証明書**] を選択します。

5.  CA によって発行されたルート証明書をクリックします。 証明書を右クリックし、[ **すべてのタスク**] を選択して、[ **エクスポート**] を選択します。 **証明書のエクスポートウィザード**が開きます。

6.  **証明書のエクスポート ウィザード**で、**[次へ]** をクリックします。

7.  [ **エクスポートファイルの形式** ] ダイアログで、エクスポート先の形式を選択します。 **暗号化メッセージ構文標準-PKCS 7 証明書 () をお勧めし \# ます。P7B)**。 [ **暗号化メッセージ構文] 標準-PKCS \# 7 証明書 (.P7B)** で、[証明の **パスにある証明書をすべて含める (可能な場合** )] チェックボックスをオンにして、ルート CA 証明書と中間 CA 証明書を含め、証明書チェーンをエクスポートします。 [**次へ**] をクリックします。

8.  [ファイル名] エントリの [ **エクスポートするファイル** ] ダイアログで、エクスポートした証明書のパスとファイル名 (既定の拡張子は. p7b) を入力します。 必要に応じて、[ **参照**] をクリックして、エクスポートした証明書を配置するディレクトリを見つけ、エクスポートされた証明書の名前を指定します。 **[保存]** をクリックします。 **[次へ]** をクリックします。

9.  操作の概要を確認し、[ **完了** ] をクリックして証明書のエクスポートを完了します。 [ **OK]** をクリックして、正常にエクスポートされたことを確認します。

</div>

<div>

## <a name="to-import-the-ca-certification-chain-for-the-internal-interface"></a>内部インターフェイス用の CA 証明書チェーンをインポートするには

1.  各エッジサーバーで、[**スタート**] をクリックし、[名前を指定して**実行**] をクリックして、[**開く**] ボックスに「 **MMC** 」と入力し、[ **OK]** をクリックして、Microsoft 管理コンソール (MMC) を開きます。

2.  **[ファイル]** メニューの **[スナップインの追加と削除]** をクリックし、**[追加]** をクリックします。

3.  **[スタンドアロン スナップインの追加]** ボックスで、**[証明書]** をクリックし、**[追加]** をクリックします。

4.  **[証明書スナップイン]** ダイアログ ボックスの **[コンピューター アカウント]** をクリックし、**[次へ]** をクリックします。

5.  **[コンピューターの選択]** ダイアログ ボックスで、**[ローカル コンピューター: (このコンソールを実行しているコンピューター)]** チェック ボックスがオンになっていることを確認して、**[完了]** をクリックします。

6.  **[閉じる]** をクリックし、**[OK]** をクリックします。

7.  コンソールツリーで、[ **証明書 (ローカルコンピューター)**] を展開し、[ **信頼されたルート証明機関**] を右クリックし、[ **すべてのタスク**] をポイントして、[ **インポート**] をクリックします。

8.  ウィザードの [ **インポートするファイル**] で、証明書のファイル名 (前の手順で、内部インターフェイス用の CA 証明書チェーンをダウンロードしたときに指定した名前) を指定します。

9.  各エッジサーバーでこの手順を繰り返します。

</div>

<div>

## <a name="to-create-the-certificate-request-for-the-internal-interface"></a>内部インターフェイスの証明書要求を作成するには

1.  いずれかのエッジサーバーで、展開ウィザードを起動し、[ **ステップ 3: 証明書の要求、インストール、または割り当て**] の横にある [ **実行**] をクリックします。
    
    <div>
    

    > [!NOTE]  
    > プール内の1つの場所に複数のエッジサーバーがある場合は、いずれかのエッジサーバー上で証明書ウィザードを実行できます。<BR>ステップ3を初めて実行した後、ボタンが <STRONG>再度実行</STRONG>されるように変更され、すべての必須証明書の要求、インストール、および割り当てが完了するまで、タスクが正常に完了したことを示す緑のチェックマークが表示されません。

    
    </div>

2.  [**利用可能な証明書タスク**] ページで、[**新しい証明書要求を作成する**] をクリックします。

3.  **[証明書要求]** ページで **[次へ]** をクリックします。

4.  [ **要求** の送信] ページで、[ **要求を準備して後で送信**する] をクリックします。

5.  [ **証明書要求ファイル** ] ページで、要求を保存する完全なパスとファイル名を入力します (たとえば、 **c: \\ cert \_ 内部 \_ エッジ. .cer**)。

6.  [ **代替証明書テンプレートの指定** ] ページで、既定の WebServer テンプレート以外のテンプレートを使用するには、[ **選択した証明機関に別の証明書テンプレートを使用** する] チェックボックスをオンにします。

7.  [**名前およびセキュリティの設定**] ページで、次の操作を行います。
    
      - [ **フレンドリ名**] に、証明書の表示名 ([内部エッジ] など) を入力します。
    
      - **[ビット長]** で、ビット長を指定します (通常は既定値の **[2048]**)。
        
        <div>
        

        > [!NOTE]  
        > ビット長が大きいほどセキュリティが向上しますが、速度に悪影響を及ぼします。

        
        </div>
    
      - 証明書をエクスポート可能にする必要がある場合は、[ **証明書の秘密キーをエクスポート可能としてマーク** する] チェックボックスをオンにします。

8.  [ **組織情報** ] ページで、組織の名前と組織単位 (OU) (部門や部署など) を入力します。

9.  [**地理情報**] ページで、場所情報を指定します。

10. [**サブジェクト名/サブジェクト代替名**] ページに、ウィザードによって自動的に設定される情報が表示されます。

11. [**追加のサブジェクト代替名の構成**] ページで、必要な追加のサブジェクトの別名を指定します。

12. [ **要求の概要** ] ページで、要求の生成に使用する証明書情報を確認します。

13. コマンドが完了したら、次の手順を実行します。
    
      - 証明書要求のログを表示するには、**[ログの表示]** をクリックします。
    
      - 証明書要求を完了するには、**[次へ]** をクリックします。

14. **[証明書要求ファイル]** ページで、次の操作を行います。
    
      - 生成した証明書の署名要求 (CSR) ファイルを表示するには、**[表示]** をクリックします。
    
      - ウィザードを閉じるには、**[完了]** をクリックします。

15. このファイルを CA に提出します (エンタープライズ CA の組織でサポートされている電子メールまたはその他の方法)。応答ファイルを受け取ったときに、このコンピューターに新しい証明書をコピーしてインポートできるようにします。

</div>

<div>

## <a name="to-import-the-certificate-for-the-internal-interface"></a>内部インターフェイス用の証明書をインポートするには

1.  証明書要求を作成したエッジサーバーに、ローカルの Administrators グループのメンバーとしてログオンします。

2.  展開ウィザードで、[ **ステップ 3: 証明書の要求、インストール、または割り当て**] の横にある [ **再実行**] をクリックします。
    
    ステップ3を初めて実行すると、ボタンが **再度実行**されますが、必要なすべての証明書の要求、インストール、および割り当てが完了するまで、緑のチェックマーク (タスクが正常に完了したことを示す) は表示されません。

3.  [ **利用可能な証明書タスク** ] ページで、[a から証明書をインポートする] をクリックし **ます。P7b、.pfx、または .cer ファイル**。

4.  [ **証明書のインポート** ] ページで、このエッジサーバーの内部インターフェイス用に要求して受信した証明書の完全なパスとファイル名を入力します (または、[ **参照** ] をクリックして、ファイルを見つけて選択します)。

5.  プールの他のメンバーに対して秘密キーを含む証明書をインポートする場合は、[ **証明書ファイルに証明書の秘密キーが含まれてい** ます] チェックボックスをオンにして、パスワードを指定します。

</div>

<div>

## <a name="to-export-the-certificate-with-the-private-key-for-edge-servers-in-a-pool"></a>プール内のエッジ サーバー用の証明書と秘密キーをエクスポートするには

1.  証明書をインポートしたのと同じエッジ サーバーに、Administrators グループのメンバーとしてログオンします。

2.  [**スタート**] ボタン、[**ファイル名を指定して実行**] の順にクリックし、「**MMC**」と入力します。

3.  MMC コンソールで、[ **ファイル**] をクリックし、[ **スナップインの追加と削除**] をクリックします。

4.  [スナップインの追加と削除] ページで、[ **証明書**] をクリックし、[ **追加**] をクリックします。

5.  [証明書スナップイン] ダイアログで、[ **コンピューターアカウント**] を選択します。 [**次へ**] をクリックします。 [コンピューターの選択] で、[ **ローカルコンピューター: (このコンソールを実行しているコンピューター)**] を選択します。 [**完了**] をクリックします。 MMC コンソールの構成を完了するには、[ **OK** ] をクリックします。

6.  [ **証明書 (ローカルコンピューター)** ] をダブルクリックして、証明書ストアを展開します。 [ **個人**] をダブルクリックし、[ **証明書**] をダブルクリックします。
    
    <div>
    

    > [!IMPORTANT]  
    > ローカル コンピューターの個人の証明書ストアに証明書がない場合は、インポートした証明書に秘密キーが関連付けられていません。要求とインポートの手順を再確認してください。問題が解決しない場合は、証明機関の管理者またはプロバイダーに問い合わせてください。

    
    </div>

7.  ローカルコンピューターの証明書個人用ストアで、エクスポートする証明書を右クリックします。 [ **すべてのタスク**] をクリックし、[ **エクスポート**] をクリックします。

8.  証明書のエクスポートウィザードで、[ **次へ**] をクリックします。 [ **はい、秘密キーをエクスポート**します] を選択します。 [**次へ**] をクリックします。
    
    <div>
    

    > [!NOTE]  
    > [<STRONG>はい、秘密キーをエクスポートします</STRONG>] が無効になっていて選択できない場合、この証明書に関連付けられている秘密キーはエクスポート可能になっていません。エクスポートを続行するには、その前に証明書を再度要求して、証明書の秘密キーをエクスポート可能にする必要があります。証明機関の管理者またはプロバイダーに問い合わせてください。

    
    </div>

9.  [エクスポートファイルの形式] ダイアログで、[ **Personal Information Exchange – PKCS 12 (]) を選択し \# ます。PFX)** を選択し、次のように選択します。
    
      - 可能であれば、証明書パスにあるすべての証明書を含める
    
      - すべての拡張プロパティをエクスポートする
        
        <div>
        

        > [!WARNING]  
        > エッジ サーバーから証明書をエクスポートするとき、[<STRONG>正しくエクスポートされたときは秘密キーを削除する</STRONG>] をオンにしないでください。このオプションをオンにすると、このエッジ サーバーに証明書と秘密キーをインポートすることが必要になります。

        
        </div>
    
    続行するには、**[次へ]** をクリックします。

10. 秘密キーを保護するためにパスワードを割り当てる場合は、秘密キーのパスワードを入力します。 確認のためにパスワードを再入力します。 [**次へ**] をクリックします。

11. エクスポートする証明書のパスとファイル名を入力し、ファイル拡張子に .pfx を指定します。このパスは、プール内の他のすべてのエッジ サーバーからアクセスできるパスにするか、USB フラッシュ ドライブなどリムーバブル メディアを使用して転送可能にする必要があります。[**次へ**] をクリックします。

12. [証明書のエクスポートウィザードの完了] ダイアログの概要を確認します。 [**完了**] をクリックします。

13. [正常なエクスポート] ダイアログで [ **OK** ] をクリックします。

14. 「 [Lync Server 2013 の外部エッジインターフェイスの証明書をセットアップ](lync-server-2013-set-up-certificates-for-the-external-edge-interface.md) する」の手順に従って、エクスポートした証明書ファイルを他のエッジサーバーにインポートします。

</div>

<div>

## <a name="to-assign-the-internal-certificate-on-the-edge-servers"></a>エッジサーバーに内部証明書を割り当てるには

1.  各エッジ サーバーの展開ウィザードで、**[ステップ 3:証明書の要求、インストール、または割り当て]** の横にある **[再実行]** をクリックします。

2.  **[利用可能な証明書タスク]** ページで、**[既存の証明書を割り当てる]** をクリックします。

3.  [ **証明書の割り当て** ] ページで、一覧から [ **エッジ内部** ] を選択します。

4.  [ **証明書ストア** ] ページで、内部エッジに対してインポートした証明書 (前の手順) を選択します。

5.  **[証明書割り当ての概要]** ページで設定を確認し、**[次へ]** をクリックして証明書を割り当てます。

6.  ウィザードの完了ページで **[完了]** をクリックします。

7.  この手順を使用して内部エッジ証明書を割り当てると、各サーバーで証明書スナップインを開き、[ **証明書 (ローカルコンピューター)**]、[ **個人**]、[ **証明書**] の順に展開し、[詳細] ウィンドウで内部エッジ証明書が表示されていることを確認します。

8.  展開に複数のエッジ サーバーが含まれる場合は、各エッジ サーバーでこの手順を繰り返します。

</div>

</div>

<span> </span>

</div>

</div>

</div>

